import{q as je,r as o,j as e,Y as fe,a as m,y as i}from"./app-uvVrVUAm.js";import{F as ye,a as ve,b as Ne}from"./formik.esm-D3XBtuo1.js";import{A as we,o as ke,p as w,x as I,d as Ce,y as Se,G as Fe,q as $e,r as Me,B as De,E as K,I as Ie,t as Pe,J as X,D as d,l as P,K as Ae,L as Ee,w as Re,C as J,Q as Le}from"./AuthenticatedLayout-4Ujjea55.js";import{b as A,M as Be}from"./Modal-BAvTqX0i.js";import{d as ze}from"./index-kKRJ2tmb.js";import{F as _e,i as Te,p as k}from"./ReactContexify.min-B2vfiD7j.js";import{b as Oe}from"./index-BaOsFkru.js";import"./transition-CzF8R3-J.js";import"./ReactToastify-CibeMeaJ.js";import"./index-BKNjMPK8.js";function ls(Y){const{auth:Z,stock:Ve,startdate:p,enddate:b,products:n,totalstock:ee,totalstockavailable:se,totalstocknotavailable:te,totalStockValue:ae,totaliteminstock:re,categories:le,brands:ne}=Y,{url:ie}=je(),t=new URLSearchParams(ie.split("?")[1]),[E,R]=o.useState([]),[L,j]=o.useState(null),[ce,C]=o.useState(!1),[g,f]=o.useState([]),[oe,B]=o.useState(!1),[de,S]=o.useState(!1),[xe,F]=o.useState(!1),[y,z]=o.useState("cards"),[$,he]=o.useState({startDate:new Date,endDate:new Date,key:"selection"}),[qe,Qe]=o.useState(!1),[We,Ue]=o.useState({brand:"",category:"",status:""}),me=s=>{const a=s.target.files[0];a&&(a.type==="text/csv"||a.name.endsWith(".csv")||a.name.endsWith(".xlsx")||a.name.endsWith(".xls")?i.post(route("product.csvstore"),{file:a}):console.error("Please select a CSV file."))},[M,_]=o.useState({}),[ge,T]=o.useState({}),ue=async s=>{if(E.includes(s))R(a=>a.filter(l=>l!==s));else if(R(a=>[...a,s]),!M[s]){T(a=>({...a,[s]:!0}));try{const a=await axios.get(`/dashboard/product/${s}/stock-logs`);_(l=>{var c;return{...l,[s]:((c=a.data.stocklogs)==null?void 0:c.data)||[]}})}catch(a){console.error("Error fetching stock logs:",a),_(l=>({...l,[s]:[]}))}finally{T(a=>({...a,[s]:!1}))}}},{show:pe}=_e({id:"context-menu"}),v=({props:s,action:a})=>{const l=s;a==="view"?i.get(route("product.show",l.id)):a==="edit"?i.get(route("product.edit",l.id)):a==="delete"?j(l):a==="stock"&&i.get(route("stock.index",{product_id:l.id}))},[Ge,He]=o.useState(!1);return e.jsxs(we,{Product:Z.Product,header:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Be,{size:20,className:"cursor-pointer text-gray-600 hover:text-gray-800",onClick:()=>i.get(route("dashboard")),title:"Back"}),e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Products"})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsxs(d,{children:[e.jsx(d.Trigger,{children:e.jsxs("button",{className:"inline-flex items-center gap-2 rounded-lg bg-cyan-700 px-4 py-2 text-sm font-medium text-white transition hover:bg-cyan-800 focus:outline-none focus:ring-4 focus:ring-cyan-300",children:["File",e.jsx(P,{className:"h-3 w-3"})]})}),e.jsxs(d.Content,{className:"mt-2 w-48 rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none",children:[e.jsx("a",{href:route("product.csvexport"),download:!0,className:"block w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Export Excel (.csv)"}),e.jsx("button",{onClick:()=>F(!0),className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Import Excel (.csv)"})]})]}),e.jsxs(d,{children:[e.jsx(d.Trigger,{children:e.jsxs("button",{className:"inline-flex items-center gap-2 rounded-lg bg-cyan-700 px-4 py-2 text-sm font-medium text-white transition hover:bg-cyan-800 focus:outline-none focus:ring-4 focus:ring-cyan-300",children:["Add new",e.jsx(P,{className:"h-3 w-3"})]})}),e.jsx(d.Content,{className:"mt-2 w-48 rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none",children:e.jsx(m,{href:route("product.create"),className:"block w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Product"})})]})]})]}),children:[e.jsx(fe,{title:"Purchase"}),e.jsxs("div",{className:"flex gap-2 mt-4 mx-4",children:[e.jsxs("button",{onClick:()=>z("cards"),className:`px-4 py-2 rounded-lg text-xs font-medium flex items-center justify-center gap-2 ${y==="cards"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700"}`,children:[e.jsx(ke,{className:""}),"Cards"]}),e.jsxs("button",{onClick:()=>z("filters"),className:`px-4 py-2 rounded-lg text-xs font-medium flex items-center justify-center gap-2  ${y==="filters"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700"}`,children:[e.jsx(w,{className:"inline mr-1"}),"Filters"]})]}),y==="cards"&&e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 xl:grid-cols-5 gap-4 p-4",children:[e.jsx(m,{href:route("product.index"),children:e.jsxs("div",{className:"bg-white border border-gray-200 rounded-2xl shadow p-4 flex justify-between items-center hover:shadow-md transition",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm font-medium",children:"Total Products"}),e.jsx("p",{className:"text-xl font-bold",children:ee})]}),e.jsx(I,{size:36,className:"text-blue-500"})]})}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-2xl shadow p-4 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm font-medium",children:"Stock keeping unit"}),e.jsx("p",{className:"text-xl font-bold",children:re})]}),e.jsx(I,{size:36,className:"text-green-500"})]}),e.jsx(m,{href:route("product.index",{status:0}),children:e.jsxs("div",{className:"bg-white border border-gray-200 rounded-2xl shadow p-4 flex justify-between items-center hover:shadow-md transition",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm font-medium",children:"Out of Stock"}),e.jsx("p",{className:"text-xl font-bold",children:te})]}),e.jsx(Ce,{size:36,className:"text-red-500"})]})}),e.jsx(m,{href:route("product.index",{status:1}),children:e.jsxs("div",{className:"bg-white border border-gray-200 rounded-2xl shadow p-4 flex justify-between items-center hover:shadow-md transition",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm font-medium",children:"In Stock"}),e.jsx("p",{className:"text-xl font-bold",children:se})]}),e.jsx(Se,{size:36,className:"text-green-600"})]})}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-2xl shadow p-4 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm font-medium",children:"Total Stock Value"}),e.jsx("p",{className:"text-xl font-bold text-emerald-600",children:ae})]}),e.jsx(Fe,{size:36,className:"text-yellow-500"})]})]}),y==="filters"&&e.jsx("div",{className:"mx-4 mt-4 p-4 bg-white border border-gray-200 rounded-2xl shadow",children:"Filters"}),e.jsx("div",{className:"flex flex-col px-4 mx-auto w-full mt-4",children:e.jsxs("div",{className:"w-full ",children:[e.jsxs("div",{className:"flex items-center justify-between gap-4 mb-6",children:[e.jsx(ye,{enableReinitialize:!0,initialValues:{search:t.get("search")||""},onSubmit:s=>{i.get(route("product.index"),{search:s.search,status:t.get("status"),brand:t.get("brand"),category:t.get("category"),startdate:p,enddate:b,supplierinvoiceno:t.get("supplierinvoiceno"),invoicecode:t.get("invoicecode")},{preserveState:!0,preserveScroll:!0})},children:({values:s,setFieldValue:a,handleSubmit:l})=>e.jsx(ve,{className:"w-full flex items-center gap-3",children:e.jsx("div",{className:"relative w-full md:max-w-md",children:e.jsx(Ne,{name:"search",children:({field:c,form:h})=>e.jsxs("div",{className:"relative",children:[e.jsx("input",{...c,type:"text",placeholder:"Search products...",className:"w-full pl-10 pr-10 py-2 rounded-xl border border-gray-300 focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 focus:outline-none transition-all duration-300 bg-white shadow-sm hover:shadow-md placeholder-gray-400 text-gray-800",onKeyDown:x=>{x.key==="Enter"&&l()}}),e.jsx("button",{type:"submit",className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-cyan-500 focus:outline-none transition-colors","aria-label":"Search",children:e.jsx($e,{className:"w-4 h-4"})}),c.value&&e.jsx("button",{type:"button",onClick:()=>{h.setFieldValue("search",""),i.get(route("product.index"))},className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-red-500 focus:outline-none transition-colors","aria-label":"Clear search",children:e.jsx(Me,{className:"w-4 h-4"})})]})})})})}),g.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs(m,{href:route("product.printqr",{id:g.join(",")}),className:"text-white  w-full md:w-64 lg:w-48  py-2 px-4 bg-black rounded-lg hover:bg-gray-600 flex justify-center items-center gap-2",children:[e.jsx(De,{className:"w-4 h-4"}),"Print QR"]}),e.jsxs("button",{onClick:()=>C(!0),className:"text-white w-full md:w-64 lg:w-48  py-2 px-4 bg-red-500 rounded-lg hover:bg-red-600 flex justify-center items-center gap-2",children:[e.jsx(K,{className:"w-4 h-4"}),"Bulk Delete"]})]}),e.jsxs("button",{onClick:()=>S(!0),className:"text-white flex justify-center items-center gap-2 w-full py-2 px-4 rounded-lg bg-slate-800 hover:bg-slate-900 md:w-auto",children:[e.jsx(Ie,{className:"h-4 w-4"}),"Date Range Filter"]}),e.jsxs("button",{onClick:()=>{i.get(route("product.index"))},className:"text-gray-700 flex justify-center items-center gap-2 w-full py-2 px-4 rounded-lg  bg-gray-200 hover:bg-slate-300 md:w-auto",children:[e.jsx(Pe,{className:"h-4 w-4"}),"Reset Filters"]})]}),e.jsx("div",{className:"overflow-x-auto bg-white rounded-xl shadow-md border border-gray-200",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"whitespace-nowrap text-xs uppercase bg-gray-100 text-gray-700 tracking-wide border-b",children:e.jsxs("tr",{children:[e.jsxs("th",{className:"px-4 py-3 w-6",children:[e.jsx("input",{id:"checkbox",type:"checkbox",className:"hidden peer",onChange:s=>{f(s.target.checked?n.data.map(a=>a.id):[])},checked:g.length===n.data.length}),e.jsx("label",{htmlFor:"checkbox",className:"relative flex items-center justify-center p-0.5 peer-checked:before:hidden before:block before:absolute before:w-full before:h-full before:bg-white w-5 h-5 cursor-pointer bg-black border border-gray-400 rounded overflow-hidden",children:e.jsx(X,{className:"w-full fill-white"})})]}),e.jsx("th",{className:"px-2 py-3 w-40 truncate text-left",children:"Product"}),e.jsx("th",{className:"px-2 py-3 w-20",children:"Inventory"}),e.jsx("th",{className:"px-2 py-3 w-28",children:"Purchase Price"}),e.jsx("th",{className:"px-2 py-3 w-28",children:"Selling Price"}),e.jsx("th",{className:"px-2 py-3 w-36",children:e.jsxs(d,{children:[e.jsx(d.Trigger,{children:e.jsxs("div",{className:"flex items-center justify-between cursor-pointer",children:[`Category (${t.get("category")||"All"})`,e.jsx("button",{className:"text-gray-500 hover:text-gray-700 transition",title:"Filter Categories",children:e.jsx(w,{className:"w-4 h-4"})})]})}),e.jsx(d.Content,{children:e.jsxs("select",{onClick:s=>s.stopPropagation(),name:"category",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg w-full p-2.5 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",onChange:s=>i.get(route("product.index"),{category:s.target.value,status:t.get("status"),brand:t.get("brand"),search:t.get("search"),startdate:p,enddate:b,supplierinvoiceno:t.get("supplierinvoiceno"),invoicecode:t.get("invoicecode")},{preserveState:!0,preserveScroll:!0}),value:t.get("category")||"",children:[e.jsx("option",{value:"",children:"All Categories"}),le.map(s=>e.jsxs("option",{value:s.name,children:[s.name," (",s.total_products,")"]},s.name))]})})]})}),e.jsx("th",{className:"px-2 py-3 w-32",children:e.jsxs(d,{children:[e.jsx(d.Trigger,{children:e.jsxs("div",{className:"flex items-center justify-between cursor-pointer",children:[`Brands (${t.get("brand")||"All"})`,e.jsx("button",{className:"text-gray-500 hover:text-gray-700 transition",title:"Filter Brands",children:e.jsx(w,{className:"w-4 h-4"})})]})}),e.jsx(d.Content,{children:e.jsxs("select",{onClick:s=>s.stopPropagation(),name:"brand",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg w-full p-2.5 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",onChange:s=>i.get(route("product.index"),{brand:s.target.value,category:t.get("category"),status:t.get("status"),search:t.get("search"),startdate:p,enddate:b,supplierinvoiceno:t.get("supplierinvoiceno"),invoicecode:t.get("invoicecode")},{preserveState:!0,preserveScroll:!0}),value:t.get("brand")||"",children:[e.jsx("option",{value:"",children:"All Brands"}),ne.map(s=>e.jsxs("option",{value:s.name,children:[s.name," (",s.total_products,")"]},s.name))]})})]})}),e.jsx("th",{className:"px-2 py-3 w-20",children:e.jsxs(d,{children:[e.jsx(d.Trigger,{children:e.jsxs("div",{className:"flex items-center justify-between cursor-pointer",children:[`Status (${t.get("status")==="1"?"In Stock":t.get("status")==="0"?"Out of Stock":"All"})`,e.jsx("button",{className:"text-gray-500 hover:text-gray-700 transition",title:"Filter Status",children:e.jsx(w,{className:"w-4 h-4"})})]})}),e.jsx(d.Content,{children:e.jsxs("select",{onClick:s=>s.stopPropagation(),name:"status",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg w-full p-2.5 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",onChange:s=>i.get(route("product.index"),{status:s.target.value,category:t.get("category"),brand:t.get("brand"),search:t.get("search"),startdate:p,enddate:b,supplierinvoiceno:t.get("supplierinvoiceno"),invoicecode:t.get("invoicecode")},{preserveState:!0}),value:t.get("status")||"",children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"1",children:"In Stock"}),e.jsx("option",{value:"0",children:"Out of Stock"})]})})]})}),e.jsx("th",{className:"px-2 py-3 w-32 text-center",children:"Actions"})]})}),e.jsxs("tbody",{className:"whitespace-nowrap text-gray-800",children:[n.data.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"10",className:"p-4 text-center text-gray-500",children:"No products found."})}),n.data.map(s=>{var l,c,h,x,u,N,O,V,q,Q,W,U,G,H;const a=E.includes(s.id);return e.jsxs(o.Fragment,{children:[e.jsxs("tr",{onContextMenu:r=>{r.preventDefault(),pe({event:r,props:s})},className:`h-12 transition duration-200 ${((l=s==null?void 0:s.stock)==null?void 0:l.quantity)===0||((c=s==null?void 0:s.stock)==null?void 0:c.quantity)===null?"bg-red-100 hover:bg-red-200":((h=s==null?void 0:s.stock)==null?void 0:h.quantity)<5?"bg-yellow-100 hover:bg-yellow-200":"odd:bg-white even:bg-gray-50 hover:bg-gray-100"} ${g.includes(s.id)?"border-cyan-200 border-b":"border-gray-200 border-b"}`,children:[e.jsxs("td",{className:"px-4 pb-2",children:[e.jsx("input",{id:`checkbox-${s.id}`,type:"checkbox",className:"hidden peer",value:s.id,onChange:r=>{r.target.checked?f(D=>[...D,s.id]):f(D=>D.filter(be=>be!==s.id))},checked:g.includes(s.id)}),e.jsx("label",{htmlFor:`checkbox-${s.id}`,className:"relative flex items-center justify-center p-0.5 peer-checked:before:hidden before:block before:absolute before:w-full before:h-full before:bg-white w-5 h-5 cursor-pointer bg-black border border-gray-400 rounded overflow-hidden",children:e.jsx(X,{className:"w-full fill-white"})})]}),e.jsx("td",{className:"px-2 py-3 truncate flex cursor-pointer hover:text-cyan-600 transition",onClick:()=>ue(s.id),children:e.jsxs("div",{className:"flex items-center gap-4",children:[a?e.jsx(P,{className:"w-3 h-3"}):e.jsx(Ae,{className:"w-3 h-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-800  truncate",children:s.name}),s.model&&e.jsxs("p",{className:"text-sm text-gray-500 truncate",children:["Model: ",s.model]})]})]})}),e.jsxs("td",{className:`px-2 py-3 text-center font-medium ${((x=s==null?void 0:s.stock)==null?void 0:x.quantity)===0||((u=s==null?void 0:s.stock)==null?void 0:u.quantity)===null?"text-red-600":((N=s==null?void 0:s.stock)==null?void 0:N.quantity)<5?"text-yellow-600":"text-gray-800"}`,children:[((O=s==null?void 0:s.stock)==null?void 0:O.quantity)??0,e.jsx("span",{className:"text-xs text-gray-500 ms-1",children:"Unit"})]}),e.jsx("td",{className:"px-2 py-3 text-center",children:s.purchase_price_stocklog||"N/A"}),e.jsx("td",{className:"px-2 py-3 text-center",children:s.selling_price||"N/A"}),e.jsx("td",{className:"px-2 py-3 text-left",children:((V=s==null?void 0:s.categories)==null?void 0:V.length)>0?e.jsxs("div",{className:"flex flex-wrap gap-1",children:[s.categories.slice(0,3).map(r=>e.jsx("span",{className:"px-2 py-1 border border-gray-300 rounded text-xs truncate bg-white",children:r.name},r.name)),s.categories.length>3&&e.jsxs("span",{className:"px-2 py-1 border border-gray-300 rounded text-xs bg-gray-100",children:["+",s.categories.length-3]})]}):e.jsx("span",{children:"N/A"})}),e.jsx("td",{className:"px-2 py-3 text-left",children:((q=s==null?void 0:s.brands)==null?void 0:q.length)>0?e.jsxs("div",{className:"flex flex-wrap gap-1",children:[s.brands.slice(0,3).map(r=>e.jsx("span",{className:"px-2 py-1 border border-gray-300 rounded text-xs truncate bg-white",children:r.name},r.name)),s.brands.length>3&&e.jsxs("span",{className:"px-2 py-1 border border-gray-300 rounded text-xs bg-gray-100",children:["+",s.brands.length-3]})]}):e.jsx("span",{children:"N/A"})}),e.jsx("td",{className:"px-2 py-3 w-20",children:e.jsxs("label",{className:"relative cursor-pointer inline-block",children:[e.jsx("input",{type:"checkbox",onClick:()=>i.put(route("product.status",s.id),{},{preserveScroll:!0}),className:"sr-only peer",checked:((Q=s==null?void 0:s.stock)==null?void 0:Q.status)||!1}),e.jsxs("div",{className:`flex items-center w-24 h-10 px-1 rounded-full transition relative 
        ${(W=s==null?void 0:s.stock)!=null&&W.status?"bg-green-100 justify-start":"bg-red-100 justify-end"}`,children:[e.jsx("span",{className:`absolute w-full text-[11px] text-center z-0 font-medium transition duration-200 
          ${(U=s==null?void 0:s.stock)!=null&&U.status?"text-green-700":"text-red-700"}`,children:(G=s==null?void 0:s.stock)!=null&&G.status?"Active":"Inactive"}),e.jsx("div",{className:"w-6 h-6 bg-white border border-gray-300 rounded-full z-10 transition peer-checked:translate-x-full"})]})]})}),e.jsx("td",{className:"px-2 py-3 text-center",children:e.jsxs("div",{className:"flex justify-center items-center gap-2",children:[e.jsx(m,{href:route("product.show",s.code||s.id),title:"View",className:"text-cyan-500 hover:text-cyan-700",children:e.jsx(Ee,{className:"w-4 h-4"})}),e.jsx(m,{href:route("product.edit",s.id),title:"Edit",className:"text-yellow-500 hover:text-yellow-700",children:e.jsx(Re,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>j(s),title:"Delete",className:"text-red-500 hover:text-red-700",children:e.jsx(K,{className:"w-4 h-4"})}),e.jsx(m,{href:route("stock.index",{product_id:s.id}),title:"Stock",className:"text-green-500 hover:text-green-700",children:e.jsx(I,{className:"w-4 h-4"})})]})})]}),a&&e.jsx("tr",{className:"bg-gray-50 text-sm border-t border-gray-200",children:e.jsx("td",{colSpan:"10",className:"px-10 py-4 text-gray-600",children:e.jsx("div",{className:"space-y-4",children:e.jsx("div",{children:ge[s.id]?e.jsx("p",{className:"text-sm text-gray-500 mt-1 animate-pulse",children:"Loading logs..."}):((H=M[s.id])==null?void 0:H.length)>0?e.jsxs("div",{className:"grid grid-cols-5 gap-2 text-sm ms-12 font-medium ",children:[e.jsx("div",{className:"font-semibold text-gray-700 bg-slate-200 p-2 rounded-l-xl",children:"Available"}),e.jsx("div",{className:"font-semibold text-gray-700 bg-slate-200 p-2",children:"Type"}),e.jsx("div",{className:"font-semibold text-gray-700 bg-slate-200 p-2",children:"Supplier Invoice"}),e.jsx("div",{className:"font-semibold text-gray-700 bg-slate-200 p-2",children:"Remarks"}),e.jsx("div",{className:"font-semibold text-gray-700 bg-slate-200 p-2 rounded-r-xl",children:"Date"}),M[s.id].map(r=>e.jsxs("div",{className:"contents",children:[e.jsx("div",{className:"p-1 text-gray-800",children:(r==null?void 0:r.quantity)||"-"}),e.jsx("div",{className:"p-1 text-gray-800",children:(r==null?void 0:r.type)||"-"}),e.jsx("div",{className:"p-1 text-gray-800",children:(r==null?void 0:r.supplier_invoice_no)+`(${r==null?void 0:r.supplier_name})`||"-"}),e.jsx("div",{className:"p-1 text-gray-800",children:(r==null?void 0:r.remarks)||"-"}),e.jsx("div",{className:"p-1 text-gray-800",children:new Date(r==null?void 0:r.created_at).toLocaleString()})]},r.id))]}):e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"No stock logs available."})})})})})]},s.id)})]})]})}),e.jsxs("div",{class:"grid px-4 py-3 text-xs font-semibold tracking-wide text-gray-500 uppercase border-t dark:border-gray-700 bg-gray-50 sm:grid-cols-9    ",children:[e.jsxs("span",{class:"flex items-center col-span-3",children:[" Showing ",n.from," - ",n.to," of ",n.total," "]}),e.jsx("span",{class:"col-span-2"}),e.jsx("span",{class:"flex col-span-4 mt-2 sm:mt-auto sm:justify-end",children:e.jsx("nav",{"aria-label":"Table navigation",children:e.jsxs("ul",{class:"inline-flex items-center",children:[e.jsx("li",{children:e.jsx("button",{onClick:()=>n.links[0].url?i.get(n.links[0].url,{status:t.get("status")||"",search:t.get("search")||"",category:t.get("category")||"",brand:t.get("brand")||"",startdate:t.get("startdate")||"",enddate:t.get("enddate")||"",supplierinvoiceno:t.get("supplierinvoiceno")||"",invoicecode:t.get("invoicecode")||""}):null,class:"px-3 py-1 rounded-md rounded-l-lg focus:outline-none focus:shadow-outline-purple","aria-label":"Previous",children:e.jsx("svg",{"aria-hidden":"true",class:"w-4 h-4 fill-current",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z","clip-rule":"evenodd","fill-rule":"evenodd"})})})}),(()=>{let s=-1;const a=n.links.findIndex(l=>l.active);return n.links.slice(1,-1).filter((l,c,h)=>{const x=parseInt(l.label,10);if(isNaN(x))return!0;const u=Math.max(0,a-2),N=Math.min(h.length-1,a+2);return c<3||c>h.length-4||c>=u&&c<=N}).map((l,c,h)=>{const x=parseInt(l.label,10),u=!isNaN(x)&&s!==-1&&x-s>1;return isNaN(x)||(s=x),e.jsx("li",{children:u?e.jsx("span",{className:"px-3 py-1",children:"..."}):l.active?e.jsx("button",{className:"px-3 py-1 text-white dark:text-gray-800 transition-colors duration-150 bg-black dark:bg-gray-100 border border-r-0 border-black dark:border-gray-100 rounded-md focus:outline-none focus:shadow-outline-purple","aria-current":"page",children:l.label}):e.jsx("button",{onClick:()=>l.url&&window.location.assign(l.url+`&status=${t.get("status")||""}&search=${t.get("search")||""}&category=${t.get("category")||""}&brand=${t.get("brand")||""}&startdate=${t.get("startdate")||""}&enddate=${t.get("enddate")||""}&supplierinvoiceno=${t.get("supplierinvoiceno")||""}&invoicecode=${t.get("invoicecode")||""}`),className:"px-3 py-1 rounded-md focus:outline-none focus:shadow-outline-purple",children:l.label})},c)})})(),e.jsx("li",{children:e.jsx("button",{onClick:()=>n.links[n.links.length-1].url&&window.location.assign(n.links[n.links.length-1].url+`&status=${t.get("status")||""}&search=${t.get("search")||""}&category=${t.get("category")||""}&brand=${t.get("brand")||""}&startdate=${t.get("startdate")||""}&enddate=${t.get("enddate")||""}&supplierinvoiceno=${t.get("supplierinvoiceno")||""}&invoicecode=${t.get("invoicecode")||""}`),class:"px-3 py-1 rounded-md rounded-r-lg focus:outline-none focus:shadow-outline-purple","aria-label":"Next",children:e.jsx("svg",{class:"w-4 h-4 fill-current","aria-hidden":"true",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd","fill-rule":"evenodd"})})})})]})})})]})]})}),e.jsx(A,{show:xe,onClose:()=>F(!1),maxWidth:"2xl",className:"rounded-xl shadow-2xl",children:e.jsxs("div",{className:"relative p-6 bg-white rounded-xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Import Products via CSV"}),e.jsx("button",{onClick:()=>F(!1),className:"text-gray-400 hover:text-gray-600 transition-colors","aria-label":"Close modal",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-3",children:"How to Import"}),e.jsxs("ul",{className:"space-y-3 text-gray-600 text-sm",children:[e.jsxs("li",{className:"flex items-start",children:["Get the CSV template and complete the necessary fields.",e.jsx("a",{href:"/productexample.csv",className:"inline-flex items-center text-cyan-600 hover:text-cyan-800 transition-colors duration-200 underline ml-1",download:"productexample.csv",children:"Download now"})]}),e.jsxs("li",{className:"flex items-start",children:["Use ",e.jsx("code",{className:"bg-gray-100 px-1 rounded",children:'"warranty_type"'}),': "none", "years", "months", or "days".']}),e.jsxs("li",{className:"flex items-start",children:["Use ",e.jsx("code",{className:"bg-gray-100 px-1 rounded",children:'"identity_type"'}),': "none", "sku", "serial", or "imei".']}),e.jsx("li",{className:"flex items-start",children:"Upload the completed CSV file."}),e.jsx("li",{className:"flex items-start",children:'Click "Import" to process your file.'})]})]}),e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"csv-upload",type:"file",accept:".csv",onChange:me,className:"hidden"}),e.jsxs("label",{htmlFor:"csv-upload",className:"cursor-pointer inline-flex items-center px-4 py-2 bg-green-600 text-white text-sm font-medium rounded-lg hover:bg-green-700 transition-colors duration-200",children:[e.jsx(Oe,{className:"mr-2 h-5 w-5"}),"Import CSV File"]})]})})]})}),e.jsx(J,{isOpen:L!==null,onClose:()=>j(null),title:"Are you sure you want to delete?",onConfirm:()=>{i.delete(route("product.destroy",L.id),{preserveScroll:!0,preserveState:!0}),j(null)}}),e.jsx(J,{isOpen:ce,onClose:()=>C(!1),title:"Are you sure you want to delete these products?",onConfirm:()=>{i.post(route("product.bulkdestroy"),{ids:g.join(",")},{onSuccess:()=>{C(!1),f([])}})}}),e.jsxs(A,{show:oe,onClose:()=>B(!1),maxWidth:"6xl",children:[e.jsx("div",{className:"my-4 text-center hide-print",children:e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Products QR Codes"})}),e.jsxs("div",{children:[e.jsx("div",{id:"printable-content",className:"grid grid-cols-4 gap-4 max-h-[70vh] overflow-auto p-4",children:n.data.filter(s=>g.includes(s.id)).map((s,a)=>e.jsxs("div",{className:"flex flex-col border border-gray-300 items-center justify-center p-4 break-inside-avoid",children:[e.jsx(Le,{value:s.code||s.id,size:150,logoOpacity:.8}),e.jsx("div",{className:"mt-2",children:s.code||s.id})]},a))}),e.jsxs("div",{className:"mt-4 text-center",children:[e.jsx("button",{onClick:()=>window.print(),className:"ml-2 bg-black text-white py-2 px-4 mb-4 rounded shadow hover:bg-gray-600 transition duration-300",children:"Print"}),e.jsx("button",{onClick:()=>B(!1),className:"ml-2 bg-red-500 text-white py-2 px-4 mb-4 rounded shadow hover:bg-red-600 transition duration-300",children:"Close"})]})]}),e.jsx("style",{jsx:!0,global:!0,children:`
            @media print {
              body {
                font-size: 12px;
              }

              #printable-content {
                display: grid;
                grid-template-columns: repeat(2, 1fr); /* 2 columns per row */
                gap: 20px;
                padding: 20px;
              }

              #printable-content > div {
                width: 50%;
                page-break-inside: avoid;
                text-align: center;
              }

              .hide-print {
                display: none;
              }

              .break-inside-avoid {
                page-break-inside: avoid; /* Prevents breaking items across pages */
              }

              button {
                display: none; /* Hides buttons during printing */
              }

              @page {
                size: A4; /* Ensures proper page size */
                margin: 20mm; /* Adjust the print margin */
              }
            }
          `})]}),e.jsxs(Te,{id:"context-menu",children:[e.jsx(k,{onClick:({props:s})=>v({props:s,action:"view"}),children:"View"}),e.jsx(k,{onClick:({props:s})=>v({props:s,action:"edit"}),children:"Edit"}),e.jsx(k,{onClick:({props:s})=>v({props:s,action:"stock"}),hidden:({props:s})=>s.identity_type==="imei",children:"Stock"}),e.jsx(k,{onClick:({props:s})=>v({props:s,action:"delete"}),className:"text-red-600",children:"Delete"})]}),e.jsx(A,{show:de,onClose:()=>S(!1),maxWidth:"2xl",children:e.jsxs("div",{className:"overflow-y-auto max-h-[80vh]",children:[e.jsx("div",{className:"flex justify-center p-10",children:e.jsx("div",{className:"text-2xl font-medium text-[#5d596c] ",children:"Date Range"})}),e.jsx("div",{className:"px-10 flex justify-center mb-5",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ze.DateRangePicker,{ranges:[$],onChange:s=>{he(s.selection)},className:"w-96"}),e.jsxs("div",{className:"flex justify-center gap-4 mt-5",children:[e.jsx("button",{type:"button",onClick:()=>{S(!1)},className:"text-gray-500 bg-[#eaebec] hover:bg-[#eaebec] focus:ring-4 focus:ring-[#eaebec] font-medium rounded-lg text-sm px-5 py-2.5 me-2 mb-2",children:"Close"}),e.jsx("button",{type:"button",onClick:()=>{i.get(route("product.index",{startdate:$.startDate,enddate:$.endDate,status:t.get("status")||"",search:t.get("search")||"",category:t.get("category")||"",brand:t.get("brand")||"",supplierinvoiceno:t.get("supplierinvoiceno")||"",invoicecode:t.get("invoicecode")||""}))},className:"text-white bg-black hover:bg-gray-800 focus:ring-4 focus:ring-gray-800  font-medium rounded-lg text-sm px-5 py-2.5 me-2 mb-2",children:"Filter"})]})]})})]})})]})}export{ls as default};
