import{r as p,q as I,j as e,Y as M,y as l,a as j}from"./app-c7xgBnYQ.js";import{F as E,a as O,b as B}from"./formik.esm-Dpdj83PY.js";import{A as V,g as z,c as $,d as R,k as y,D as r,e as Y,C as w,f as N}from"./AuthenticatedLayout-CKCK-buT.js";import{B as q}from"./index-BK9C8hWo.js";import{B as G}from"./ReactToastify-COOy9XdQ.js";import{P as K}from"./index-BZlZFJf2.js";import{V as U}from"./index-C-4uwqwT.js";import{F as X}from"./ReactContexify.min-IYReD5QZ.js";import{T as H}from"./TabSwitcher-Drh-cH7Q.js";import{C as f}from"./Cards-BO6A45eq.js";import"./transition-CKbScKOG.js";import"./Modal-Cv9-q5Gw.js";import"./proxy-B6qjvtLx.js";function de(v){const{auth:k,suppliers:t,totalPendingAmount:C,totalPaidAmount:S,totalSuppliers:_,status:u,search:m}=v,[b,h]=p.useState(null),[F,g]=p.useState(!1),[n,d]=p.useState([]),{url:A}=I(),o=new URLSearchParams(A.split("?")[1]),[i,L]=p.useState("cards"),{show:D}=X({id:"context-menu"});return e.jsxs(V,{Product:k.Product,header:e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsxs(r,{children:[e.jsx(r.Trigger,{children:e.jsxs("button",{className:"inline-flex items-center gap-2 rounded-lg bg-cyan-700 px-4 py-2 text-sm font-medium text-white transition hover:bg-cyan-800 focus:outline-none focus:ring-4 focus:ring-cyan-300",children:["File",e.jsx(N,{className:"h-3 w-3"})]})}),e.jsx(r.Content,{className:"mt-2 w-48 rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none",children:e.jsx("a",{href:route("supplier.csvexport"),download:!0,className:"block w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Export Excel (.csv)"})})]}),e.jsxs(r,{children:[e.jsx(r.Trigger,{children:e.jsxs("button",{className:"inline-flex items-center gap-2 rounded-lg bg-cyan-700 px-4 py-2 text-sm font-medium text-white transition hover:bg-cyan-800 focus:outline-none focus:ring-4 focus:ring-cyan-300",children:["Add new",e.jsx(N,{className:"h-3 w-3"})]})}),e.jsx(r.Content,{className:"mt-2 w-48 rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none",children:e.jsx(j,{href:route("supplier.create"),className:"block w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Supplier"})})]})]})}),children:[e.jsx(M,{title:"Supplier"}),e.jsxs("div",{className:"mt-4 mx-4 p-4 bg-white shadow-sm rounded-2xl",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-baseline sm:justify-between gap-2",children:[e.jsx(H,{activeTab:i,setActiveTab:L}),i==="cards"&&e.jsxs("select",{className:"px-4 py-2 w-full sm:w-56 rounded-lg text-sm border border-gray-300 bg-white shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition",children:[e.jsx("option",{value:"7",children:"Last 7 Days"}),e.jsx("option",{value:"15",children:"Last 15 Days"}),e.jsx("option",{value:"30",children:"Last 1 Month"}),e.jsx("option",{value:"180",children:"Last 6 Months"}),e.jsx("option",{value:"365",children:"Last 1 Year"})]})]}),i==="cards"&&e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 xl:grid-cols-5 gap-4 mt-4",children:[e.jsx(f,{title:"Total Suppliers",value:_,icon:e.jsx(U,{size:36}),link:route("supplier.index")}),e.jsx(f,{title:"Pending Amount",value:e.jsx("span",{children:C}),icon:e.jsx(z,{size:36}),link:route("supplier.index",{status:"pending"})}),e.jsx(f,{title:"Completed Amount",value:e.jsx("span",{children:S}),icon:e.jsx(K,{size:36}),link:route("supplier.index",{status:"paid"})})]}),i==="filters"&&e.jsxs("div",{className:"mt-4 p-4 bg-white border border-gray-200 rounded-2xl shadow",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Filter Options"}),e.jsxs("select",{name:"filter",className:`bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg 
                  w-full md:w-[150px] p-2.5 pr-10  
                  focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500`,onChange:s=>l.get(route("supplier.index"),{status:s.target.value},{preserveState:!0}),value:u,children:[e.jsx("option",{value:"",children:"Select Status"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"paid",children:"Paid"})]})]})]}),e.jsx("div",{className:"flex flex-col px-4 mt-4 mx-auto w-full",children:e.jsxs("div",{className:"w-full ",children:[e.jsx("div",{className:"flex flex-col md:flex-row justify-end items-center mt-2 mb-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row w-full md:justify-end space-y-2 md:space-y-0 md:space-x-2",children:[e.jsx(E,{enableReinitialize:!0,initialValues:{search:""},onSubmit:s=>{l.get(route("supplier.index"),{search:s.search},{preserveState:!0})},children:({values:s,setFieldValue:a,handleSubmit:c})=>e.jsx(O,{className:"w-full flex items-center gap-3",children:e.jsx("div",{className:"relative w-full md:max-w-md",children:e.jsx(B,{name:"search",children:({field:x,form:P})=>e.jsxs("div",{className:"relative",children:[e.jsx("input",{...x,type:"text",placeholder:"Search suppliers...",className:"w-full pl-10 pr-10 py-2 rounded-xl border border-gray-300 focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 focus:outline-none transition-all duration-300 bg-white shadow-sm hover:shadow-md placeholder-gray-400 text-gray-800",onKeyDown:T=>{T.key==="Enter"&&c()}}),e.jsx("button",{type:"submit",className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-cyan-500 focus:outline-none transition-colors","aria-label":"Search",children:e.jsx($,{className:"w-4 h-4"})}),x.value&&e.jsx("button",{type:"button",onClick:()=>{P.setFieldValue("search",""),l.get(route("supplier.index"))},className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-red-500 focus:outline-none transition-colors","aria-label":"Clear search",children:e.jsx(R,{className:"w-4 h-4"})})]})})})})}),n.length>0&&e.jsx("button",{onClick:()=>g(!0),className:"text-white  w-full md:w-64 lg:w-48  py-2 px-4 bg-red-500 rounded-lg hover:bg-red-600 ",children:"Bulk Delete"})]})}),e.jsxs("div",{className:"overflow-x-auto rounded-xl border border-gray-200 shadow-sm",children:[e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 bg-white",children:[e.jsx("thead",{className:"whitespace-nowrap text-xs uppercase bg-gray-200 text-gray-700 tracking-wide border-b",children:e.jsxs("tr",{children:[e.jsxs("th",{className:"px-4 py-3 w-8",children:[e.jsx("input",{id:"checkbox",type:"checkbox",className:"hidden peer",onChange:s=>d(s.target.checked?t.data.map(a=>a.id):[]),checked:n.length===t.data.length}),e.jsx("label",{htmlFor:"checkbox",className:"relative flex items-center justify-center p-0.5 peer-checked:before:hidden before:block before:absolute before:w-full before:h-full before:bg-white w-5 h-5 cursor-pointer bg-black border border-gray-400 rounded overflow-hidden",children:e.jsx(y,{className:"w-full fill-white"})})]}),e.jsx("th",{className:"px-4 py-3 text-left ",children:"Supplier Info"}),e.jsx("th",{className:"px-4 py-3 text-left",children:"Contact"}),e.jsx("th",{className:"px-4 py-3 text-left",children:"Address"}),e.jsx("th",{className:"px-4 py-3 text-left",children:"Code"}),e.jsx("th",{className:"px-4 py-3 ",children:"Total Invoices"}),e.jsx("th",{className:"px-4 py-3 ",children:"Total Amount"}),e.jsx("th",{className:"px-4 py-3 ",children:"Amount Paid"}),e.jsx("th",{className:"px-4 py-3 ",children:"Amount Pending"}),e.jsx("th",{className:"px-4 py-3 ",children:"Action"})]})}),e.jsxs("tbody",{className:"divide-y divide-gray-100",children:[t.data.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"10",className:"px-4 py-1 text-center text-gray-500",children:"No Supplier found."})}),t.data.map(s=>e.jsxs("tr",{onContextMenu:a=>{a.preventDefault(),D({event:a,props:s})},className:`${(s==null?void 0:s.total_amount_paid)===0&&(s==null?void 0:s.total_amount)>0?"bg-red-50":(s==null?void 0:s.total_amount_paid)>0&&(s==null?void 0:s.total_amount_pending)>0?"bg-yellow-50":""} ${n.includes(s.id)?"border-l-4 border-black":""}`,children:[e.jsxs("td",{className:"px-4 py-1 w-8",children:[e.jsx("input",{id:`checkbox-${s.id}`,type:"checkbox",className:"hidden peer",value:s.id,onChange:a=>{a.target.checked?d(c=>[...c,s.id]):d(c=>c.filter(x=>x!==s.id))},checked:n.includes(s.id)}),e.jsx("label",{htmlFor:`checkbox-${s.id}`,className:"relative flex items-center justify-center w-5 h-5 bg-black border border-gray-400 rounded cursor-pointer p-0.5 peer-checked:before:hidden before:block before:absolute before:w-full before:h-full before:bg-white",children:e.jsx(y,{className:"w-full fill-white"})})]}),e.jsx("td",{className:"px-4 py-1 text-gray-800",children:e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium",children:["Person: ",s.person_name]}),s.email&&e.jsxs("p",{className:"text-xs text-gray-500",children:["Email: ",s.email]})]})}),e.jsx("td",{className:"px-4 py-1 text-gray-700",children:(s==null?void 0:s.contact)||"N/A"}),e.jsx("td",{className:"px-4 py-1 text-gray-700",children:(s==null?void 0:s.address)||"N/A"}),e.jsxs("td",{className:"px-4 py-3.5 flex items-center text-blue-600",children:[e.jsx(j,{href:route("product.index",{invoicecode:s.code}),className:"hover:underline ",children:(s==null?void 0:s.code)||"N/A"}),e.jsx(q,{size:18,onClick:()=>{navigator.clipboard.writeText(s.code),G.success("Copied!")},className:"ml-2 text-gray-500 cursor-pointer hover:text-black"})]}),e.jsx("td",{className:"px-4 py-1 text-gray-700 text-center",children:(s==null?void 0:s.total_supplierinvoices)||0}),e.jsx("td",{className:"px-4 py-1 text-gray-700 text-center",children:(s==null?void 0:s.total_amount)||0}),e.jsx("td",{className:"px-4 py-1 text-gray-700 text-center",children:(s==null?void 0:s.total_amount_paid)||0}),e.jsx("td",{className:"px-4 py-1 text-gray-700 text-center",children:(s==null?void 0:s.total_amount_pending)||0}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsxs(r,{children:[e.jsx(r.Trigger,{children:e.jsx("button",{className:"text-gray-500 hover:text-black focus:outline-none",children:e.jsx(Y,{className:"w-5 h-5"})})}),e.jsxs(r.Content,{children:[e.jsx(r.Link,{href:route("supplier.invoices",s.id),children:"Invoice"}),e.jsx(r.Link,{href:route("ledger.supplier.supplierLedger",s.code||s.id),children:"Ledger"}),e.jsx(r.Link,{href:route("supplier.edit",s.id),children:"Edit"}),e.jsx("button",{type:"button",onClick:()=>h(s),className:"block w-full px-4 py-2 text-start text-sm text-red-600 hover:bg-gray-100",children:"Delete"})]})]})})]},s.id))]})]}),e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 text-xs text-gray-500 bg-gray-50 border-t",children:[e.jsxs("span",{children:["Showing ",t.from," - ",t.to," of ",t.total]}),e.jsxs("div",{className:"space-x-2",children:[t.to<t.total&&e.jsx("button",{onClick:()=>l.get(route("supplier.index"),{status:u||"",search:m||"",per_page:o.get("per_page")?parseInt(o.get("per_page"))+10:20}),className:"px-3 py-1 bg-white border rounded shadow hover:bg-gray-100",children:"Load More"}),o.get("per_page")&&parseInt(o.get("per_page"))>10&&e.jsx("button",{onClick:()=>l.get(route("supplier.index"),{status:u||"",search:m||"",per_page:Math.max(10,parseInt(o.get("per_page"))-10)}),className:"px-3 py-1 bg-white border rounded shadow hover:bg-gray-100",children:"Load Less"})]})]})]})]})}),e.jsx(w,{isOpen:b!==null,onClose:()=>h(null),title:"Are you sure you want to delete?",onConfirm:()=>{l.delete(route("supplier.destroy",b.id),{preserveScroll:!0,preserveState:!0}),h(null)}}),e.jsx(w,{isOpen:F,onClose:()=>g(!1),title:"Are you sure you want to delete these supplier?",onConfirm:()=>{l.post(route("supplier.bulkdestroy"),{ids:n.join(",")},{onSuccess:()=>{g(!1),d([])}})}})]})}export{de as default};
