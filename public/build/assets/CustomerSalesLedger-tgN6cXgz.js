import{q as k,r as m,j as e,Y as F,y as h}from"./app-CLcatgRV.js";import{A as L}from"./AuthenticatedLayout-bYXar71n.js";import{M as P}from"./Modal-CT4dXzUw.js";import"./transition-BxL1qNdp.js";import"./ReactToastify-PvqQfwSs.js";import"./proxy-0lPKxKNC.js";function E(p){const{auth:b,customer:l,orders:o,openingBalance:g,runningBalance:i,totalPayable:j,totalPaid:y,totalPending:u,totalAdjustments:N,filters:r}=p,f=k().props.setting,[s,c]=m.useState((r==null?void 0:r.start_date)||""),[a,x]=m.useState((r==null?void 0:r.end_date)||""),w=()=>{const t=new URLSearchParams;s&&t.append("start_date",s),a&&t.append("end_date",a);const n=t.toString(),d=n?`${window.location.pathname}?${n}`:window.location.pathname;h.visit(d)},v=()=>{c(""),x(""),h.visit(window.location.pathname)},D=()=>s&&a?`Period: ${new Date(s).toLocaleDateString()} to ${new Date(a).toLocaleDateString()}`:s?`From: ${new Date(s).toLocaleDateString()}`:a?`Until: ${new Date(a).toLocaleDateString()}`:"All Time";return e.jsxs(L,{user:b.user,header:e.jsx("div",{className:"flex items-center justify-between py-2",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(P,{size:20,className:"cursor-pointer text-gray-600 hover:text-gray-800",onClick:()=>window.history.back(),title:"Back"}),e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Customer Sales Ledger"})]})}),children:[e.jsx(F,{title:"Customer Sales Ledger"}),e.jsx("style",{children:`
                    @media print {
                        .no-print {
                            display: none;
                        }
                        .print-gap {
                            margin-top: 100px;
                        }
                        nav,
                        aside,
                        .fixed,
                        .toastify-container,
                        .ConfirmModal {
                            display: none !important;
                        }
                        .sm\\:ml-64 {
                            margin-left: 0 !important;
                        }
                        .print-w-full {
                            width: 100%;
                        }
                        .print-gap {
                            margin-top: 100px;
                        }
                        .page-break {
                            page-break-before: always;
                        }
                    }
                `}),e.jsxs("div",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6 no-print",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Filter by Date Range"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 items-end",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Date"}),e.jsx("input",{type:"date",value:s,onChange:t=>c(t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-black"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Date"}),e.jsx("input",{type:"date",value:a,onChange:t=>x(t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-black"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:w,className:"bg-black text-white px-4 py-2 rounded hover:bg-black transition duration-300",children:"Apply Filter"}),e.jsx("button",{onClick:v,className:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600 transition duration-300",children:"Clear"})]})]})]}),e.jsxs("div",{className:"flex justify-end mb-4 no-print",children:[e.jsx("button",{onClick:()=>window.history.back(),className:"bg-red-500 text-white py-2 px-4 rounded shadow hover:bg-red-600 transition duration-300",children:"Close"}),e.jsx("button",{onClick:()=>window.print(),className:"ml-2 bg-black text-white py-2 px-4 rounded shadow hover:bg-gray-600 transition duration-300",children:"Print PDF"})]}),e.jsxs("div",{className:"max-w-10xl mx-auto p-6 bg-white rounded shadow-sm my-6",id:"invoice",children:[e.jsxs("div",{className:"grid grid-cols-2 items-center",children:[e.jsx("div",{children:e.jsx("img",{src:f.site_logo||"/images/logo2.png",alt:"Company Logo",className:"h-16"})}),e.jsxs("div",{className:"text-right",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Customer Sales Ledger"}),e.jsxs("p",{className:"text-gray-500",children:["Generated on: ",new Date().toLocaleDateString()]}),e.jsx("p",{className:"text-gray-500",children:D()})]})]}),e.jsxs("div",{className:"mt-8",children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:"Customer Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Name:"})," ",l.name||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Email:"})," ",l.email||"N/A"]})]}),e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Phone:"})," ",l.phone||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Address:"})," ",l.address||"N/A"]})]})]})]}),e.jsxs("div",{className:"mt-8",children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:"Opening Balance"}),e.jsxs("p",{children:["Rs. ",g.toFixed(2)]})]}),e.jsxs("div",{className:"mt-8",children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:"Transactions"}),o.length>0?e.jsxs("table",{className:"min-w-full bg-white border border-gray-300",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{className:"py-2 px-4 border-b text-left",children:"Date"}),e.jsx("th",{className:"py-2 px-4 border-b text-left",children:"Particulars"}),e.jsx("th",{className:"py-2 px-4 border-b text-left",children:"Folio"}),e.jsx("th",{className:"py-2 px-4 border-b text-left",children:"Debit (Dr)"}),e.jsx("th",{className:"py-2 px-4 border-b text-left",children:"Credit (Cr)"}),e.jsx("th",{className:"py-2 px-4 border-b text-left",children:"Dr or Cr"}),e.jsx("th",{className:"py-2 px-4 border-b text-left",children:"Balance"})]})}),e.jsx("tbody",{children:o.map((t,n)=>{const d=Number(t.payable_amount)||0,C=Number(t.paid_amount)||0,S=i>=0?"Dr":"Cr";return e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsx("td",{className:"py-2 px-4",children:t.order_date||"N/A"}),e.jsx("td",{className:"py-2 px-4",children:`Order #${t.code||t.id}`}),e.jsx("td",{className:"py-2 px-4",children:t.code||"N/A"}),e.jsxs("td",{className:"py-2 px-4",children:["Rs. ",d.toFixed(2)]}),e.jsxs("td",{className:"py-2 px-4",children:["Rs. ",C.toFixed(2)]}),e.jsx("td",{className:"py-2 px-4",children:S}),e.jsxs("td",{className:"py-2 px-4",children:["Rs. ",Math.abs(i).toFixed(2)]})]},n)})})]}):e.jsx("div",{className:"text-center py-8 text-gray-500",children:e.jsx("p",{children:"No transactions found for the selected date range."})})]}),e.jsxs("div",{className:"mt-8",children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:"Summary"}),e.jsx("table",{className:"min-w-full bg-white border border-gray-300",children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("th",{className:"py-2 px-4 border-b text-left",children:"Total Payable"}),e.jsxs("td",{className:"py-2 px-4 border-b text-right",children:["Rs. ",j.toFixed(2)]})]}),e.jsxs("tr",{children:[e.jsx("th",{className:"py-2 px-4 border-b text-left",children:"Total Paid"}),e.jsxs("td",{className:"py-2 px-4 border-b text-right",children:["Rs. ",y.toFixed(2)]})]}),e.jsxs("tr",{children:[e.jsx("th",{className:"py-2 px-4 border-b text-left",children:"Total Pending"}),e.jsxs("td",{className:"py-2 px-4 border-b text-right",children:["Rs. ",u.toFixed(2)]})]}),e.jsxs("tr",{children:[e.jsx("th",{className:"py-2 px-4 border-b text-left",children:"Total Adjustments"}),e.jsxs("td",{className:"py-2 px-4 border-b text-right",children:["Rs. ",N.toFixed(2)]})]}),e.jsxs("tr",{children:[e.jsx("th",{className:"py-2 px-4 border-b text-left",children:"Closing Balance"}),e.jsxs("td",{className:"py-2 px-4 border-b text-right",children:["Rs. ",i.toFixed(2)]})]})]})})]}),e.jsxs("div",{className:"border-t-2 pt-4 text-xs text-gray-500 text-center mt-16",children:["Developed by ",e.jsx("strong",{children:"Solinvo"}),e.jsx("span",{className:"mx-1",children:"â€¢"}),e.jsx("a",{href:"https://solinvo.com",target:"_blank",className:"hover:underline",children:"Powered by Vertexinvo"}),e.jsx("br",{}),e.jsx("br",{}),e.jsxs("p",{className:"text-xs text-gray-500",children:[e.jsx("strong",{children:"Printed on:"})," ",new Date().toLocaleDateString()," ",new Date().toLocaleTimeString()]})]})]})]})]})}export{E as default};
