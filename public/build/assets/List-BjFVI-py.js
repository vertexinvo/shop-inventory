import{q as he,r as c,j as e,Y as me,a as m,y as i}from"./app-ets2gMto.js";import{F as ue,a as ge,b as pe}from"./formik.esm-BwP16GUs.js";import{A as je,l as D,d as ye,m as be,G as fe,p as ve,q as Ne,r as we,s as T,t as ke,u as Ce,D as d,v as P,w as Q,x as Se,y as Fe,o as Me,C as W,Q as De,M as Pe,z as Ie}from"./AuthenticatedLayout-DAt8CKz9.js";import{M as I}from"./Modal-DFejbVHZ.js";import{d as $e}from"./index-Cg6B7Jee.js";import{F as Ae,i as Re,p as N}from"./ReactContexify.min-C1iJ_lGl.js";import{b as Ee}from"./index-D9Isq03h.js";import"./transition-CPcCuN2H.js";import"./ReactToastify-DYYtQUq5.js";import"./index-BKNjMPK8.js";function Ze(U){const{auth:G,stock:Be,startdate:j,enddate:y,products:n,totalstock:H,totalstockavailable:K,totalstocknotavailable:X,totalStockValue:Y,totaliteminstock:J,categories:Z,brands:ee}=U,{url:se}=he(),t=new URLSearchParams(se.split("?")[1]),[$,A]=c.useState([]),[R,b]=c.useState(null),[te,w]=c.useState(!1),[u,p]=c.useState([]),[ae,E]=c.useState(!1),[re,k]=c.useState(!1),[le,C]=c.useState(!1),[S,ne]=c.useState({startDate:new Date,endDate:new Date,key:"selection"}),[Le,ze]=c.useState(!1),[Oe,Ve]=c.useState({brand:"",category:"",status:""}),ie=s=>{const a=s.target.files[0];a&&(a.type==="text/csv"||a.name.endsWith(".csv")||a.name.endsWith(".xlsx")||a.name.endsWith(".xls")?i.post(route("product.csvstore"),{file:a}):console.error("Please select a CSV file."))},[F,B]=c.useState({}),[oe,L]=c.useState({}),ce=async s=>{if($.includes(s))A(a=>a.filter(r=>r!==s));else if(A(a=>[...a,s]),!F[s]){L(a=>({...a,[s]:!0}));try{const a=await axios.get(`/dashboard/product/${s}/stock-logs`);B(r=>{var o;return{...r,[s]:((o=a.data.stocklogs)==null?void 0:o.data)||[]}})}catch(a){console.error("Error fetching stock logs:",a),B(r=>({...r,[s]:[]}))}finally{L(a=>({...a,[s]:!1}))}}},{show:de}=Ae({id:"context-menu"}),f=({props:s,action:a})=>{const r=s;a==="view"?i.get(route("product.show",r.id)):a==="edit"?i.get(route("product.edit",r.id)):a==="delete"?b(r):a==="stock"&&i.get(route("stock.index",{product_id:r.id}))},[qe,_e]=c.useState(!1);return e.jsxs(je,{Product:G.Product,header:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Pe,{size:20,className:"cursor-pointer text-gray-600 hover:text-gray-800",onClick:()=>i.get(route("dashboard")),title:"Back"}),e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Purchases"})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsxs(m,{href:route("product.create"),className:"flex items-center justify-center gap-2 rounded-lg bg-cyan-700 px-4 py-2 text-sm font-medium text-white transition hover:bg-cyan-800 focus:outline-none w-full focus:ring-4 focus:ring-cyan-300 md:w-64 lg:w-32",children:[e.jsx(Ie,{className:"h-3 w-3"}),"Create"]}),e.jsxs(d,{children:[e.jsx(d.Trigger,{children:e.jsxs("button",{className:"inline-flex items-center gap-2 rounded-lg bg-cyan-700 px-4 py-2 text-sm font-medium text-white transition hover:bg-cyan-800 focus:outline-none focus:ring-4 focus:ring-cyan-300",children:["File",e.jsx(Q,{className:"h-3 w-3"})]})}),e.jsxs(d.Content,{className:"mt-2 w-48 rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none",children:[e.jsx("a",{href:route("product.csvexport"),download:!0,className:"block w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Export Excel (.csv)"}),e.jsx("button",{onClick:()=>C(!0),className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Import Excel (.csv)"})]})]})]})]}),children:[e.jsx(me,{title:"Purchase"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 xl:grid-cols-5 gap-4 p-4",children:[e.jsx(m,{href:route("product.index"),children:e.jsxs("div",{className:"bg-white border border-gray-200 rounded-2xl shadow p-4 flex justify-between items-center hover:shadow-md transition",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm font-medium",children:"Total Products"}),e.jsx("p",{className:"text-xl font-bold",children:H})]}),e.jsx(D,{size:36,className:"text-blue-500"})]})}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-2xl shadow p-4 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm font-medium",children:"Stock keeping unit"}),e.jsx("p",{className:"text-xl font-bold",children:J})]}),e.jsx(D,{size:36,className:"text-green-500"})]}),e.jsx(m,{href:route("product.index",{status:0}),children:e.jsxs("div",{className:"bg-white border border-gray-200 rounded-2xl shadow p-4 flex justify-between items-center hover:shadow-md transition",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm font-medium",children:"Out of Stock"}),e.jsx("p",{className:"text-xl font-bold",children:X})]}),e.jsx(ye,{size:36,className:"text-red-500"})]})}),e.jsx(m,{href:route("product.index",{status:1}),children:e.jsxs("div",{className:"bg-white border border-gray-200 rounded-2xl shadow p-4 flex justify-between items-center hover:shadow-md transition",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm font-medium",children:"In Stock"}),e.jsx("p",{className:"text-xl font-bold",children:K})]}),e.jsx(be,{size:36,className:"text-green-600"})]})}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-2xl shadow p-4 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm font-medium",children:"Total Stock Value"}),e.jsx("p",{className:"text-xl font-bold text-emerald-600",children:Y})]}),e.jsx(fe,{size:36,className:"text-yellow-500"})]})]}),e.jsx("div",{className:"flex flex-col px-4 mx-auto w-full",children:e.jsx("div",{className:"w-full ",children:e.jsxs("div",{className:"p-6 bg-gray-50 rounded-2xl shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between gap-4 mb-6",children:[e.jsx(ue,{enableReinitialize:!0,initialValues:{search:t.get("search")||""},onSubmit:s=>{i.get(route("product.index"),{search:s.search,status:t.get("status"),brand:t.get("brand"),category:t.get("category"),startdate:j,enddate:y,supplierinvoiceno:t.get("supplierinvoiceno"),invoicecode:t.get("invoicecode")},{preserveState:!0,preserveScroll:!0})},children:({values:s,setFieldValue:a,handleSubmit:r})=>e.jsx(ge,{className:"w-full flex items-center gap-3",children:e.jsx("div",{className:"relative w-full md:max-w-md",children:e.jsx(pe,{name:"search",children:({field:o,form:h})=>e.jsxs("div",{className:"relative",children:[e.jsx("input",{...o,type:"text",placeholder:"Search products...",className:"w-full pl-10 pr-10 py-2 rounded-xl border border-gray-300 focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 focus:outline-none transition-all duration-300 bg-white shadow-sm hover:shadow-md placeholder-gray-400 text-gray-800",onKeyDown:x=>{x.key==="Enter"&&r()}}),e.jsx("button",{type:"submit",className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-cyan-500 focus:outline-none transition-colors","aria-label":"Search",children:e.jsx(ve,{className:"w-4 h-4"})}),o.value&&e.jsx("button",{type:"button",onClick:()=>{h.setFieldValue("search",""),i.get(route("product.index"))},className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-red-500 focus:outline-none transition-colors","aria-label":"Clear search",children:e.jsx(Ne,{className:"w-4 h-4"})})]})})})})}),u.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs(m,{href:route("product.printqr",{id:u.join(",")}),className:"text-white  w-full md:w-64 lg:w-48  py-2 px-4 bg-black rounded-lg hover:bg-gray-600 flex justify-center items-center gap-2",children:[e.jsx(we,{className:"w-4 h-4"}),"Print QR"]}),e.jsxs("button",{onClick:()=>w(!0),className:"text-white w-full md:w-64 lg:w-48  py-2 px-4 bg-red-500 rounded-lg hover:bg-red-600 flex justify-center items-center gap-2",children:[e.jsx(T,{className:"w-4 h-4"}),"Bulk Delete"]})]}),e.jsxs("button",{onClick:()=>k(!0),className:"text-white flex justify-center items-center gap-2 w-full py-2 px-4 rounded-lg bg-slate-800 hover:bg-slate-900 md:w-auto",children:[e.jsx(ke,{className:"h-4 w-4"}),"Date Range Filter"]}),e.jsxs("button",{onClick:()=>{i.get(route("product.index"))},className:"text-gray-700 flex justify-center items-center gap-2 w-full py-2 px-4 rounded-lg  bg-gray-200 hover:bg-slate-300 md:w-auto",children:[e.jsx(Ce,{className:"h-4 w-4"}),"Reset Filters"]})]}),e.jsx("div",{className:"overflow-x-auto rounded-lg shadow-md",children:e.jsxs("table",{className:"w-full table-fixed bg-white text-sm rounded-xl shadow overflow-hidden",children:[e.jsx("thead",{className:"whitespace-nowrap text-xs uppercase bg-gray-200 text-gray-700 tracking-wide border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 w-8",children:e.jsx("input",{type:"checkbox",onChange:s=>{s.target.checked?p(n.data.map(a=>a.id)):p([])},checked:u.length===n.data.length,className:"cursor-pointer rounded-sm border-gray-300 focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 focus:outline-none transition-all duration-300"})}),e.jsx("th",{className:"px-2 py-3 w-6"}),e.jsx("th",{className:"px-2 py-3 w-40 truncate text-left",children:"Product"}),e.jsx("th",{className:"px-2 py-3 w-20",children:"Inventory"}),e.jsx("th",{className:"px-2 py-3 w-28",children:"Purchase Price"}),e.jsx("th",{className:"px-2 py-3 w-28",children:"Selling Price"}),e.jsx("th",{className:"px-2 py-3 w-36",children:e.jsxs(d,{children:[e.jsx(d.Trigger,{children:e.jsxs("div",{className:"flex items-center justify-between cursor-pointer",children:[`Category (${t.get("category")||"All"})`,e.jsx("button",{className:"text-gray-500 hover:text-gray-700 transition",title:"Filter Categories",children:e.jsx(P,{className:"w-4 h-4"})})]})}),e.jsx(d.Content,{children:e.jsxs("select",{onClick:s=>s.stopPropagation(),name:"category",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg w-full p-2.5 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",onChange:s=>i.get(route("product.index"),{category:s.target.value,status:t.get("status"),brand:t.get("brand"),search:t.get("search"),startdate:j,enddate:y,supplierinvoiceno:t.get("supplierinvoiceno"),invoicecode:t.get("invoicecode")},{preserveState:!0,preserveScroll:!0}),value:t.get("category")||"",children:[e.jsx("option",{value:"",children:"All Categories"}),Z.map(s=>e.jsxs("option",{value:s.name,children:[s.name," (",s.total_products,")"]},s.name))]})})]})}),e.jsx("th",{className:"px-2 py-3 w-28",children:e.jsxs(d,{children:[e.jsx(d.Trigger,{children:e.jsxs("div",{className:"flex items-center justify-between cursor-pointer",children:[`Brands (${t.get("brand")||"All"})`,e.jsx("button",{className:"text-gray-500 hover:text-gray-700 transition",title:"Filter Brands",children:e.jsx(P,{className:"w-4 h-4"})})]})}),e.jsx(d.Content,{children:e.jsxs("select",{onClick:s=>s.stopPropagation(),name:"brand",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg w-full p-2.5 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",onChange:s=>i.get(route("product.index"),{brand:s.target.value,category:t.get("category"),status:t.get("status"),search:t.get("search"),startdate:j,enddate:y,supplierinvoiceno:t.get("supplierinvoiceno"),invoicecode:t.get("invoicecode")},{preserveState:!0,preserveScroll:!0}),value:t.get("brand")||"",children:[e.jsx("option",{value:"",children:"All Brands"}),ee.map(s=>e.jsxs("option",{value:s.name,children:[s.name," (",s.total_products,")"]},s.name))]})})]})}),e.jsx("th",{className:"px-2 py-3 w-20",children:e.jsxs(d,{children:[e.jsx(d.Trigger,{children:e.jsxs("div",{className:"flex items-center justify-between cursor-pointer",children:[`Status (${t.get("status")==="1"?"In Stock":t.get("status")==="0"?"Out of Stock":"All"})`,e.jsx("button",{className:"text-gray-500 hover:text-gray-700 transition",title:"Filter Status",children:e.jsx(P,{className:"w-4 h-4"})})]})}),e.jsx(d.Content,{children:e.jsxs("select",{onClick:s=>s.stopPropagation(),name:"status",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg w-full p-2.5 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",onChange:s=>i.get(route("product.index"),{status:s.target.value,category:t.get("category"),brand:t.get("brand"),search:t.get("search"),startdate:j,enddate:y,supplierinvoiceno:t.get("supplierinvoiceno"),invoicecode:t.get("invoicecode")},{preserveState:!0}),value:t.get("status")||"",children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"1",children:"In Stock"}),e.jsx("option",{value:"0",children:"Out of Stock"})]})})]})}),e.jsx("th",{className:"px-2 py-3 w-32 text-center",children:"Actions"})]})}),e.jsxs("tbody",{className:"whitespace-nowrap text-gray-800",children:[n.data.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"10",className:"p-4 text-center text-gray-500",children:"No products found."})}),n.data.map(s=>{var r,o,h,x,g,v,z,O,V,q,_;const a=$.includes(s.id);return e.jsxs(c.Fragment,{children:[e.jsxs("tr",{onContextMenu:l=>{l.preventDefault(),de({event:l,props:s})},className:`h-12 transition duration-200 ${((r=s==null?void 0:s.stock)==null?void 0:r.quantity)===0||((o=s==null?void 0:s.stock)==null?void 0:o.quantity)===null?"bg-red-100 hover:bg-red-200":((h=s==null?void 0:s.stock)==null?void 0:h.quantity)<5?"bg-yellow-100 hover:bg-yellow-200":"odd:bg-white even:bg-gray-50 hover:bg-gray-100"} ${u.includes(s.id)?"border-cyan-200 border-b":"border-gray-200 border-b"}`,children:[e.jsx("td",{className:"px-4 pb-2",children:e.jsx("input",{type:"checkbox",onChange:l=>{l.target.checked?p(M=>[...M,s.id]):p(M=>M.filter(xe=>xe!==s.id))},checked:u.includes(s.id),className:"cursor-pointer rounded-sm border-gray-300 focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 focus:outline-none transition-all duration-300"})}),e.jsx("td",{className:"px-2 py-3",children:e.jsx("button",{onClick:()=>ce(s.id),className:"text-gray-500 hover:text-gray-700 transition",title:"Toggle stock details",children:a?e.jsx(Q,{className:"w-4 h-4"}):e.jsx(Se,{className:"w-4 h-4"})})}),e.jsx("td",{className:"px-2 py-3 w-48 truncate",children:e.jsxs("div",{className:"cursor-pointer hover:text-cyan-600 transition",children:[e.jsx("p",{className:"text-gray-800 font-medium truncate",children:s.name}),s.model&&e.jsxs("p",{className:"text-sm text-gray-500 truncate",children:["Model: ",s.model]})]})}),e.jsxs("td",{className:`px-2 py-3 text-center font-medium ${((x=s==null?void 0:s.stock)==null?void 0:x.quantity)===0||((g=s==null?void 0:s.stock)==null?void 0:g.quantity)===null?"text-red-600":((v=s==null?void 0:s.stock)==null?void 0:v.quantity)<5?"text-yellow-600":"text-gray-800"}`,children:[((z=s==null?void 0:s.stock)==null?void 0:z.quantity)??0,e.jsx("span",{className:"text-xs text-gray-500 ms-1",children:"Unit"})]}),e.jsx("td",{className:"px-2 py-3 text-center",children:s.purchase_price||"N/A"}),e.jsx("td",{className:"px-2 py-3 text-center",children:s.selling_price||"N/A"}),e.jsx("td",{className:"px-2 py-3 text-left",children:((O=s==null?void 0:s.categories)==null?void 0:O.length)>0?e.jsxs("div",{className:"flex flex-wrap gap-1",children:[s.categories.slice(0,3).map(l=>e.jsx("span",{className:"px-2 py-1 border border-gray-300 rounded text-xs truncate bg-white",children:l.name},l.name)),s.categories.length>3&&e.jsxs("span",{className:"px-2 py-1 border border-gray-300 rounded text-xs bg-gray-100",children:["+",s.categories.length-3]})]}):e.jsx("span",{children:"N/A"})}),e.jsx("td",{className:"px-2 py-3 text-left",children:((V=s==null?void 0:s.brands)==null?void 0:V.length)>0?e.jsxs("div",{className:"flex flex-wrap gap-1",children:[s.brands.slice(0,3).map(l=>e.jsx("span",{className:"px-2 py-1 border border-gray-300 rounded text-xs truncate bg-white",children:l.name},l.name)),s.brands.length>3&&e.jsxs("span",{className:"px-2 py-1 border border-gray-300 rounded text-xs bg-gray-100",children:["+",s.brands.length-3]})]}):e.jsx("span",{children:"N/A"})}),e.jsx("td",{className:"px-2 py-3 w-40",children:e.jsxs("label",{className:"relative cursor-pointer inline-block",children:[e.jsx("input",{type:"checkbox",onClick:()=>i.put(route("product.status",s.id),{},{preserveScroll:!0}),className:"sr-only peer ",checked:((q=s==null?void 0:s.stock)==null?void 0:q.status)||!1}),e.jsx("div",{className:"w-11 h-6 bg-gray-300 rounded-full peer-checked:bg-cyan-600 relative transition",children:e.jsx("div",{className:"absolute left-[2px] top-[1px] w-5 h-5 bg-white border border-gray-300 rounded-full transition peer-checked:translate-x-full"})})]})}),e.jsx("td",{className:"px-2 py-3 text-center",children:e.jsxs("div",{className:"flex justify-center items-center gap-2",children:[e.jsx(m,{href:route("product.show",s.code||s.id),title:"View",className:"text-cyan-500 hover:text-cyan-700",children:e.jsx(Fe,{className:"w-4 h-4"})}),e.jsx(m,{href:route("product.edit",s.id),title:"Edit",className:"text-yellow-500 hover:text-yellow-700",children:e.jsx(Me,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>b(s),title:"Delete",className:"text-red-500 hover:text-red-700",children:e.jsx(T,{className:"w-4 h-4"})}),e.jsx(m,{href:route("stock.index",{product_id:s.id}),title:"Stock",className:"text-green-500 hover:text-green-700",children:e.jsx(D,{className:"w-4 h-4"})})]})})]}),a&&e.jsx("tr",{className:"bg-gray-50 text-sm border-t border-gray-200",children:e.jsx("td",{colSpan:"10",className:"px-10 py-4 text-gray-600",children:e.jsx("div",{className:"space-y-4",children:e.jsx("div",{children:oe[s.id]?e.jsx("p",{className:"text-sm text-gray-500 mt-1 animate-pulse",children:"Loading logs..."}):((_=F[s.id])==null?void 0:_.length)>0?e.jsxs("div",{className:"grid grid-cols-4 gap-2 text-sm ms-12 font-medium ",children:[e.jsx("div",{className:"font-semibold text-gray-700 bg-slate-200 p-2 rounded-l-xl",children:"Available"}),e.jsx("div",{className:"font-semibold text-gray-700 bg-slate-200 p-2",children:"Type"}),e.jsx("div",{className:"font-semibold text-gray-700 bg-slate-200 p-2",children:"Remarks"}),e.jsx("div",{className:"font-semibold text-gray-700 bg-slate-200 p-2 rounded-r-xl",children:"Date"}),F[s.id].map(l=>e.jsxs("div",{className:"contents",children:[e.jsx("div",{className:"p-1 text-gray-800",children:(l==null?void 0:l.quantity)||"-"}),e.jsx("div",{className:"p-1 text-gray-800",children:(l==null?void 0:l.type)||"-"}),e.jsx("div",{className:"p-1 text-gray-800",children:(l==null?void 0:l.remarks)||"-"}),e.jsx("div",{className:"p-1 text-gray-800",children:new Date(l==null?void 0:l.created_at).toLocaleString()})]},l.id))]}):e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"No stock logs available."})})})})})]},s.id)})]})]})}),e.jsxs("div",{class:"grid px-4 py-3 text-xs font-semibold tracking-wide text-gray-500 uppercase border-t dark:border-gray-700 bg-gray-50 sm:grid-cols-9    ",children:[e.jsxs("span",{class:"flex items-center col-span-3",children:[" Showing ",n.from," - ",n.to," of ",n.total," "]}),e.jsx("span",{class:"col-span-2"}),e.jsx("span",{class:"flex col-span-4 mt-2 sm:mt-auto sm:justify-end",children:e.jsx("nav",{"aria-label":"Table navigation",children:e.jsxs("ul",{class:"inline-flex items-center",children:[e.jsx("li",{children:e.jsx("button",{onClick:()=>n.links[0].url?i.get(n.links[0].url,{status:t.get("status")||"",search:t.get("search")||"",category:t.get("category")||"",brand:t.get("brand")||"",startdate:t.get("startdate")||"",enddate:t.get("enddate")||"",supplierinvoiceno:t.get("supplierinvoiceno")||"",invoicecode:t.get("invoicecode")||""}):null,class:"px-3 py-1 rounded-md rounded-l-lg focus:outline-none focus:shadow-outline-purple","aria-label":"Previous",children:e.jsx("svg",{"aria-hidden":"true",class:"w-4 h-4 fill-current",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z","clip-rule":"evenodd","fill-rule":"evenodd"})})})}),(()=>{let s=-1;const a=n.links.findIndex(r=>r.active);return n.links.slice(1,-1).filter((r,o,h)=>{const x=parseInt(r.label,10);if(isNaN(x))return!0;const g=Math.max(0,a-2),v=Math.min(h.length-1,a+2);return o<3||o>h.length-4||o>=g&&o<=v}).map((r,o,h)=>{const x=parseInt(r.label,10),g=!isNaN(x)&&s!==-1&&x-s>1;return isNaN(x)||(s=x),e.jsx("li",{children:g?e.jsx("span",{className:"px-3 py-1",children:"..."}):r.active?e.jsx("button",{className:"px-3 py-1 text-white dark:text-gray-800 transition-colors duration-150 bg-black dark:bg-gray-100 border border-r-0 border-black dark:border-gray-100 rounded-md focus:outline-none focus:shadow-outline-purple","aria-current":"page",children:r.label}):e.jsx("button",{onClick:()=>r.url&&window.location.assign(r.url+`&status=${t.get("status")||""}&search=${t.get("search")||""}&category=${t.get("category")||""}&brand=${t.get("brand")||""}&startdate=${t.get("startdate")||""}&enddate=${t.get("enddate")||""}&supplierinvoiceno=${t.get("supplierinvoiceno")||""}&invoicecode=${t.get("invoicecode")||""}`),className:"px-3 py-1 rounded-md focus:outline-none focus:shadow-outline-purple",children:r.label})},o)})})(),e.jsx("li",{children:e.jsx("button",{onClick:()=>n.links[n.links.length-1].url&&window.location.assign(n.links[n.links.length-1].url+`&status=${t.get("status")||""}&search=${t.get("search")||""}&category=${t.get("category")||""}&brand=${t.get("brand")||""}&startdate=${t.get("startdate")||""}&enddate=${t.get("enddate")||""}&supplierinvoiceno=${t.get("supplierinvoiceno")||""}&invoicecode=${t.get("invoicecode")||""}`),class:"px-3 py-1 rounded-md rounded-r-lg focus:outline-none focus:shadow-outline-purple","aria-label":"Next",children:e.jsx("svg",{class:"w-4 h-4 fill-current","aria-hidden":"true",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd","fill-rule":"evenodd"})})})})]})})})]})]})})}),e.jsx(I,{show:le,onClose:()=>C(!1),maxWidth:"2xl",className:"rounded-xl shadow-2xl",children:e.jsxs("div",{className:"relative p-6 bg-white rounded-xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Import Products via CSV"}),e.jsx("button",{onClick:()=>C(!1),className:"text-gray-400 hover:text-gray-600 transition-colors","aria-label":"Close modal",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-3",children:"How to Import"}),e.jsxs("ul",{className:"space-y-3 text-gray-600 text-sm",children:[e.jsxs("li",{className:"flex items-start",children:["Get the CSV template and complete the necessary fields.",e.jsx("a",{href:"/productexample.csv",className:"inline-flex items-center text-cyan-600 hover:text-cyan-800 transition-colors duration-200 underline ml-1",download:"productexample.csv",children:"Download now"})]}),e.jsxs("li",{className:"flex items-start",children:["Use ",e.jsx("code",{className:"bg-gray-100 px-1 rounded",children:'"warranty_type"'}),': "none", "years", "months", or "days".']}),e.jsxs("li",{className:"flex items-start",children:["Use ",e.jsx("code",{className:"bg-gray-100 px-1 rounded",children:'"identity_type"'}),': "none", "sku", "serial", or "imei".']}),e.jsx("li",{className:"flex items-start",children:"Upload the completed CSV file."}),e.jsx("li",{className:"flex items-start",children:'Click "Import" to process your file.'})]})]}),e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"csv-upload",type:"file",accept:".csv",onChange:ie,className:"hidden"}),e.jsxs("label",{htmlFor:"csv-upload",className:"cursor-pointer inline-flex items-center px-4 py-2 bg-green-600 text-white text-sm font-medium rounded-lg hover:bg-green-700 transition-colors duration-200",children:[e.jsx(Ee,{className:"mr-2 h-5 w-5"}),"Import CSV File"]})]})})]})}),e.jsx(W,{isOpen:R!==null,onClose:()=>b(null),title:"Are you sure you want to delete?",onConfirm:()=>{i.delete(route("product.destroy",R.id),{preserveScroll:!0,preserveState:!0}),b(null)}}),e.jsx(W,{isOpen:te,onClose:()=>w(!1),title:"Are you sure you want to delete these products?",onConfirm:()=>{i.post(route("product.bulkdestroy"),{ids:u.join(",")},{onSuccess:()=>{w(!1),p([])}})}}),e.jsxs(I,{show:ae,onClose:()=>E(!1),maxWidth:"6xl",children:[e.jsx("div",{className:"my-4 text-center hide-print",children:e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Purchases QR Codes"})}),e.jsxs("div",{children:[e.jsx("div",{id:"printable-content",className:"grid grid-cols-4 gap-4 max-h-[70vh] overflow-auto p-4",children:n.data.filter(s=>u.includes(s.id)).map((s,a)=>e.jsxs("div",{className:"flex flex-col border border-gray-300 items-center justify-center p-4 break-inside-avoid",children:[e.jsx(De,{value:s.code||s.id,size:150,logoOpacity:.8}),e.jsx("div",{className:"mt-2",children:s.code||s.id})]},a))}),e.jsxs("div",{className:"mt-4 text-center",children:[e.jsx("button",{onClick:()=>window.print(),className:"ml-2 bg-black text-white py-2 px-4 mb-4 rounded shadow hover:bg-gray-600 transition duration-300",children:"Print"}),e.jsx("button",{onClick:()=>E(!1),className:"ml-2 bg-red-500 text-white py-2 px-4 mb-4 rounded shadow hover:bg-red-600 transition duration-300",children:"Close"})]})]}),e.jsx("style",{jsx:!0,global:!0,children:`
            @media print {
              body {
                font-size: 12px;
              }

              #printable-content {
                display: grid;
                grid-template-columns: repeat(2, 1fr); /* 2 columns per row */
                gap: 20px;
                padding: 20px;
              }

              #printable-content > div {
                width: 50%;
                page-break-inside: avoid;
                text-align: center;
              }

              .hide-print {
                display: none;
              }

              .break-inside-avoid {
                page-break-inside: avoid; /* Prevents breaking items across pages */
              }

              button {
                display: none; /* Hides buttons during printing */
              }

              @page {
                size: A4; /* Ensures proper page size */
                margin: 20mm; /* Adjust the print margin */
              }
            }
          `})]}),e.jsxs(Re,{id:"context-menu",children:[e.jsx(N,{onClick:({props:s})=>f({props:s,action:"view"}),children:"View"}),e.jsx(N,{onClick:({props:s})=>f({props:s,action:"edit"}),children:"Edit"}),e.jsx(N,{onClick:({props:s})=>f({props:s,action:"stock"}),hidden:({props:s})=>s.identity_type==="imei",children:"Stock"}),e.jsx(N,{onClick:({props:s})=>f({props:s,action:"delete"}),className:"text-red-600",children:"Delete"})]}),e.jsx(I,{show:re,onClose:()=>k(!1),maxWidth:"2xl",children:e.jsxs("div",{className:"overflow-y-auto max-h-[80vh]",children:[e.jsx("div",{className:"flex justify-center p-10",children:e.jsx("div",{className:"text-2xl font-medium text-[#5d596c] ",children:"Date Range"})}),e.jsx("div",{className:"px-10 flex justify-center mb-5",children:e.jsxs("div",{className:"text-center",children:[e.jsx($e.DateRangePicker,{ranges:[S],onChange:s=>{ne(s.selection)},className:"w-96"}),e.jsxs("div",{className:"flex justify-center gap-4 mt-5",children:[e.jsx("button",{type:"button",onClick:()=>{k(!1)},className:"text-gray-500 bg-[#eaebec] hover:bg-[#eaebec] focus:ring-4 focus:ring-[#eaebec] font-medium rounded-lg text-sm px-5 py-2.5 me-2 mb-2",children:"Close"}),e.jsx("button",{type:"button",onClick:()=>{i.get(route("product.index",{startdate:S.startDate,enddate:S.endDate,status:t.get("status")||"",search:t.get("search")||"",category:t.get("category")||"",brand:t.get("brand")||"",supplierinvoiceno:t.get("supplierinvoiceno")||"",invoicecode:t.get("invoicecode")||""}))},className:"text-white bg-black hover:bg-gray-800 focus:ring-4 focus:ring-gray-800  font-medium rounded-lg text-sm px-5 py-2.5 me-2 mb-2",children:"Filter"})]})]})})]})})]})}export{Ze as default};
