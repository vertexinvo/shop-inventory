import{q as pe,r as c,j as e,Y as be,y as i,a as g}from"./app-MacVrtwK.js";import{F as je,a as fe,b as ye}from"./formik.esm-C_GJImaD.js";import{A as ve,t as $,H as we,u as Ne,G as ke,c as Ce,d as Se,B as Fe,E as H,I as De,o as Me,J as G,D as o,p as I,f as A,K as $e,L as Ie,s as Ae,C as K,Q as Pe}from"./AuthenticatedLayout-DOZZV8y3.js";import{a as P}from"./Modal-BOS77Vrk.js";import{d as Re}from"./index-DG0uBLk3.js";import{F as Ee,i as _e,p as k}from"./ReactContexify.min-Ce7Zm9SF.js";import{b as Le}from"./index-DTXApJbV.js";import{C as p}from"./Cards-Bz71YsEG.js";import{T as ze}from"./TabSwitcher-BzR674TW.js";import"./transition-lQSiqxFZ.js";import"./ReactToastify-CUd6udIb.js";import"./proxy-D-VpbF5t.js";import"./index-BKNjMPK8.js";function ls(X){const{auth:Y,stock:Be,startdate:b,enddate:j,products:n,totalstock:J,totalstockavailable:Z,totalstocknotavailable:ee,totalStockValue:se,totaliteminstock:te,categories:ae,brands:re}=X,{url:le}=pe(),t=new URLSearchParams(le.split("?")[1]),[R,E]=c.useState([]),[_,f]=c.useState(null),[ne,C]=c.useState(!1),[m,y]=c.useState([]),[ie,L]=c.useState(!1),[oe,S]=c.useState(!1),[ce,F]=c.useState(!1),[v,de]=c.useState("cards"),[D,xe]=c.useState({startDate:new Date,endDate:new Date,key:"selection"}),[Te,Oe]=c.useState(!1),[Ve,qe]=c.useState({brand:"",category:"",status:""}),he=s=>{const r=s.target.files[0];r&&(r.type==="text/csv"||r.name.endsWith(".csv")||r.name.endsWith(".xlsx")||r.name.endsWith(".xls")?i.post(route("product.csvstore"),{file:r}):console.error("Please select a CSV file."))},me=async s=>{R.includes(s)?E(r=>r.filter(l=>l!==s)):E(r=>[...r,s])},{show:ue}=Ee({id:"context-menu"}),w=({props:s,action:r})=>{const l=s;r==="view"?i.get(route("product.show",l.id)):r==="edit"?i.get(route("product.edit",l.id)):r==="delete"?f(l):r==="stock"&&i.get(route("stock.index",{product_id:l.id}))},[Qe,We]=c.useState(!1);return e.jsxs(ve,{Product:Y.Product,header:e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsxs(o,{children:[e.jsx(o.Trigger,{children:e.jsxs("button",{className:"inline-flex items-center gap-2 rounded-lg bg-cyan-700 px-4 py-2 text-sm font-medium text-white transition hover:bg-cyan-800 focus:outline-none focus:ring-4 focus:ring-cyan-300",children:["File",e.jsx(A,{className:"h-3 w-3"})]})}),e.jsxs(o.Content,{className:"mt-2 w-48 rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none",children:[e.jsx("a",{href:route("product.csvexport"),download:!0,className:"block w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Export Excel (.csv)"}),e.jsx("button",{onClick:()=>F(!0),className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Import Excel (.csv)"})]})]}),e.jsxs(o,{children:[e.jsx(o.Trigger,{children:e.jsxs("button",{className:"inline-flex items-center gap-2 rounded-lg bg-cyan-700 px-4 py-2 text-sm font-medium text-white transition hover:bg-cyan-800 focus:outline-none focus:ring-4 focus:ring-cyan-300",children:["Add new",e.jsx(A,{className:"h-3 w-3"})]})}),e.jsx(o.Content,{className:"mt-2 w-48 rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none",children:e.jsx(g,{href:route("product.create"),className:"block w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Product"})})]})]})}),children:[e.jsx(be,{title:"Purchase"}),e.jsxs("div",{className:"mt-4 mx-4 p-4 bg-white shadow-sm rounded-2xl",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-baseline sm:justify-between gap-2",children:[e.jsx(ze,{activeTab:v,setActiveTab:de}),v==="cards"&&e.jsxs("select",{className:"px-4 py-2 w-full sm:w-56 rounded-lg text-sm border border-gray-300 bg-white shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition",children:[e.jsx("option",{value:"7",children:"Last 7 Days"}),e.jsx("option",{value:"15",children:"Last 15 Days"}),e.jsx("option",{value:"30",children:"Last 1 Month"}),e.jsx("option",{value:"180",children:"Last 6 Months"}),e.jsx("option",{value:"365",children:"Last 1 Year"})]})]}),v==="cards"&&e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 xl:grid-cols-5 gap-4",children:[e.jsx(p,{title:"Total Products",value:J,icon:e.jsx($,{size:36}),link:route("product.index")}),e.jsx(p,{title:"Stock keeping unit",value:te,icon:e.jsx($,{size:36})}),e.jsx(p,{title:"Out of Stock",value:ee,icon:e.jsx(we,{size:36}),link:route("product.index",{status:0})}),e.jsx(p,{title:"In Stock",value:Z,icon:e.jsx(Ne,{size:36}),link:route("product.index",{status:1})}),e.jsx(p,{title:"Total Stock Value",value:e.jsx("span",{children:se}),icon:e.jsx(ke,{size:36})})]}),v==="filters"&&e.jsx("div",{className:"mt-4 p-4 bg-white border border-gray-200 rounded-2xl shadow",children:"Filters"})]}),e.jsx("div",{className:"flex flex-col px-4 mx-auto w-full mt-4",children:e.jsxs("div",{className:"w-full ",children:[e.jsxs("div",{className:"flex items-center justify-between gap-4 mb-6",children:[e.jsx(je,{enableReinitialize:!0,initialValues:{search:t.get("search")||""},onSubmit:s=>{i.get(route("product.index"),{search:s.search,status:t.get("status"),brand:t.get("brand"),category:t.get("category"),startdate:b,enddate:j,supplierinvoiceno:t.get("supplierinvoiceno"),invoicecode:t.get("invoicecode")},{preserveState:!0,preserveScroll:!0})},children:({values:s,setFieldValue:r,handleSubmit:l})=>e.jsx(fe,{className:"w-full flex items-center gap-3",children:e.jsx("div",{className:"relative w-full md:max-w-md",children:e.jsx(ye,{name:"search",children:({field:d,form:h})=>e.jsxs("div",{className:"relative",children:[e.jsx("input",{...d,type:"text",placeholder:"Search products...",className:"w-full pl-10 pr-10 py-2 rounded-xl border border-gray-300 focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 focus:outline-none transition-all duration-300 bg-white shadow-sm hover:shadow-md placeholder-gray-400 text-gray-800",onKeyDown:x=>{x.key==="Enter"&&l()}}),e.jsx("button",{type:"submit",className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-cyan-500 focus:outline-none transition-colors","aria-label":"Search",children:e.jsx(Ce,{className:"w-4 h-4"})}),d.value&&e.jsx("button",{type:"button",onClick:()=>{h.setFieldValue("search",""),i.get(route("product.index"))},className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-red-500 focus:outline-none transition-colors","aria-label":"Clear search",children:e.jsx(Se,{className:"w-4 h-4"})})]})})})})}),m.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs(g,{href:route("product.printqr",{id:m.join(",")}),className:"text-white  w-full md:w-64 lg:w-48  py-2 px-4 bg-black rounded-lg hover:bg-gray-600 flex justify-center items-center gap-2",children:[e.jsx(Fe,{className:"w-4 h-4"}),"Print QR"]}),e.jsxs("button",{onClick:()=>C(!0),className:"text-white w-full md:w-64 lg:w-48  py-2 px-4 bg-red-500 rounded-lg hover:bg-red-600 flex justify-center items-center gap-2",children:[e.jsx(H,{className:"w-4 h-4"}),"Bulk Delete"]})]}),e.jsxs("button",{onClick:()=>S(!0),className:"text-white flex justify-center items-center gap-2 w-full py-2 px-4 rounded-lg bg-slate-800 hover:bg-slate-900 md:w-auto",children:[e.jsx(De,{className:"h-4 w-4"}),"Date Range Filter"]}),e.jsxs("button",{onClick:()=>{i.get(route("product.index"))},className:"text-gray-700 flex justify-center items-center gap-2 w-full py-2 px-4 rounded-lg  bg-gray-200 hover:bg-slate-300 md:w-auto",children:[e.jsx(Me,{className:"h-4 w-4"}),"Reset Filters"]})]}),e.jsxs("div",{className:"overflow-x-auto bg-white rounded-xl shadow-md border border-gray-200",children:[e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"whitespace-nowrap text-xs uppercase bg-gray-100 text-gray-700 tracking-wide border-b",children:e.jsxs("tr",{children:[e.jsxs("th",{className:"px-4 py-3 w-6",children:[e.jsx("input",{id:"checkbox",type:"checkbox",className:"hidden peer",onChange:s=>{y(s.target.checked?n.data.map(r=>r.id):[])},checked:m.length===n.data.length}),e.jsx("label",{htmlFor:"checkbox",className:"relative flex items-center justify-center p-0.5 peer-checked:before:hidden before:block before:absolute before:w-full before:h-full before:bg-white w-5 h-5 cursor-pointer bg-black border border-gray-400 rounded overflow-hidden",children:e.jsx(G,{className:"w-full fill-white"})})]}),e.jsx("th",{className:"px-2 py-3 w-40 truncate text-left",children:"Product"}),e.jsx("th",{className:"px-2 py-3 w-20",children:"Inventory"}),e.jsx("th",{className:"px-2 py-3 w-28",children:"Purchase Price"}),e.jsx("th",{className:"px-2 py-3 w-28",children:"Selling Price"}),e.jsx("th",{className:"px-2 py-3 w-36",children:e.jsxs(o,{children:[e.jsx(o.Trigger,{children:e.jsxs("div",{className:"flex items-center justify-between cursor-pointer",children:[`Category (${t.get("category")||"All"})`,e.jsx("button",{className:"text-gray-500 hover:text-gray-700 transition",title:"Filter Categories",children:e.jsx(I,{className:"w-4 h-4"})})]})}),e.jsx(o.Content,{children:e.jsxs("select",{onClick:s=>s.stopPropagation(),name:"category",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg w-full p-2.5 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",onChange:s=>i.get(route("product.index"),{category:s.target.value,status:t.get("status"),brand:t.get("brand"),search:t.get("search"),startdate:b,enddate:j,supplierinvoiceno:t.get("supplierinvoiceno"),invoicecode:t.get("invoicecode")},{preserveState:!0,preserveScroll:!0}),value:t.get("category")||"",children:[e.jsx("option",{value:"",children:"All Categories"}),ae.map(s=>e.jsxs("option",{value:s.name,children:[s.name," (",s.total_products,")"]},s.name))]})})]})}),e.jsx("th",{className:"px-2 py-3 w-32",children:e.jsxs(o,{children:[e.jsx(o.Trigger,{children:e.jsxs("div",{className:"flex items-center justify-between cursor-pointer",children:[`Brands (${t.get("brand")||"All"})`,e.jsx("button",{className:"text-gray-500 hover:text-gray-700 transition",title:"Filter Brands",children:e.jsx(I,{className:"w-4 h-4"})})]})}),e.jsx(o.Content,{children:e.jsxs("select",{onClick:s=>s.stopPropagation(),name:"brand",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg w-full p-2.5 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",onChange:s=>i.get(route("product.index"),{brand:s.target.value,category:t.get("category"),status:t.get("status"),search:t.get("search"),startdate:b,enddate:j,supplierinvoiceno:t.get("supplierinvoiceno"),invoicecode:t.get("invoicecode")},{preserveState:!0,preserveScroll:!0}),value:t.get("brand")||"",children:[e.jsx("option",{value:"",children:"All Brands"}),re.map(s=>e.jsxs("option",{value:s.name,children:[s.name," (",s.total_products,")"]},s.name))]})})]})}),e.jsx("th",{className:"px-2 py-3 w-20",children:e.jsxs(o,{children:[e.jsx(o.Trigger,{children:e.jsxs("div",{className:"flex items-center justify-between cursor-pointer",children:[`Status (${t.get("status")==="1"?"In Stock":t.get("status")==="0"?"Out of Stock":"All"})`,e.jsx("button",{className:"text-gray-500 hover:text-gray-700 transition",title:"Filter Status",children:e.jsx(I,{className:"w-4 h-4"})})]})}),e.jsx(o.Content,{children:e.jsxs("select",{onClick:s=>s.stopPropagation(),name:"status",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg w-full p-2.5 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",onChange:s=>i.get(route("product.index"),{status:s.target.value,category:t.get("category"),brand:t.get("brand"),search:t.get("search"),startdate:b,enddate:j,supplierinvoiceno:t.get("supplierinvoiceno"),invoicecode:t.get("invoicecode")},{preserveState:!0}),value:t.get("status")||"",children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"1",children:"In Stock"}),e.jsx("option",{value:"0",children:"Out of Stock"})]})})]})}),e.jsx("th",{className:"px-2 py-3 w-32 text-center",children:"Actions"})]})}),e.jsxs("tbody",{className:"whitespace-nowrap text-gray-800",children:[n.data.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"10",className:"p-4 text-center text-gray-500",children:"No data available."})}),n.data.map(s=>{var l,d,h,x,u,N,z,B,T,O,V,q,Q,W,U;const r=R.includes(s.id);return e.jsxs(c.Fragment,{children:[e.jsxs("tr",{onContextMenu:a=>{a.preventDefault(),ue({event:a,props:s})},className:`h-12 transition duration-200 ${((l=s==null?void 0:s.stock)==null?void 0:l.quantity)===0||((d=s==null?void 0:s.stock)==null?void 0:d.quantity)===null?"bg-red-100 hover:bg-red-200":((h=s==null?void 0:s.stock)==null?void 0:h.quantity)<5?"bg-yellow-100 hover:bg-yellow-200":"odd:bg-white even:bg-gray-50 hover:bg-gray-100"} ${m.includes(s.id)?"border-cyan-200 border-b":"border-gray-200 border-b"}`,children:[e.jsxs("td",{className:"px-4",children:[e.jsx("input",{id:`checkbox-${s.id}`,type:"checkbox",className:"hidden peer",value:s.id,onChange:a=>{a.target.checked?y(M=>[...M,s.id]):y(M=>M.filter(ge=>ge!==s.id))},checked:m.includes(s.id)}),e.jsx("label",{htmlFor:`checkbox-${s.id}`,className:"relative flex items-center justify-center p-0.5 peer-checked:before:hidden before:block before:absolute before:w-full before:h-full before:bg-white w-5 h-5 cursor-pointer bg-black border border-gray-400 rounded overflow-hidden",children:e.jsx(G,{className:"w-full fill-white"})})]}),e.jsx("td",{className:"px-2 py-1 truncate flex cursor-pointer hover:text-cyan-600 transition",onClick:()=>me(s.id),children:e.jsxs("div",{className:"flex items-center gap-4",children:[r?e.jsx(A,{className:"w-3 h-3"}):e.jsx($e,{className:"w-3 h-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-800  truncate",children:s.name}),s.model&&e.jsxs("p",{className:"text-sm text-gray-500 truncate",children:["Model: ",s.model]})]})]})}),e.jsxs("td",{className:`px-2 py-1 text-center font-medium ${((x=s==null?void 0:s.stock)==null?void 0:x.quantity)===0||((u=s==null?void 0:s.stock)==null?void 0:u.quantity)===null?"text-red-600":((N=s==null?void 0:s.stock)==null?void 0:N.quantity)<5?"text-yellow-600":"text-gray-800"}`,children:[((z=s==null?void 0:s.stock)==null?void 0:z.quantity)??0,e.jsx("span",{className:"text-xs text-gray-500 ms-1",children:"Unit"})]}),e.jsx("td",{className:"px-2 py-3 text-center",children:s.purchase_price_stocklog||"N/A"}),e.jsx("td",{className:"px-2 py-3 text-center",children:s.selling_price||"N/A"}),e.jsx("td",{className:"px-2 py-1 text-left",children:((B=s==null?void 0:s.categories)==null?void 0:B.length)>0?e.jsxs("div",{className:"flex flex-wrap gap-1",children:[s.categories.slice(0,3).map(a=>e.jsx("span",{className:"px-2 py-1 border border-gray-300 rounded text-xs truncate bg-white",children:a.name},a.name)),s.categories.length>3&&e.jsxs("span",{className:"px-2 py-1 border border-gray-300 rounded text-xs bg-gray-100",children:["+",s.categories.length-3]})]}):e.jsx("span",{children:"N/A"})}),e.jsx("td",{className:"px-2 py-1 text-left",children:((T=s==null?void 0:s.brands)==null?void 0:T.length)>0?e.jsxs("div",{className:"flex flex-wrap gap-1",children:[s.brands.slice(0,3).map(a=>e.jsx("span",{className:"px-2 py-1 border border-gray-300 rounded text-xs truncate bg-white",children:a.name},a.name)),s.brands.length>3&&e.jsxs("span",{className:"px-2 py-1 border border-gray-300 rounded text-xs bg-gray-100",children:["+",s.brands.length-3]})]}):e.jsx("span",{children:"N/A"})}),e.jsx("td",{className:"px-2 py-1 w-20",children:e.jsxs("label",{className:"relative cursor-pointer inline-block",children:[e.jsx("input",{type:"checkbox",onClick:()=>i.put(route("product.status",s.id),{},{preserveScroll:!0}),className:"sr-only peer",checked:((O=s==null?void 0:s.stock)==null?void 0:O.status)||!1}),e.jsxs("div",{className:`flex items-center w-24 h-8 px-1 rounded-full transition relative 
        ${(V=s==null?void 0:s.stock)!=null&&V.status?"bg-green-100 justify-start":"bg-red-100 justify-end"}`,children:[e.jsx("span",{className:`absolute w-full text-xs text-center z-0 font-medium transition duration-200 
          ${(q=s==null?void 0:s.stock)!=null&&q.status?"text-green-700":"text-red-700"}`,children:(Q=s==null?void 0:s.stock)!=null&&Q.status?"Active":"Inactive"}),e.jsx("div",{className:"w-6 h-6 bg-white border border-gray-300 rounded-full z-10 transition peer-checked:translate-x-full"})]})]})}),e.jsx("td",{className:"px-2 py-3 text-center",children:e.jsxs("div",{className:"flex justify-center items-center gap-2",children:[e.jsx(g,{href:route("product.show",s.code||s.id),title:"View",className:"text-cyan-500 hover:text-cyan-700",children:e.jsx(Ie,{className:"w-4 h-4"})}),e.jsx(g,{href:route("product.edit",s.id),title:"Edit",className:"text-yellow-500 hover:text-yellow-700",children:e.jsx(Ae,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>f(s),title:"Delete",className:"text-red-500 hover:text-red-700",children:e.jsx(H,{className:"w-4 h-4"})}),e.jsx(g,{href:route("stock.index",{product_id:s.id}),title:"Stock",className:"text-green-500 hover:text-green-700",children:e.jsx($,{className:"w-4 h-4"})})]})})]}),r&&e.jsx("tr",{className:"bg-gray-50 text-sm border-t border-gray-200",children:e.jsx("td",{colSpan:"10",className:"px-10 py-4 text-gray-600",children:e.jsx("div",{className:"space-y-4",children:e.jsx("div",{children:((W=s==null?void 0:s.stock)==null?void 0:W.stock_logs.length)>0?e.jsxs("div",{className:"grid grid-cols-5 gap-2 text-sm ms-12 font-medium ",children:[e.jsx("div",{className:"font-semibold text-gray-700 bg-slate-200 p-2 rounded-l-xl",children:"Available"}),e.jsx("div",{className:"font-semibold text-gray-700 bg-slate-200 p-2",children:"Type"}),e.jsx("div",{className:"font-semibold text-gray-700 bg-slate-200 p-2",children:"Supplier Invoice"}),e.jsx("div",{className:"font-semibold text-gray-700 bg-slate-200 p-2",children:"Remarks"}),e.jsx("div",{className:"font-semibold text-gray-700 bg-slate-200 p-2 rounded-r-xl",children:"Date"}),(U=s==null?void 0:s.stock)==null?void 0:U.stock_logs.map(a=>e.jsxs("div",{className:"contents",children:[e.jsx("div",{className:"p-1 text-gray-800",children:(a==null?void 0:a.quantity)||"-"}),e.jsx("div",{className:"p-1 text-gray-800",children:(a==null?void 0:a.type)||"-"}),e.jsx("div",{className:"p-1 text-gray-800",children:(a==null?void 0:a.supplier_invoice_no)+`(${a==null?void 0:a.supplier_name})`||"-"}),e.jsx("div",{className:"p-1 text-gray-800",children:(a==null?void 0:a.remarks)||"-"}),e.jsx("div",{className:"p-1 text-gray-800",children:new Date(a==null?void 0:a.created_at).toLocaleString()})]},a.id))]}):e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"No stock logs available."})})})})})]},s.id)})]})]}),e.jsxs("div",{class:"grid px-4 py-3 text-xs font-semibold tracking-wide text-gray-500 uppercase border-t dark:border-gray-700 bg-gray-50 sm:grid-cols-9    ",children:[e.jsxs("span",{class:"flex items-center col-span-3",children:[" Showing ",n.from," - ",n.to," of ",n.total," "]}),e.jsx("span",{class:"col-span-2"}),e.jsx("span",{class:"flex col-span-4 mt-2 sm:mt-auto sm:justify-end",children:e.jsx("nav",{"aria-label":"Table navigation",children:e.jsxs("ul",{class:"inline-flex items-center",children:[e.jsx("li",{children:e.jsx("button",{onClick:()=>n.links[0].url?i.get(n.links[0].url,{status:t.get("status")||"",search:t.get("search")||"",category:t.get("category")||"",brand:t.get("brand")||"",startdate:t.get("startdate")||"",enddate:t.get("enddate")||"",supplierinvoiceno:t.get("supplierinvoiceno")||"",invoicecode:t.get("invoicecode")||""}):null,class:"px-3 py-1 rounded-md rounded-l-lg focus:outline-none focus:shadow-outline-purple","aria-label":"Previous",children:e.jsx("svg",{"aria-hidden":"true",class:"w-4 h-4 fill-current",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z","clip-rule":"evenodd","fill-rule":"evenodd"})})})}),(()=>{let s=-1;const r=n.links.findIndex(l=>l.active);return n.links.slice(1,-1).filter((l,d,h)=>{const x=parseInt(l.label,10);if(isNaN(x))return!0;const u=Math.max(0,r-2),N=Math.min(h.length-1,r+2);return d<3||d>h.length-4||d>=u&&d<=N}).map((l,d,h)=>{const x=parseInt(l.label,10),u=!isNaN(x)&&s!==-1&&x-s>1;return isNaN(x)||(s=x),e.jsx("li",{children:u?e.jsx("span",{className:"px-3 py-1",children:"..."}):l.active?e.jsx("button",{className:"px-3 py-1 text-white dark:text-gray-800 transition-colors duration-150 bg-black dark:bg-gray-100 border border-r-0 border-black dark:border-gray-100 rounded-md focus:outline-none focus:shadow-outline-purple","aria-current":"page",children:l.label}):e.jsx("button",{onClick:()=>l.url&&window.location.assign(l.url+`&status=${t.get("status")||""}&search=${t.get("search")||""}&category=${t.get("category")||""}&brand=${t.get("brand")||""}&startdate=${t.get("startdate")||""}&enddate=${t.get("enddate")||""}&supplierinvoiceno=${t.get("supplierinvoiceno")||""}&invoicecode=${t.get("invoicecode")||""}`),className:"px-3 py-1 rounded-md focus:outline-none focus:shadow-outline-purple",children:l.label})},d)})})(),e.jsx("li",{children:e.jsx("button",{onClick:()=>n.links[n.links.length-1].url&&window.location.assign(n.links[n.links.length-1].url+`&status=${t.get("status")||""}&search=${t.get("search")||""}&category=${t.get("category")||""}&brand=${t.get("brand")||""}&startdate=${t.get("startdate")||""}&enddate=${t.get("enddate")||""}&supplierinvoiceno=${t.get("supplierinvoiceno")||""}&invoicecode=${t.get("invoicecode")||""}`),class:"px-3 py-1 rounded-md rounded-r-lg focus:outline-none focus:shadow-outline-purple","aria-label":"Next",children:e.jsx("svg",{class:"w-4 h-4 fill-current","aria-hidden":"true",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd","fill-rule":"evenodd"})})})})]})})})]})]})]})}),e.jsx(P,{show:ce,onClose:()=>F(!1),maxWidth:"2xl",className:"rounded-xl shadow-2xl",children:e.jsxs("div",{className:"relative p-6 bg-white rounded-xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Import Products via CSV"}),e.jsx("button",{onClick:()=>F(!1),className:"text-gray-400 hover:text-gray-600 transition-colors","aria-label":"Close modal",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-3",children:"How to Import"}),e.jsxs("ul",{className:"space-y-3 text-gray-600 text-sm",children:[e.jsxs("li",{className:"flex items-start",children:["Get the CSV template and complete the necessary fields.",e.jsx("a",{href:"/productexample.csv",className:"inline-flex items-center text-cyan-600 hover:text-cyan-800 transition-colors duration-200 underline ml-1",download:"productexample.csv",children:"Download now"})]}),e.jsxs("li",{className:"flex items-start",children:["Use ",e.jsx("code",{className:"bg-gray-100 px-1 rounded",children:'"warranty_type"'}),': "none", "years", "months", or "days".']}),e.jsxs("li",{className:"flex items-start",children:["Use ",e.jsx("code",{className:"bg-gray-100 px-1 rounded",children:'"identity_type"'}),': "none", "sku", "serial", or "imei".']}),e.jsx("li",{className:"flex items-start",children:"Upload the completed CSV file."}),e.jsx("li",{className:"flex items-start",children:'Click "Import" to process your file.'})]})]}),e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"csv-upload",type:"file",accept:".csv",onChange:he,className:"hidden"}),e.jsxs("label",{htmlFor:"csv-upload",className:"cursor-pointer inline-flex items-center px-4 py-2 bg-green-600 text-white text-sm font-medium rounded-lg hover:bg-green-700 transition-colors duration-200",children:[e.jsx(Le,{className:"mr-2 h-5 w-5"}),"Import CSV File"]})]})})]})}),e.jsx(K,{isOpen:_!==null,onClose:()=>f(null),title:"Are you sure you want to delete?",onConfirm:()=>{i.delete(route("product.destroy",_.id),{preserveScroll:!0,preserveState:!0}),f(null)}}),e.jsx(K,{isOpen:ne,onClose:()=>C(!1),title:"Are you sure you want to delete these products?",onConfirm:()=>{i.post(route("product.bulkdestroy"),{ids:m.join(",")},{onSuccess:()=>{C(!1),y([])}})}}),e.jsxs(P,{show:ie,onClose:()=>L(!1),maxWidth:"6xl",children:[e.jsx("div",{className:"my-4 text-center hide-print",children:e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Products QR Codes"})}),e.jsxs("div",{children:[e.jsx("div",{id:"printable-content",className:"grid grid-cols-4 gap-4 max-h-[70vh] overflow-auto p-4",children:n.data.filter(s=>m.includes(s.id)).map((s,r)=>e.jsxs("div",{className:"flex flex-col border border-gray-300 items-center justify-center p-4 break-inside-avoid",children:[e.jsx(Pe,{value:s.code||s.id,size:150,logoOpacity:.8}),e.jsx("div",{className:"mt-2",children:s.code||s.id})]},r))}),e.jsxs("div",{className:"mt-4 text-center",children:[e.jsx("button",{onClick:()=>window.print(),className:"ml-2 bg-black text-white py-2 px-4 mb-4 rounded shadow hover:bg-gray-600 transition duration-300",children:"Print"}),e.jsx("button",{onClick:()=>L(!1),className:"ml-2 bg-red-500 text-white py-2 px-4 mb-4 rounded shadow hover:bg-red-600 transition duration-300",children:"Close"})]})]}),e.jsx("style",{jsx:!0,global:!0,children:`
            @media print {
              body {
                font-size: 12px;
              }

              #printable-content {
                display: grid;
                grid-template-columns: repeat(2, 1fr); /* 2 columns per row */
                gap: 20px;
                padding: 20px;
              }

              #printable-content > div {
                width: 50%;
                page-break-inside: avoid;
                text-align: center;
              }

              .hide-print {
                display: none;
              }

              .break-inside-avoid {
                page-break-inside: avoid; /* Prevents breaking items across pages */
              }

              button {
                display: none; /* Hides buttons during printing */
              }

              @page {
                size: A4; /* Ensures proper page size */
                margin: 20mm; /* Adjust the print margin */
              }
            }
          `})]}),e.jsxs(_e,{id:"context-menu",children:[e.jsx(k,{onClick:({props:s})=>w({props:s,action:"view"}),children:"View"}),e.jsx(k,{onClick:({props:s})=>w({props:s,action:"edit"}),children:"Edit"}),e.jsx(k,{onClick:({props:s})=>w({props:s,action:"stock"}),hidden:({props:s})=>s.identity_type==="imei",children:"Stock"}),e.jsx(k,{onClick:({props:s})=>w({props:s,action:"delete"}),className:"text-red-600",children:"Delete"})]}),e.jsx(P,{show:oe,onClose:()=>S(!1),maxWidth:"2xl",children:e.jsxs("div",{className:"overflow-y-auto max-h-[80vh]",children:[e.jsx("div",{className:"flex justify-center p-10",children:e.jsx("div",{className:"text-2xl font-medium text-[#5d596c] ",children:"Date Range"})}),e.jsx("div",{className:"px-10 flex justify-center mb-5",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Re.DateRangePicker,{ranges:[D],onChange:s=>{xe(s.selection)},className:"w-96"}),e.jsxs("div",{className:"flex justify-center gap-4 mt-5",children:[e.jsx("button",{type:"button",onClick:()=>{S(!1)},className:"text-gray-500 bg-[#eaebec] hover:bg-[#eaebec] focus:ring-4 focus:ring-[#eaebec] font-medium rounded-lg text-sm px-5 py-2.5 me-2 mb-2",children:"Close"}),e.jsx("button",{type:"button",onClick:()=>{i.get(route("product.index",{startdate:D.startDate,enddate:D.endDate,status:t.get("status")||"",search:t.get("search")||"",category:t.get("category")||"",brand:t.get("brand")||"",supplierinvoiceno:t.get("supplierinvoiceno")||"",invoicecode:t.get("invoicecode")||""}))},className:"text-white bg-black hover:bg-gray-800 focus:ring-4 focus:ring-gray-800  font-medium rounded-lg text-sm px-5 py-2.5 me-2 mb-2",children:"Filter"})]})]})})]})})]})}export{ls as default};
