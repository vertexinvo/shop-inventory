import{r as x,j as e,Y as I,a as M,y as O}from"./app-D1k6Qr7D.js";import{A as W,M as _}from"./AuthenticatedLayout-C1WX5jBP.js";import"./transition-Db-cRclb.js";import"./ReactToastify-l_hJBn7I.js";import"./Modal-BbiwkvGn.js";var L={};Object.defineProperty(L,"__esModule",{value:!0});var d=x,A=function(t){var o=t.timeToEvaluate,s=o===void 0?100:o,m=t.averageWaitTime,l=m===void 0?50:m,i=t.startCharacter,r=i===void 0?[]:i,p=t.endCharacter,v=p===void 0?[13,27]:p,j=t.onComplete,h=t.onError,w=t.minLength,b=w===void 0?1:w,y=t.ignoreIfFocusOn,S=t.stopPropagation,C=S===void 0?!1:S,N=t.preventDefault,R=N===void 0?!1:N,k=t.container,E=k===void 0?document:k,a=d.useRef([]),f=d.useRef(!1),D=function(){a.current=[]},T=function(){clearTimeout(f.current);var n=a.current.map(function(u,c,B){var F=u.time;return c>0?F-B[c-1].time:0}).slice(1).reduce(function(u,c){return u+c},0),Q=n/(a.current.length-1),P=a.current.slice(r.length>0?1:0).map(function(u){var c=u.char;return c}).join("");Q<=l&&a.current.slice(r.length>0?1:0).length>=b?j(P):Q<=l&&h&&h(P),D()},g=d.useCallback(function(n){n.currentTarget!==y&&(v.includes(n.keyCode)&&T(),(a.current.length>0||r.includes(n.keyCode)||r.length===0)&&(clearTimeout(f.current),f.current=setTimeout(T,s),a.current.push({time:performance.now(),char:n.key}))),C&&n.stopPropagation(),R&&n.preventDefault()},[r,v,s,j,h,b,y,C,R]);d.useEffect(function(){return function(){clearTimeout(f.current)}},[]),d.useEffect(function(){return E.addEventListener("keydown",g),function(){E.removeEventListener("keydown",g)}},[g])},K=L.default=A;const H=()=>{const[t,o]=x.useState(!1),[s,m]=x.useState(!1);return K({onComplete:l=>{if(!t)return;console.log("Raw Scanned QR:",l);let i=l.replace(/Shift/g,"").trim();console.log("Cleaned QR:",i),m(i);try{const r=route("product.detail",i);window.open(r,"_blank")}catch{console.log("Scanned data is not a URL, displaying instead.")}o(!1)}}),e.jsx(e.Fragment,{children:e.jsxs(W,{header:e.jsxs(e.Fragment,{children:[e.jsx(_,{size:20,className:"mr-2 cursor-pointer",onClick:()=>O.get(route("order.index")),title:"Back"}),e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Scan Product"})]}),children:[e.jsx(I,{title:"Scan Product"}),e.jsx("div",{className:"flex justify-center items-center bg-gray-100",children:e.jsxs("div",{className:"p-4 sm:p-6 m-4 sm:m-8 w-full sm:w-2/3 md:w-2/3 lg:w-1/3 rounded-lg bg-white shadow-lg text-center relative",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold pb-4",children:"Scan The QR"}),e.jsx("h4",{className:"text-xl sm:text-2xl font-semibold pb-4",children:s&&!s.startsWith("http")&&s}),e.jsxs("div",{className:"h-64 w-64 sm:h-80 sm:w-80 md:h-96 md:w-96 mx-auto",children:[!t&&e.jsx("img",{src:"/images/scanQR.jpg",className:"animate-fadeIn w-full h-full",alt:"QR Code"}),t&&e.jsx("div",{className:"flex justify-center items-center h-full",children:e.jsx("div",{className:"animate-pulse",children:e.jsx("img",{src:"/images/scanQR.jpg",className:"w-full h-full",alt:"QR Code"})})})]}),e.jsxs("div",{className:"grid gap-4 mt-6",children:[e.jsx("button",{onClick:()=>o(!t),className:"bg-black text-white py-2 rounded-md text-sm sm:text-base",children:t?"Stop Scanning...":"Start Scanning"}),e.jsx(M,{href:route("product.index"),className:"bg-red-500 text-white py-2 rounded-md text-center text-sm sm:text-base",children:"Close"})]})]})})]})})};export{H as default};
