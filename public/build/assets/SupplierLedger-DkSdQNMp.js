import{q as C,r as p,j as e,Y as A,y as b}from"./app-D3TbvMSY.js";import{A as L}from"./AuthenticatedLayout-CW9RImcI.js";import{M as P}from"./Modal-QC9ELHEw.js";import"./transition-DqM2dJBz.js";import"./ReactToastify-Dt2K8sg2.js";import"./proxy-Cf31oR6D.js";function E(g){const{auth:j,supplier:n,invoices:o=[],openingBalance:c=0,totalPayable:u=0,totalPaid:y=0,totalPending:N=0,totalAdjustments:f=0,filters:r}=g,v=C().props.setting;let i=Number(c);const[s,x]=p.useState((r==null?void 0:r.start_date)||""),[a,m]=p.useState((r==null?void 0:r.end_date)||""),w=()=>{const t=new URLSearchParams;s&&t.append("start_date",s),a&&t.append("end_date",a);const l=t.toString(),d=l?`${window.location.pathname}?${l}`:window.location.pathname;b.visit(d)},D=()=>{x(""),m(""),b.visit(window.location.pathname)},S=()=>s&&a?`Period: ${new Date(s).toLocaleDateString()} to ${new Date(a).toLocaleDateString()}`:s?`From: ${new Date(s).toLocaleDateString()}`:a?`Until: ${new Date(a).toLocaleDateString()}`:"All Time";return e.jsxs(L,{user:j.user,header:e.jsx("div",{className:"flex items-center justify-between py-2",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(P,{size:20,className:"cursor-pointer text-gray-600 hover:text-gray-800",onClick:()=>window.history.back(),title:"Back"}),e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Supplier Ledger"})]})}),children:[e.jsx(A,{title:"Supplier Ledger"}),e.jsx("style",{children:`
                    @media print {
                        .no-print, nav, aside, .fixed, .toastify-container, .ConfirmModal {
                            display: none !important;
                        }
                        .sm\\:ml-64 {
                            margin-left: 0 !important;
                        }
                        .page-break {
                            page-break-before: always;
                        }
                    }
                `}),e.jsxs("div",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6 no-print",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Filter by Date Range"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 items-end",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Date"}),e.jsx("input",{type:"date",value:s,onChange:t=>x(t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-black"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Date"}),e.jsx("input",{type:"date",value:a,onChange:t=>m(t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-black"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:w,className:"bg-black text-white px-4 py-2 rounded hover:bg-black transition duration-300",children:"Apply Filter"}),e.jsx("button",{onClick:D,className:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600 transition duration-300",children:"Clear"})]})]})]}),e.jsxs("div",{className:"flex justify-end mb-4 no-print",children:[e.jsx("button",{onClick:()=>window.history.back(),className:"bg-red-500 text-white py-2 px-4 rounded shadow hover:bg-red-600 transition duration-300",children:"Close"}),e.jsx("button",{onClick:()=>window.print(),className:"ml-2 bg-black text-white py-2 px-4 rounded shadow hover:bg-gray-600 transition duration-300",children:"Print PDF"})]}),e.jsxs("div",{className:"max-w-10xl mx-auto p-6 bg-white rounded shadow-sm my-6",children:[e.jsxs("div",{className:"grid grid-cols-2 items-center",children:[e.jsx("div",{children:e.jsx("img",{src:v.site_logo||"/images/logo2.png",alt:"Company Logo",className:"h-16"})}),e.jsxs("div",{className:"text-right",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Supplier Ledger"}),e.jsxs("p",{className:"text-gray-500",children:["Generated on: ",new Date().toLocaleDateString()]}),e.jsx("p",{className:"text-gray-500",children:S()})]})]}),e.jsxs("div",{className:"mt-8",children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:"Supplier Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Name:"})," ",n.person_name||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Email:"})," ",n.email||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Code:"})," ",n.code||"N/A"]})]}),e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Phone:"})," ",n.contact||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Address:"})," ",n.address||"N/A"]})]})]})]}),e.jsxs("div",{className:"mt-8",children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:"Opening Balance"}),e.jsxs("p",{children:["Rs. ",Number(c).toFixed(2)]})]}),e.jsxs("div",{className:"mt-8",children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:"Transactions"}),o.length>0?e.jsxs("table",{className:"min-w-full bg-white border border-gray-300",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{className:"py-2 px-4 border-b text-left",children:"Date"}),e.jsx("th",{className:"py-2 px-4 border-b text-left",children:"Invoice #"}),e.jsx("th",{className:"py-2 px-4 border-b text-left",children:"Debit (Dr)"}),e.jsx("th",{className:"py-2 px-4 border-b text-left",children:"Credit (Cr)"}),e.jsx("th",{className:"py-2 px-4 border-b text-left",children:"Dr or Cr"}),e.jsx("th",{className:"py-2 px-4 border-b text-left",children:"Balance"})]})}),e.jsx("tbody",{children:o.map((t,l)=>{const d=Number(t.total_payment||0),h=Number(t.paid_amount||0);i+=d-h;const k=i>=0?"Dr":"Cr";return e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsx("td",{className:"py-2 px-4",children:t.invoice_date||"N/A"}),e.jsx("td",{className:"py-2 px-4",children:t.invoice_no||"N/A"}),e.jsxs("td",{className:"py-2 px-4",children:["Rs. ",d.toFixed(2)]}),e.jsxs("td",{className:"py-2 px-4",children:["Rs. ",h.toFixed(2)]}),e.jsx("td",{className:"py-2 px-4",children:k}),e.jsxs("td",{className:"py-2 px-4",children:["Rs. ",Math.abs(i).toFixed(2)]})]},l)})})]}):e.jsx("div",{className:"text-center py-8 text-gray-500",children:e.jsx("p",{children:"No transactions found for the selected date range."})})]}),e.jsxs("div",{className:"mt-8",children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:"Summary"}),e.jsx("table",{className:"min-w-full bg-white border border-gray-300",children:e.jsx("tbody",{children:[{label:"Total Payable",value:u},{label:"Total Paid",value:y},{label:"Total Pending",value:N},{label:"Total Adjustments",value:f},{label:"Closing Balance",value:i}].map((t,l)=>e.jsxs("tr",{children:[e.jsx("th",{className:"py-2 px-4 border-b text-left",children:t.label}),e.jsxs("td",{className:"py-2 px-4 border-b text-right",children:["Rs. ",Number(t.value).toFixed(2)]})]},l))})})]}),e.jsxs("div",{className:"border-t-2 pt-4 text-xs text-gray-500 text-center mt-16",children:["Developed by ",e.jsx("strong",{children:"Solinvo"}),e.jsx("span",{className:"mx-1",children:"â€¢"}),e.jsx("a",{href:"https://solinvo.com",target:"_blank",className:"hover:underline",children:"Powered by VertexInvo"}),e.jsx("br",{}),e.jsxs("p",{children:[e.jsx("strong",{children:"Printed on:"})," ",new Date().toLocaleString()]})]})]})]})]})}export{E as default};
