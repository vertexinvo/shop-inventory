import{r as l,j as e,Y as _,y as d}from"./app-Cd5YvKF2.js";import{F as S,a as q,b as r,E as a}from"./formik.esm-BSSXuZgH.js";import{c as C,a as u,d as F,b as h}from"./index.esm-DkWLlgaM.js";import{A as R}from"./AuthenticatedLayout-BtjskZ7W.js";import{a as b}from"./Modal-BME9uPis.js";import"./ReactToastify-BzYKp5dE.js";import{S as E,a as I}from"./SupplierinvoiceForm-dcJ1-BMX.js";import"./transition-BLUlTtuI.js";import"./proxy-BmsaCjU_.js";import"./index-BvJ6ypIn.js";function G(y){const{auth:j,suppliers:v,supplierinvoices:m,product_id:i}=y,[f,n]=l.useState(!1),[N,o]=l.useState(!1),[c,g]=l.useState(!1),[A,k]=l.useState("");return e.jsxs(R,{tax:j.tax,header:!0,children:[e.jsx(_,{title:"Add Stocklog"}),e.jsx("div",{className:"flex flex-col px-4 mt-10 mx-auto w-full",children:e.jsx("div",{className:"w-full",children:e.jsx("div",{className:"font-sans antialiased bg-grey-lightest",children:e.jsx("div",{className:"w-full bg-grey-lightest",children:e.jsx("div",{className:"container mx-auto py-3 px-5",children:e.jsx("div",{className:"w-full lg:w-full mx-auto bg-white rounded shadow",children:e.jsx(S,{enableReinitialize:!0,initialValues:{quantity:"",type:"",is_supplier:"0",supplier_invoice_no:"",remarks:"",datetime:"",supplier_invoice_no:"",product_id:i,purchase_price:""},validationSchema:C({quantity:u().min(1).required("Quantity is required"),type:h().required("Type is required"),is_supplier:h().required("Is supplier is required"),datetime:F().required("Date is required"),purchase_price:u().when("type",{is:"removal",then:t=>t.optional(),otherwise:t=>t.required()})}),onSubmit:(t,{setSubmitting:w,resetForm:p})=>{d.post(route("stocklog.store"),t,{onSuccess:()=>p()})},children:({values:t,errors:w,touched:p,setFieldValue:x,isSubmitting:M})=>e.jsx(q,{children:e.jsxs("div",{className:"py-4 px-8",children:[e.jsxs("div",{className:"flex mb-4",children:[e.jsxs("div",{className:"w-1/2 mr-1",children:[e.jsx("label",{className:"block text-grey-darker text-sm font-bold mb-2",htmlFor:"area_name",children:"Quantity"}),e.jsx(r,{name:"quantity",className:"appearance-none border rounded w-full py-2 px-3   focus:ring-black focus:border-black text-grey-darker",id:"quantity",type:"number",placeholder:"Enter quantity"}),e.jsx(a,{name:"quantity",component:"div",className:"text-red-500 text-xs mt-1"})]}),e.jsxs("div",{className:"w-1/2 ml-1",children:[e.jsx("label",{className:"block text-grey-darker text-sm font-bold mb-2",htmlFor:"postal_code",children:"Type"}),e.jsxs(r,{name:"type",className:"appearance-none border rounded w-full py-2 px-3   focus:ring-black focus:border-black text-grey-darker",id:"type",as:"select",children:[e.jsx("option",{value:"",children:"Select Type"}),e.jsx("option",{value:"addition",children:"Addition"}),e.jsx("option",{value:"removal",children:"Removal"}),e.jsx("option",{value:"adjustment",children:"Adjustment"})]}),e.jsx(a,{name:"type",component:"div",className:"text-red-500 text-xs mt-1"})]})]}),t.type!=="removal"&&t.type!==""&&e.jsx("div",{className:"flex mb-4",children:e.jsxs("div",{className:"w-full mr-1",children:[e.jsx("label",{className:"block text-grey-darker text-sm font-bold mb-2",htmlFor:"postal_code",children:"Purchase Price (Required)"}),e.jsx(r,{name:"purchase_price",className:"appearance-none border rounded w-full py-2 px-3   focus:ring-black focus:border-black text-grey-darker",id:"purchase_price",type:"number",step:"any",placeholder:"Enter Purchase Price"}),e.jsx(a,{name:"purchase_price",component:"div",className:"text-red-500 text-xs mt-1"})]})}),e.jsxs("div",{className:"flex mb-4",children:[e.jsxs("div",{className:"w-1/2 mr-1",children:[e.jsx("label",{className:"block text-grey-darker text-sm font-bold mb-2",htmlFor:"area_name",children:"Date/Time"}),e.jsx(r,{name:"datetime",className:"appearance-none border rounded w-full py-2 px-3   focus:ring-black focus:border-black text-grey-darker",id:"datetime",type:"datetime-local",placeholder:"Enter Date/Time"}),e.jsx(a,{name:"datetime",component:"div",className:"text-red-500 text-xs mt-1"})]}),e.jsxs("div",{className:"w-1/2 ml-1",children:[e.jsx("label",{className:"block text-grey-darker text-sm font-bold mb-2",htmlFor:"postal_code",children:"Remarks (Optional)"}),e.jsx(r,{name:"remarks",className:"appearance-none border rounded w-full py-2 px-3   focus:ring-black focus:border-black text-grey-darker",id:"remarks",type:"text",placeholder:"Enter Remarks"}),e.jsx(a,{name:"remarks",component:"div",className:"text-red-500 text-xs mt-1"})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("label",{className:"block text-gray-700 text-sm font-medium mb-3",children:["Supplier ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"flex items-center gap-8",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx(r,{name:"is_supplier",type:"radio",value:"1",className:"mr-2 focus:ring-cyan-500 text-cyan-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Yes"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx(r,{name:"is_supplier",type:"radio",value:"0",className:"mr-2 focus:ring-cyan-500 text-cyan-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"No"})]})]}),e.jsx(a,{name:"is_supplier",component:"div",className:"text-red-500 text-xs mt-1"})]}),t.is_supplier==="1"&&e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-medium",children:"Supplier Invoice No"}),e.jsx("button",{type:"button",onClick:()=>{g(!c),x("supplier_invoice_no","")},className:"text-cyan-600 text-sm font-medium hover:text-cyan-800 transition underline",children:c?"Remember":"Not remember?"})]}),c?e.jsxs(e.Fragment,{children:[e.jsxs("select",{onChange:s=>{x("supplier_invoice_no",""),k(s.target.value),d.get(route("stocklog.create",{product_id:i}),{supplier_id:s.target.value},{preserveState:!0,preserveScroll:!0})},className:"appearance-none border border-gray-300 rounded-lg w-full py-3 px-4 text-gray-700 focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 transition duration-200 bg-white shadow-sm",id:"supplier_invoice_no",children:[e.jsx("option",{value:"",children:"Select supplier"}),v.map(s=>e.jsx("option",{value:s.id,children:s.person_name+" - "+s.code+" - "+s.contact},s.id))]}),m.length>0&&e.jsxs(r,{as:"select",name:"supplier_invoice_no",className:"mt-3 appearance-none border border-gray-300 rounded-lg w-full py-3 px-4 text-gray-700 focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 transition duration-200 bg-white shadow-sm",id:"supplier_invoice_no",children:[e.jsx("option",{value:"",children:"Select supplier invoice no"}),m.map(s=>e.jsx("option",{value:s.invoice_no,children:s.invoice_no},s.id))]})]}):e.jsx(r,{name:"supplier_invoice_no",className:"appearance-none border border-gray-300 rounded-lg w-full py-3 px-4 text-gray-700 focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 transition duration-200 bg-white shadow-sm",id:"supplier_invoice_no",type:"text",placeholder:"Enter supplier invoice no"}),e.jsx(a,{name:"supplier_invoice_no",component:"div",className:"text-red-500 text-xs mt-1"}),e.jsxs("div",{className:"flex items-center gap-4 mt-3",children:[e.jsx("button",{type:"button",onClick:()=>o(!0),className:"text-cyan-600 text-sm font-medium hover:text-cyan-800 transition underline",children:"Create new invoice"}),e.jsx("button",{type:"button",onClick:()=>n(!0),className:"text-cyan-600 text-sm font-medium hover:text-cyan-800 transition underline",children:"Create new supplier"})]})]}),e.jsxs("div",{className:"flex items-center justify-start gap-1 mt-8",children:[e.jsx("button",{className:"bg-black hover:bg-blue-dark text-white font-bold py-2 px-4 rounded-lg",type:"submit",children:"Save"}),e.jsx("button",{onClick:()=>d.get(route("stock.index"),{product_id:i}),className:"bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-lg",type:"button",children:"Close"})]})]})})})})})})})})}),e.jsx(b,{show:f,onClose:()=>n(!1),children:e.jsxs("div",{className:"overflow-y-auto max-h-[80vh]",children:[e.jsx("div",{className:"flex justify-center p-10",children:e.jsx("div",{className:"text-2xl font-medium text-[#5d596c] ",children:"Create New Supplier"})}),e.jsx("div",{className:"px-10 mb-5",children:e.jsx(E,{codeRoute:"stocklog.create",id:{product_id:i},setIsNewSupplierModel:n})})]})}),e.jsx(b,{show:N,onClose:()=>o(!1),children:e.jsxs("div",{className:"overflow-y-auto max-h-[80vh]",children:[e.jsx("div",{className:"flex justify-center p-10",children:e.jsx("div",{className:"text-2xl font-medium text-[#5d596c] ",children:"Create New Invoice"})}),e.jsx("div",{className:"px-10 mb-5",children:e.jsx(I,{codeRoute:"stocklog.create",id:{product_id:i},setIsNewSupplierInvoiceModel:o})})]})})]})}export{G as default};
