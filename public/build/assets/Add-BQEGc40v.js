import{r as c,j as e,Y as V,y as d}from"./app-ECui-WIN.js";import{F as I,a as ee,b as l,E as o}from"./formik.esm-CrYRcLNO.js";import{A as te}from"./AuthenticatedLayout-Bjku1LWC.js";import{c as ae,b as h,d as se,e as n,a as r,f as re}from"./index.esm-D3vTz9ai.js";import{S as K}from"./react-select.esm-D4BUJK8w.js";import"./quill.snow-Bv3cjzr8.js";import"./ReactToastify-CRZUMS8j.js";import"./transition-zZzGSTk9.js";import"./Modal-CubxBUkJ.js";function pe(X){const{auth:ne,users:u,items:p}=X,[Z,b]=c.useState(!1),[F,j]=c.useState(!1),[t,m]=c.useState(null);return e.jsxs(te,{header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Add Order"}),children:[e.jsx(V,{title:"Order"}),e.jsx("div",{className:"flex flex-col px-4  mt-10 mx-auto w-full",children:e.jsx("div",{className:"w-full ",children:e.jsx("div",{className:"font-sans antialiased bg-grey-lightest",children:e.jsx("div",{className:"w-full bg-grey-lightest",children:e.jsx("div",{className:"container mx-auto py-3 px-5",children:e.jsx("div",{className:"w-full lg:w-full mx-auto bg-white rounded shadow p-10",children:e.jsx(I,{enableReinitialize:!0,initialValues:{name:"",email:"",phone:"",address:"",total:0,payable_amount:0,paid_amount:0,method:"",cheque_no:"",cheque_date:"",status:"completed",bank_name:"",bank_branch:"",bank_account:"",online_payment_link:"",extra_charges:0,shipping_charges:0,discount:0,tax:0,is_installment:!1,installment_amount:0,installment_period:"",installment_count:0,installment_start_date:"",installment_end_date:"",user_id:"",items:[]},validationSchema:ae({name:r().required("Name is required"),email:r().email("Invalid email address").required("Email is required"),phone:r().max(15,"Phone number must be at most 15 digits").min(10,"Phone number must be at least 10 digits").required("Phone is required"),address:r().required("Address is required"),total:n().min(0,"Total must be a positive number").required("Total is required"),payable_amount:n().min(0,"Payable amount must be a positive number").required("Payable amount is required"),paid_amount:n().min(0,"Paid amount must be a positive number").required("Paid amount is required"),method:r().required("Payment method is required"),cheque_no:r().when("method",{is:"cheque",then:a=>a.required(),otherwise:a=>a.optional()}),cheque_date:h().when("method",{is:"cheque",then:a=>a.required(),otherwise:a=>a.optional()}),bank_name:r().when("method",{is:"bank",then:a=>a.required(),otherwise:a=>a.optional()}),bank_branch:r().when("method",{is:"bank",then:a=>a.required(),otherwise:a=>a.optional()}),bank_account:r().when("method",{is:"bank",then:a=>a.required(),otherwise:a=>a.optional()}),online_payment_link:r().url("Invalid URL"),extra_charges:n().min(0,"Extra charges must be a positive number"),shipping_charges:n().min(0,"Shipping charges must be a positive number"),discount:n().min(0,"Discount must be a positive number"),tax:n().min(0,"Tax must be a positive number"),status:r().oneOf(["pending","completed","cancelled"],"Invalid status").required("Status is required"),is_installment:re(),installment_amount:n().when("is_installment",{is:!0,then:a=>a.number().min(0,"Installment amount must be a positive number").required("Installment amount is required"),otherwise:a=>a.optional()}),installment_period:r().when("is_installment",{is:!0,then:a=>a.string().required("Installment period is required"),otherwise:a=>a.optional()}),installment_count:n().when("is_installment",{is:!0,then:a=>a.number().min(1,"Installment count must be at least 1").required("Installment count is required"),otherwise:a=>a.optional()}),installment_start_date:h().when("is_installment",{is:!0,then:a=>a.date().required("Installment start date is required"),otherwise:a=>a.optional()}),installment_end_date:h().when("is_installment",{is:!0,then:a=>a.date().min(se("installment_start_date"),"End date must be after start date").required("Installment end date is required"),otherwise:a=>a.optional()})}),onSubmit:(a,{setSubmitting:x,resetForm:g})=>{d.post(route("supplier.store"),a,{onSuccess:()=>{g()},preserveScroll:!0,preserveState:!0})},children:({isSubmitting:a,values:x,errors:g,setFieldValue:i})=>{var y,v,_,f,k,N,w,q,S,C,P,E,A,$,L,T,M,O,R,B,Q,z,D,U,W,Y,G,H,J;return e.jsxs(ee,{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-grey-darker text-sm  mb-2",for:"shop_name",children:"Select Customer (Existing)"}),e.jsx(K,{onChange:s=>{i("user_id",s.value),i("name",s.name),i("email",s.email),i("phone",s.phone),i("address",s.address)},onInputChange:s=>{b(!0),setTimeout(()=>{d.get(route("order.create"),{searchuser:s},{preserveScroll:!0,preserveState:!0}),b(!1)},1e3)},isSearchable:!0,isLoading:Z,value:u.find(s=>s.value===x.user_id),options:u,className:"basic-single",classNamePrefix:"select"})]}),e.jsxs("div",{className:"flex mb-4",children:[e.jsxs("div",{className:"w-1/2 mr-1",children:[e.jsx("label",{className:"block text-grey-darker text-sm  mb-2",children:"Customer Name"}),e.jsx(l,{name:"name",className:"appearance-none border rounded w-full py-2 px-3 text-grey-darker",type:"text",placeholder:"Enter Customer name"}),e.jsx(o,{name:"name",component:"div",className:"text-red-500 text-xs mt-1"})]}),e.jsxs("div",{className:"w-1/2 mr-1",children:[e.jsx("label",{className:"block text-grey-darker text-sm  mb-2",children:"Customer Email"}),e.jsx(l,{name:"email",className:"appearance-none border rounded w-full py-2 px-3 text-grey-darker",type:"text",placeholder:"Enter Customer email"}),e.jsx(o,{name:"email",component:"div",className:"text-red-500 text-xs mt-1"})]})]}),e.jsxs("div",{className:"flex mb-4",children:[e.jsxs("div",{className:"w-1/2 mr-1",children:[e.jsx("label",{className:"block text-grey-darker text-sm  mb-2",children:"Customer Phone"}),e.jsx(l,{name:"phone",className:"appearance-none border rounded w-full py-2 px-3 text-grey-darker",type:"text",placeholder:"Enter Customer phone"}),e.jsx(o,{name:"phone",component:"div",className:"text-red-500 text-xs mt-1"})]}),e.jsxs("div",{className:"w-1/2 mr-1",children:[e.jsx("label",{className:"block text-grey-darker text-sm  mb-2",children:"Customer Address"}),e.jsx(l,{name:"address",className:"appearance-none border rounded w-full py-2 px-3 text-grey-darker",type:"text",placeholder:"Enter Customer address"}),e.jsx(o,{name:"address",component:"div",className:"text-red-500 text-xs mt-1"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-grey-darker text-sm  mb-2",for:"shop_name",children:"Select Payment Method"}),e.jsxs(l,{name:"method",className:"appearance-none border rounded w-full py-2 px-3 text-grey-darker",as:"select",children:[e.jsx("option",{value:"",children:"Select Payment Method"}),e.jsx("option",{value:"cash",children:"Cash"}),e.jsx("option",{value:"bank",children:"Bank Transfer"}),e.jsx("option",{value:"cheque",children:"Cheque"}),e.jsx("option",{value:"online",children:"Online"})]}),e.jsx(o,{name:"method",component:"div",className:"text-red-500 text-xs mt-1"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-grey-darker text-sm  mb-2",for:"shop_name",children:"Select Status"}),e.jsxs(l,{name:"status",className:"appearance-none border rounded w-full py-2 px-3 text-grey-darker",as:"select",children:[e.jsx("option",{value:"",children:"Select Status"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"completed",children:"Completed"})]}),e.jsx(o,{name:"status",component:"div",className:"text-red-500 text-xs mt-1"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-grey-darker text-sm  mb-2",for:"shop_name",children:"Select Items"}),e.jsx(K,{onChange:s=>{m(s)},onInputChange:s=>{j(!0),setTimeout(()=>{d.get(route("order.create"),{searchitem:s},{preserveScroll:!0,preserveState:!0}),j(!1)},1e3)},isSearchable:!0,isLoading:F,value:p.find(s=>s.value===(t==null?void 0:t.value)),options:p,className:"basic-single",classNamePrefix:"select"})]}),t&&e.jsxs("div",{className:"flex  ",children:[e.jsx("div",{className:"w-1/2 mr-1",children:e.jsx("input",{type:"number",value:t==null?void 0:t.quantity,onChange:s=>m({...t,quantity:s.target.value}),placeholder:"Enter Quantity",className:"appearance-none border rounded w-full py-2 px-3 text-grey-darker"})}),e.jsx("div",{className:"w-1/2 mr-1",children:e.jsx("button",{onClick:()=>{m(null),i("items",[...x.items,t])},className:"bg-black text-sm hover:bg-blue-dark text-white font-bold py-[11px] px-4  rounded-lg",type:"button",children:"Add Item"})})]}),t&&e.jsx("div",{className:"mb-2",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsx("div",{class:"font-[sans-serif] overflow-x-auto",children:e.jsxs("table",{class:"min-w-full bg-white",children:[e.jsx("thead",{class:"whitespace-nowrap",children:e.jsxs("tr",{children:[e.jsx("th",{class:"p-4 text-left text-sm font-semibold text-black",children:"Product Info"}),e.jsx("th",{class:"p-4 text-left text-sm font-semibold text-black",children:"Purchase price"}),e.jsx("th",{class:"p-4 text-left text-sm font-semibold text-black",children:"Selling price"}),e.jsx("th",{class:"p-4 text-left text-sm font-semibold text-black",children:"Warranty period"}),e.jsx("th",{class:"p-4 text-left text-sm font-semibold text-black",children:"Is Borrow"}),e.jsx("th",{class:"p-4 text-left text-sm font-semibold text-black",children:"Stock  Quantity"}),e.jsx("th",{class:"p-4 text-left text-sm font-semibold text-black",children:"Stock Status"}),e.jsx("th",{class:"p-4 text-left text-sm font-semibold text-black",children:"Supplier Invoice"})]})}),e.jsx("tbody",{class:"whitespace-nowrap",children:e.jsxs("tr",{class:"odd:bg-gray-50",children:[e.jsx("td",{class:" text-sm",children:e.jsx("div",{class:"flex items-center cursor-pointer w-max",children:e.jsxs("div",{class:"ml-4 ",children:[e.jsxs("p",{class:"text-sm text-black ",children:["Name : ",(y=t==null?void 0:t.data)==null?void 0:y.name]}),((v=t==null?void 0:t.data)==null?void 0:v.model)&&e.jsxs("p",{class:"text-xs text-gray-500 mt-0.5",children:["Model :",(_=t==null?void 0:t.data)==null?void 0:_.model," "]}),((f=t==null?void 0:t.data)==null?void 0:f.identity_type)!=="none"&&e.jsxs("p",{class:"text-xs text-gray-500 mt-0.5",children:[(k=t==null?void 0:t.data)==null?void 0:k.identity_type,":",(N=t==null?void 0:t.data)==null?void 0:N.identity_value," "]})]})})}),e.jsx("td",{class:"p-4 text-sm text-black",children:((w=t==null?void 0:t.data)==null?void 0:w.purchase_price)||"N/A"}),e.jsx("td",{class:"p-4 text-sm text-black",children:((q=t==null?void 0:t.data)==null?void 0:q.selling_price)||"N/A"}),e.jsxs("td",{class:"p-4 text-sm text-black",children:[((S=t==null?void 0:t.data)==null?void 0:S.is_warranty)=="0"&&e.jsx("p",{class:"text-xs text-gray-500 mt-0.5",children:"No"}),((C=t==null?void 0:t.data)==null?void 0:C.is_warranty)=="1"&&e.jsxs("p",{class:"text-xs text-gray-500 mt-0.5",children:[(P=t==null?void 0:t.data)==null?void 0:P.warranty_period," - ",(E=t==null?void 0:t.data)==null?void 0:E.warranty_type," "]})]}),e.jsxs("td",{class:"p-4 text-sm text-black",children:[((A=t==null?void 0:t.data)==null?void 0:A.is_borrow)=="0"&&e.jsx("p",{class:"text-xs text-gray-500 mt-0.5",children:"No"}),(($=t==null?void 0:t.data)==null?void 0:$.is_borrow)=="1"&&e.jsx("p",{class:"text-xs text-gray-500 mt-0.5",children:e.jsxs("ul",{class:"list-disc",children:[((L=t==null?void 0:t.data)==null?void 0:L.shop_name)&&e.jsxs("li",{children:["Name: ",(T=t==null?void 0:t.data)==null?void 0:T.shop_name]}),((M=t==null?void 0:t.data)==null?void 0:M.shop_address)&&e.jsxs("li",{children:["Address: ",(O=t==null?void 0:t.data)==null?void 0:O.shop_address]}),((R=t==null?void 0:t.data)==null?void 0:R.shop_phone)&&e.jsxs("li",{children:["Phone: ",(B=t==null?void 0:t.data)==null?void 0:B.shop_phone]}),((Q=t==null?void 0:t.data)==null?void 0:Q.shop_email)&&e.jsxs("li",{children:["Email: ",(z=t==null?void 0:t.data)==null?void 0:z.shop_email]})]})})]}),e.jsx("td",{class:"p-4 text-sm text-black",children:((U=(D=t==null?void 0:t.data)==null?void 0:D.stock)==null?void 0:U.quantity)||0}),e.jsx("td",{class:"p-4",children:(Y=(W=t==null?void 0:t.data)==null?void 0:W.stock)!=null&&Y.status?e.jsx("p",{class:"text-xs text-gray-500 mt-0.5",children:"Available"}):e.jsx("p",{class:"text-xs text-gray-500 mt-0.5",children:"Not Available"})}),e.jsxs("td",{class:"p-4 text-sm text-black",children:[((G=t==null?void 0:t.data)==null?void 0:G.is_supplier)=="0"&&e.jsx("p",{class:"text-xs text-gray-500 mt-0.5",children:"No"}),((H=t==null?void 0:t.data)==null?void 0:H.is_supplier)=="1"&&e.jsx("p",{class:"text-xs text-gray-500 mt-0.5",children:(J=t==null?void 0:t.data)==null?void 0:J.supplier_invoice_no})]})]})})]})})})}),e.jsxs("div",{className:"flex items-center justify-start gap-1 mt-8",children:[e.jsx("button",{className:"bg-black hover:bg-blue-dark text-white font-bold py-2 px-4 rounded-lg",type:"submit",children:"Submit"}),e.jsx("button",{onClick:()=>d.visit(route("order.index")),className:"bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-lg",type:"button",children:"Close"})]})]})}})})})})})})})]})}export{pe as default};
