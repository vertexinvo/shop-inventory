import{r as h,j as e,Y as Me,y as g}from"./app-CMALAAzM.js";import{F as $e,a as Oe,b as c,E as d}from"./formik.esm-BBtx1e5e.js";import{F as fe}from"./index-BlglaicJ.js";import{a as Be,M as Qe}from"./index-alrF-aoS.js";import{A as De}from"./AuthenticatedLayout-DrKXW_4j.js";import{c as Le,b as p,d as k,e as ze,f as Re,a as b,g as Fe}from"./index.esm-BRMRd0d7.js";import{S as q}from"./react-select.esm-THdVXhJj.js";import"./quill.snow-BcF21TqB.js";import{B as j}from"./ReactToastify-B5_IA0p0.js";import"./transition-CLNGON7_.js";import"./Modal-D_xRho2Q.js";import"./defineProperty-DJACW-dl.js";import"./typeof-QjJsDpFa.js";function lt(ke){const{auth:Ke,users:S,items:C,order_id:Ne,taxs:E,shippingrates:_e,order:t,default_selected_shippingrate:ve}=ke,[we,P]=h.useState(!1),[qe,A]=h.useState(!1),[s,N]=h.useState(null),[Se,Ce]=h.useState(ve||null),[Ee,T]=h.useState(!1),[i,u]=h.useState(null),_={control:(l,n)=>({...l,borderColor:n.isFocused?"black":l.borderColor,boxShadow:n.isFocused?"0 0 0 1px black":l.boxShadow,"&:hover":{borderColor:n.isFocused?"black":l.borderColor}})};console.log(t);const[Pe,Ue]=h.useState((t==null?void 0:t.items.map(l=>{var n,y;return{value:l.product_id,data:l==null?void 0:l.product,quantity:l.qty,label:((n=l==null?void 0:l.product)==null?void 0:n.name)+" - "+((y=l==null?void 0:l.product)==null?void 0:y.model)}}))||[]);return e.jsxs(De,{header:e.jsxs(e.Fragment,{children:[e.jsx(Qe,{size:20,className:"mr-2 cursor-pointer",onClick:()=>g.get(route("order.index")),title:"Back"}),e.jsxs("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:[" ",t?"Edit Order":"Add Order"]})]}),children:[e.jsx(Me,{title:"Order"}),e.jsx($e,{enableReinitialize:!0,initialValues:{name:(t==null?void 0:t.name)||"",email:(t==null?void 0:t.email)||"",phone:(t==null?void 0:t.phone)||"",address:(t==null?void 0:t.address)||"",total:(t==null?void 0:t.total)||0,payable_amount:(t==null?void 0:t.payable_amount)||0,paid_amount:(t==null?void 0:t.paid_amount)||0,method:(t==null?void 0:t.method)||"",cheque_no:(t==null?void 0:t.cheque_no)||"",cheque_date:(t==null?void 0:t.cheque_date)||"",status:(t==null?void 0:t.status)||"completed",bank_name:(t==null?void 0:t.bank_name)||"",bank_branch:(t==null?void 0:t.bank_branch)||"",bank_account:(t==null?void 0:t.bank_account)||"",online_payment_link:(t==null?void 0:t.online_payment_link)||"",extra_charges:parseFloat(t==null?void 0:t.extra_charges)||0,shipping_charges:parseFloat(t==null?void 0:t.shipping_charges)||0,discount:parseFloat(t==null?void 0:t.discount)||0,tax:(t==null?void 0:t.tax_fee)||0,is_installment:(t==null?void 0:t.is_installment)===!0&&"1"||"0",installment_amount:(t==null?void 0:t.installment_amount)||0,installment_period:(t==null?void 0:t.installment_period)||"",installment_count:(t==null?void 0:t.installment_count)||0,installment_start_date:(t==null?void 0:t.installment_start_date)||"",installment_end_date:(t==null?void 0:t.installment_end_date)||"",user_id:(t==null?void 0:t.user_id)||"",items:Pe||[],tax_id:(t==null?void 0:t.tax_id)||"",shipping_id:(t==null?void 0:t.shipping_id)||"",order_date:(t==null?void 0:t.order_date)||new Date().toISOString().slice(0,10),close:!1,exchange_items:(t==null?void 0:t.exchange_items)||[],exchange:(t==null?void 0:t.exchange)||0},validationSchema:Le({name:b().required("Name is required"),email:b().email("Invalid email address"),phone:b().max(15,"Phone number must be at most 15 digits").min(10,"Phone number must be at least 10 digits"),address:b(),total:p().min(0,"Total must be a positive number").required("Total is required"),payable_amount:p().min(0,"Payable amount must be a positive number").required("Payable amount is required"),paid_amount:p().min(0,"Paid amount must be a positive number").required("Paid amount is required"),method:b().required("Payment method is required"),cheque_no:b().when("method",{is:"cheque",then:l=>l.required(),otherwise:l=>l.optional()}),cheque_date:k().when("method",{is:"cheque",then:l=>l.required(),otherwise:l=>l.optional()}),bank_name:b().when("method",{is:"bank",then:l=>l.required(),otherwise:l=>l.optional()}),bank_branch:b().when("method",{is:"bank",then:l=>l.required(),otherwise:l=>l.optional()}),bank_account:b().when("method",{is:"bank",then:l=>l.required(),otherwise:l=>l.optional()}),online_payment_link:b().url("Invalid URL"),extra_charges:p().min(0,"Extra charges must be a positive number"),discount:p().min(0,"Discount must be a positive number"),tax:p().min(0,"Tax must be a positive number"),status:b().oneOf(["pending","completed","cancelled"],"Invalid status").required("Status is required"),is_installment:Fe(),installment_amount:p().when("is_installment",{is:!0,then:l=>l.min(0,"Installment amount must be a positive number").required("Installment amount is required"),otherwise:l=>l.optional()}),installment_period:b().when("is_installment",{is:!0,then:l=>l.required("Installment period is required"),otherwise:l=>l.optional()}),installment_count:p().when("is_installment",{is:!0,then:l=>l.min(1,"Installment count must be at least 1").required("Installment count is required"),otherwise:l=>l.optional()}),installment_start_date:k().when("is_installment",{is:!0,then:l=>l.required("Installment start date is required"),otherwise:l=>l.optional()}),installment_end_date:k().when("is_installment",{is:!0,then:l=>l.min(Re("installment_start_date"),"End date must be after start date").required("Installment end date is required"),otherwise:l=>l.optional()}),items:ze().min(1,"At least one item is required"),order_date:k().required("Order date is required"),paid_amount:p().min(0,"Paid amount must be a positive number").required("Paid amount is required")}),onSubmit:(l,{setSubmitting:n,resetForm:y})=>{t?g.put(route("order.update",t.id),l,{preserveScroll:!0,preserveState:!0}):g.post(route("order.store"),l,{onSuccess:()=>{y()},preserveScroll:!0,preserveState:!0})},children:({isSubmitting:l,values:n,errors:y,setFieldValue:o,handleSubmit:M})=>{var $,O,B,Q,D,L,z,R,F,K,U,Y,G,W,H,J,X,Z,I,V,ee,te,ae,se,le,ne,re,ie,ce;h.useEffect(()=>{const a=n.items.reduce((x,m)=>x+m.quantity*m.data.selling_price,0),r=parseFloat(n.discount||0);o("total",a),o("payable_amount",a-(r+n.exchange))},[n.items,n.discount,o,n.exchange]);const Ae=()=>{o("close",!0),M()},Te=()=>{o("close",!1),M()};return h.useEffect(()=>{(n.paid_amount===0||n.paid_amount<n.payable_amount)&&o("paid_amount",n.payable_amount)},[n.payable_amount,n.tax_id,n.shipping_id]),h.useEffect(()=>{if(n.exchange_items.length>0){const a=n.exchange_items.reduce((r,x)=>r+x.quantity*x.purchase_price,0);o("exchange",a)}},[n.exchange_items]),e.jsx(Oe,{children:e.jsxs("div",{className:"grid grid-cols-3 gap-1",children:[e.jsxs("div",{className:`w-full ${n.items.length>0?"col-span-2":"col-span-3"}`,children:[e.jsx("div",{className:"font-sans antialiased bg-grey-lightest",children:e.jsx("div",{className:"w-full bg-grey-lightest",children:e.jsx("div",{className:"container mx-auto py-3 px-5",children:e.jsxs("div",{className:"w-full lg:w-full mx-auto bg-white rounded shadow p-10",children:[e.jsxs("div",{className:"w-full flex items-center justify-between mb-5",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("label",{className:"block text-grey-darker text-lg font-bold",children:["Order#",Ne]}),e.jsx(c,{name:"order_date",type:"date",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-black focus:border-black block w-full p-2.5"})]}),e.jsxs("div",{className:"flex items-center justify-start gap-1 ",children:[!t&&e.jsx("button",{onClick:Te,className:"bg-black hover:bg-blue-dark text-white font-bold py-2 px-4 rounded-lg",type:"button",children:"Save"}),e.jsx("button",{onClick:Ae,className:"bg-black hover:bg-blue-dark text-white font-bold py-2 px-4 rounded-lg",type:"button",children:"Save & Close"}),e.jsx("button",{onClick:()=>g.visit(route("order.index")),className:"bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-lg",type:"button",children:"Close"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-grey-darker text-sm  mb-2",for:"shop_name",children:"Select Customer (Existing)"}),e.jsx(q,{onChange:a=>{o("user_id",a.value),o("name",a.name),o("email",a.email),o("phone",a.phone),o("address",a.address)},onInputChange:a=>{P(!0),setTimeout(()=>{g.get(t?route("order.edit",t.id):route("order.create"),{searchuser:a},{preserveScroll:!0,preserveState:!0}),P(!1)},1e3)},isSearchable:!0,isLoading:we,value:S.find(a=>a.value===n.user_id),options:S,className:"basic-single",classNamePrefix:"select",styles:_})]}),e.jsxs("div",{className:"flex mb-4",children:[e.jsxs("div",{className:"w-1/2 mr-1",children:[e.jsx("label",{className:"block text-grey-darker text-sm  mb-2",children:"Customer Name"}),e.jsx(c,{name:"name",className:"appearance-none border rounded w-full py-2 px-3   focus:ring-black focus:border-black text-grey-darker",type:"text",placeholder:"Enter Customer name"}),e.jsx(d,{name:"name",component:"div",className:"text-red-500 text-xs mt-1"})]}),e.jsxs("div",{className:"w-1/2 mr-1",children:[e.jsx("label",{className:"block text-grey-darker text-sm  mb-2",children:"Customer Email"}),e.jsx(c,{name:"email",className:"appearance-none border rounded w-full py-2 px-3   focus:ring-black focus:border-black text-grey-darker",type:"text",placeholder:"Enter Customer email"}),e.jsx(d,{name:"email",component:"div",className:"text-red-500 text-xs mt-1"})]})]}),e.jsxs("div",{className:"flex mb-4",children:[e.jsxs("div",{className:"w-1/2 mr-1",children:[e.jsx("label",{className:"block text-grey-darker text-sm  mb-2",children:"Customer Phone"}),e.jsx(c,{name:"phone",className:"appearance-none border rounded w-full py-2 px-3   focus:ring-black focus:border-black text-grey-darker",type:"text",placeholder:"Enter Customer phone"}),e.jsx(d,{name:"phone",component:"div",className:"text-red-500 text-xs mt-1"})]}),e.jsxs("div",{className:"w-1/2 mr-1",children:[e.jsx("label",{className:"block text-grey-darker text-sm  mb-2",children:"Customer Address"}),e.jsx(c,{name:"address",className:"appearance-none border rounded w-full py-2 px-3   focus:ring-black focus:border-black text-grey-darker",type:"text",placeholder:"Enter Customer address"}),e.jsx(d,{name:"address",component:"div",className:"text-red-500 text-xs mt-1"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-grey-darker text-sm  mb-2",for:"shop_name",children:"Select Status"}),e.jsxs(c,{name:"status",className:"appearance-none border rounded w-full py-2 px-3   focus:ring-black focus:border-black text-grey-darker",as:"select",children:[e.jsx("option",{value:"",children:"Select Status"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"completed",children:"Completed"})]}),e.jsx(d,{name:"status",component:"div",className:"text-red-500 text-xs mt-1"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-grey-darker text-sm  mb-2",for:"shop_name",children:"Select Items"}),e.jsx(q,{onChange:a=>{N(a)},onInputChange:a=>{A(!0),setTimeout(()=>{g.get(t?route("order.edit",t.id):route("order.create"),{searchitem:a},{preserveScroll:!0,preserveState:!0}),A(!1)},1e3)},isSearchable:!0,isLoading:qe,value:C.find(a=>a.value===(s==null?void 0:s.value)),options:C,className:"basic-single",classNamePrefix:"select",styles:_}),e.jsx(d,{name:"items",component:"div",className:"text-red-500 text-xs mt-1"})]}),s&&e.jsxs("div",{className:"flex  ",children:[e.jsx("div",{className:"w-1/2 mr-1",children:e.jsx("input",{type:"number",value:s==null?void 0:s.quantity,onChange:a=>N({...s,quantity:a.target.value}),placeholder:"Enter Quantity",className:"appearance-none border rounded w-full py-2 px-3   focus:ring-black focus:border-black text-grey-darker"})}),e.jsx("div",{className:"w-1/2 mr-1",children:e.jsx("button",{onClick:()=>{var a,r;if((s==null?void 0:s.quantity)>((r=(a=s==null?void 0:s.data)==null?void 0:a.stock)==null?void 0:r.quantity)){j.error("Quantity exceeds stock quantity");return}if(n.items.find(x=>{var m;return x.data.id===((m=s==null?void 0:s.data)==null?void 0:m.id)})){j.error("Item already added");return}if((s==null?void 0:s.quantity)<=0){j.error("Quantity must be greater than 0");return}N(null),o("items",[...n.items,s])},className:"bg-black text-sm hover:bg-blue-dark text-white font-bold py-[11px] px-4  rounded-lg",type:"button",children:"Add Item"})})]}),s&&e.jsx("div",{className:"my-5",children:e.jsx("div",{className:"",children:e.jsx("div",{class:"font-[sans-serif] ",children:e.jsx("table",{class:"min-w-full bg-white",children:e.jsxs("thead",{class:"whitespace-nowrap",children:[e.jsxs("tr",{class:"odd:bg-gray-50",children:[e.jsx("th",{class:"p-4 text-left text-sm font-semibold text-black",children:"Product Info"}),e.jsx("td",{class:" text-sm",children:e.jsx("div",{class:"flex items-center cursor-pointer w-max",children:e.jsxs("div",{class:"ml-4 ",children:[e.jsxs("p",{class:"text-sm text-black ",children:["Name : ",($=s==null?void 0:s.data)==null?void 0:$.name]}),((O=s==null?void 0:s.data)==null?void 0:O.model)&&e.jsxs("p",{class:"text-xs text-gray-500 mt-0.5",children:["Model :",(B=s==null?void 0:s.data)==null?void 0:B.model," "]}),((Q=s==null?void 0:s.data)==null?void 0:Q.identity_type)!=="none"&&e.jsxs("p",{class:"text-xs text-gray-500 mt-0.5",children:[(D=s==null?void 0:s.data)==null?void 0:D.identity_type,":",(L=s==null?void 0:s.data)==null?void 0:L.identity_value," "]})]})})})]}),e.jsxs("tr",{class:"odd:bg-gray-50",children:[e.jsx("th",{class:"p-4 text-left text-sm font-semibold text-black",children:"Purchase price"}),e.jsx("td",{class:"p-4 text-sm text-black",children:((z=s==null?void 0:s.data)==null?void 0:z.purchase_price)||"N/A"})]}),e.jsxs("tr",{class:"odd:bg-gray-50",children:[e.jsx("th",{class:"p-4 text-left text-sm font-semibold text-black",children:"Selling price"}),e.jsx("td",{class:"p-4 text-sm text-black",children:((R=s==null?void 0:s.data)==null?void 0:R.selling_price)||"N/A"})]}),e.jsxs("tr",{class:"odd:bg-gray-50",children:[e.jsx("th",{class:"p-4 text-left text-sm font-semibold text-black",children:"Warranty period"}),e.jsxs("td",{class:"p-4 text-sm text-black",children:[((F=s==null?void 0:s.data)==null?void 0:F.is_warranty)=="0"&&e.jsx("p",{class:"text-xs text-gray-500 mt-0.5",children:"No"}),((K=s==null?void 0:s.data)==null?void 0:K.is_warranty)=="1"&&e.jsxs("p",{class:"text-xs text-gray-500 mt-0.5",children:[(U=s==null?void 0:s.data)==null?void 0:U.warranty_period," - ",(Y=s==null?void 0:s.data)==null?void 0:Y.warranty_type," "]})]})]}),e.jsxs("tr",{class:"odd:bg-gray-50",children:[e.jsx("th",{class:"p-4 text-left text-sm font-semibold text-black",children:"Is Borrow"}),e.jsxs("td",{class:"p-4 text-sm text-black",children:[((G=s==null?void 0:s.data)==null?void 0:G.is_borrow)=="0"&&e.jsx("p",{class:"text-xs text-gray-500 mt-0.5",children:"No"}),((W=s==null?void 0:s.data)==null?void 0:W.is_borrow)=="1"&&e.jsx("p",{class:"text-xs text-gray-500 mt-0.5",children:e.jsxs("ul",{class:"list-disc",children:[((H=s==null?void 0:s.data)==null?void 0:H.shop_name)&&e.jsxs("li",{children:["Name: ",(J=s==null?void 0:s.data)==null?void 0:J.shop_name]}),((X=s==null?void 0:s.data)==null?void 0:X.shop_address)&&e.jsxs("li",{children:["Address: ",(Z=s==null?void 0:s.data)==null?void 0:Z.shop_address]}),((I=s==null?void 0:s.data)==null?void 0:I.shop_phone)&&e.jsxs("li",{children:["Phone: ",(V=s==null?void 0:s.data)==null?void 0:V.shop_phone]}),((ee=s==null?void 0:s.data)==null?void 0:ee.shop_email)&&e.jsxs("li",{children:["Email: ",(te=s==null?void 0:s.data)==null?void 0:te.shop_email]})]})})]})]}),e.jsxs("tr",{class:"odd:bg-gray-50",children:[e.jsx("th",{class:"p-4 text-left text-sm font-semibold text-black",children:"Stock  Quantity"}),e.jsx("td",{class:"p-4 text-sm text-black",children:((se=(ae=s==null?void 0:s.data)==null?void 0:ae.stock)==null?void 0:se.quantity)||0})]}),e.jsxs("tr",{class:"odd:bg-gray-50",children:[e.jsx("th",{class:"p-4 text-left text-sm font-semibold text-black",children:"Stock Status"}),e.jsx("td",{class:"p-4",children:(ne=(le=s==null?void 0:s.data)==null?void 0:le.stock)!=null&&ne.status?e.jsx("p",{class:"text-xs text-gray-500 mt-0.5",children:"Available"}):e.jsx("p",{class:"text-xs text-gray-500 mt-0.5",children:"Not Available"})})]}),e.jsxs("tr",{class:"odd:bg-gray-50",children:[e.jsx("th",{class:"p-4 text-left text-sm font-semibold text-black",children:"Supplier Invoice"}),e.jsxs("td",{class:"p-4 text-sm text-black",children:[((re=s==null?void 0:s.data)==null?void 0:re.is_supplier)=="0"&&e.jsx("p",{class:"text-xs text-gray-500 mt-0.5",children:"No"}),((ie=s==null?void 0:s.data)==null?void 0:ie.is_supplier)=="1"&&e.jsx("p",{class:"text-xs text-gray-500 mt-0.5",children:(ce=s==null?void 0:s.data)==null?void 0:ce.supplier_invoice_no})]})]})]})})})})})]})})})}),e.jsx("div",{className:"font-sans antialiased bg-grey-lightest",children:e.jsx("div",{className:"w-full bg-grey-lightest",children:e.jsx("div",{className:"container mx-auto py-3 px-5",children:e.jsxs("div",{className:"w-full lg:w-full mx-auto bg-white rounded shadow p-10",children:[e.jsx("div",{className:"mb-4",children:e.jsx("div",{className:"w-full flex items-center justify-between",children:e.jsx("label",{className:"block text-grey-darker text-lg font-bold mb-2",children:"Payment"})})}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-grey-darker text-sm font-bold mb-2",children:"Is Installment"}),e.jsxs("div",{className:"flex items-center",children:[e.jsxs("label",{className:"mr-4",children:[e.jsx(c,{name:"is_installment",type:"radio",value:"1",className:"mr-2 checked:bg-black checked:hover:bg-gray-700 checked:active:bg-black checked:focus:bg-black focus:bg-black focus:outline-none focus:ring-1 focus:ring-black"})," Yes"]}),e.jsxs("label",{children:[e.jsx(c,{name:"is_installment",type:"radio",value:"0",className:"mr-2 checked:bg-black checked:hover:bg-gray-700 checked:active:bg-black checked:focus:bg-black focus:bg-black focus:outline-none focus:ring-1 focus:ring-black"})," No"]})]}),e.jsx(d,{name:"is_installment",component:"div",className:"text-red-500 text-xs mt-1"})]}),n.is_installment=="1"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex mb-4",children:[e.jsxs("div",{className:"w-1/2 mr-1",children:[e.jsx("label",{className:"block text-grey-darker text-sm  mb-2",children:"	Installment Amount"}),e.jsx(c,{name:"installment_amount",className:"appearance-none border rounded w-full py-2 px-3   focus:ring-black focus:border-black text-grey-darker",type:"text",placeholder:"Enter Installment Amount"}),e.jsx(d,{name:"installment_amount",component:"div",className:"text-red-500 text-xs mt-1"})]}),e.jsxs("div",{className:"w-1/2 mr-1",children:[e.jsx("label",{className:"block text-grey-darker text-sm  mb-2",children:"Installment Period"}),e.jsx(c,{name:"installment_period",className:"appearance-none border rounded w-full py-2 px-3   focus:ring-black focus:border-black text-grey-darker",type:"text",placeholder:"Enter Installment Period"}),e.jsx(d,{name:"installment_period",component:"div",className:"text-red-500 text-xs mt-1"})]})]}),e.jsxs("div",{className:"flex mb-4",children:[e.jsxs("div",{className:"w-1/2 mr-1",children:[e.jsx("label",{className:"block text-grey-darker text-sm  mb-2",children:"	Installment Start Date"}),e.jsx(c,{name:"installment_start_date",className:"appearance-none border rounded w-full py-2 px-3   focus:ring-black focus:border-black text-grey-darker",type:"date",placeholder:"Enter Installment Start Date"}),e.jsx(d,{name:"installment_start_date",component:"div",className:"text-red-500 text-xs mt-1"})]}),e.jsxs("div",{className:"w-1/2 mr-1",children:[e.jsx("label",{className:"block text-grey-darker text-sm  mb-2",children:"Installment End Date"}),e.jsx(c,{name:"installment_end_date",className:"appearance-none border rounded w-full py-2 px-3   focus:ring-black focus:border-black text-grey-darker",type:"date",placeholder:"Enter Installment End Date"}),e.jsx(d,{name:"installment_end_date",component:"div",className:"text-red-500 text-xs mt-1"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-grey-darker text-sm  mb-2 ",children:"Installment Count"}),e.jsx(c,{name:"installment_count",className:"appearance-none border rounded w-full py-2 px-3   focus:ring-black focus:border-black text-grey-darker",type:"number",placeholder:"Enter Installment Count"}),e.jsx(d,{name:"installment_count",component:"div",className:"text-red-500 text-xs mt-1"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-grey-darker text-sm  mb-2 font-bold",children:"Select Payment Method"}),e.jsxs(c,{name:"method",className:"appearance-none border rounded w-full py-2 px-3   focus:ring-black focus:border-black text-grey-darker",as:"select",children:[e.jsx("option",{value:"",children:"Select Payment Method"}),e.jsx("option",{value:"cash",children:"Cash"}),e.jsx("option",{value:"bank",children:"Bank Transfer"}),e.jsx("option",{value:"cheque",children:"Cheque"}),e.jsx("option",{value:"online",children:"Online"})]}),e.jsx(d,{name:"method",component:"div",className:"text-red-500 text-xs mt-1"})]}),n.method==="cheque"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-grey-darker text-sm mb-2",children:"Cheque No (optional)"}),e.jsx(c,{name:"cheque_no",className:"appearance-none border rounded w-full py-2 px-3   focus:ring-black focus:border-black text-grey-darker",type:"text",placeholder:"Enter cheque no"}),e.jsx(d,{name:"cheque_no",component:"div",className:"text-red-500 text-xs mt-1"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-grey-darker text-sm mb-2",children:"Cheque Date (optional)"}),e.jsx(c,{name:"cheque_date",className:"appearance-none border rounded w-full py-2 px-3   focus:ring-black focus:border-black text-grey-darker",type:"date"}),e.jsx(d,{name:"cheque_date",component:"div",className:"text-red-500 text-xs mt-1"})]})]}),n.method==="bank"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-grey-darker text-sm mb-2",children:"Bank Name (optional)"}),e.jsx(c,{name:"bank_name",className:"appearance-none border rounded w-full py-2 px-3   focus:ring-black focus:border-black text-grey-darker",type:"text",placeholder:"Enter bank name"}),e.jsx(d,{name:"bank_name",component:"div",className:"text-red-500 text-xs mt-1"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-grey-darker text-sm mb-2",children:"Brank Brank (optional)"}),e.jsx(c,{name:"bank_branch",className:"appearance-none border rounded w-full py-2 px-3   focus:ring-black focus:border-black text-grey-darker",type:"text",placeholder:"Enter bank branch"}),e.jsx(d,{name:"bank_branch",component:"div",className:"text-red-500 text-xs mt-1"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-grey-darker text-sm mb-2",children:"Bank Account No (optional)"}),e.jsx(c,{name:"bank_account",className:"appearance-none border rounded w-full py-2 px-3   focus:ring-black focus:border-black text-grey-darker",type:"text",placeholder:"Enter bank account no"}),e.jsx(d,{name:"bank_account",component:"div",className:"text-red-500 text-xs mt-1"})]})]}),n.method==="online"&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-grey-darker text-sm mb-2",children:"Online payment link (optional)"}),e.jsx(c,{name:"online_payment_link",className:"appearance-none border rounded w-full py-2 px-3   focus:ring-black focus:border-black text-grey-darker",type:"url",placeholder:"Enter online payment link"}),e.jsx(d,{name:"online_payment_link",component:"div",className:"text-red-500 text-xs mt-1"})]})}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-grey-darker text-sm  mb-2 font-bold",children:"Select Tax"}),e.jsxs(c,{name:"tax_id",as:"select",onChange:a=>{const r=E.find(x=>x.id==a.target.value);console.log(r),o("tax",r?r.cost:""),o("tax_id",a.target.value)},className:"appearance-none border rounded w-full py-2 px-3   focus:ring-black focus:border-black text-grey-darker",children:[e.jsx("option",{value:"",children:"Select Tax"}),E.map(a=>e.jsxs("option",{value:a.id,children:[a.name," - ",a.cost]},a.id))]}),e.jsx(d,{name:"tax_id",component:"div",className:"text-red-500 text-xs mt-1"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-grey-darker text-sm  mb-2 font-bold",children:"Select Shipping Cost"}),e.jsx(q,{onChange:a=>{console.log(a),Ce(a),o("shipping_id",a.value),o("shipping_charges",a.fee)},onInputChange:a=>{T(!0),setTimeout(()=>{g.get(t?route("order.edit",t.id):route("order.create"),{searchshipping:a},{preserveScroll:!0,preserveState:!0}),T(!1)},1e3)},isSearchable:!0,isLoading:Ee,value:Se,options:_e,className:"basic-single",classNamePrefix:"select",styles:_}),e.jsx(d,{name:"shipping_id",component:"div",className:"text-red-500 text-xs mt-1"})]})]})})})}),e.jsx("div",{className:"font-sans antialiased bg-grey-lightest",children:e.jsx("div",{className:"w-full bg-grey-lightest",children:e.jsx("div",{className:"container mx-auto py-3 px-5",children:e.jsxs("div",{className:"w-full lg:w-full mx-auto bg-white rounded shadow p-10",children:[e.jsxs("div",{className:"w-full flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-grey-darker text-lg font-bold mb-2",children:"Exchange"}),n.exchange_items.length>0&&i===null&&e.jsx("button",{type:"button",onClick:()=>{u({name:"",model:"",identity_type:"none",identity_value:"",purchase_price:"",quantity:"1",total:""})},className:"text-sm font-semibold text-black dark:text-white leading-tight underline",children:"Add Item"})]}),e.jsx("div",{class:"relative flex flex-col w-full h-full text-gray-700 bg-white shadow-md rounded-lg bg-clip-border",children:e.jsx("div",{class:"overflow-x-auto",children:e.jsxs("table",{class:"min-w-full text-left table-auto",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{class:"p-4 border-b border-slate-300 bg-slate-50",children:e.jsx("p",{class:"block text-xs sm:text-sm font-normal leading-none text-slate-500",children:"Name"})}),e.jsx("th",{class:"p-4 border-b border-slate-300 bg-slate-50",children:e.jsx("p",{class:"block text-xs sm:text-sm font-normal leading-none text-slate-500",children:"Model"})}),e.jsx("th",{class:"p-4 border-b border-slate-300 bg-slate-50",children:e.jsx("p",{class:"block text-xs sm:text-sm font-normal leading-none text-slate-500",children:"Identity*"})}),e.jsx("th",{class:"p-4 border-b border-slate-300 bg-slate-50",children:e.jsx("p",{class:"block text-xs sm:text-sm font-normal leading-none text-slate-500",children:"Purchase Price*"})}),e.jsx("th",{class:"p-4 border-b border-slate-300 bg-slate-50",children:e.jsx("p",{class:"block text-xs sm:text-sm font-normal leading-none text-slate-500",children:"Quantity*"})}),e.jsx("th",{class:"p-4 border-b border-slate-300 bg-slate-50",children:e.jsx("p",{class:"block text-xs sm:text-sm font-normal leading-none text-slate-500",children:"Total"})}),e.jsx("th",{class:"p-4 border-b border-slate-300 bg-slate-50",children:e.jsx("p",{class:"block text-xs sm:text-sm font-normal leading-none text-slate-500"})})]})}),e.jsxs("tbody",{children:[n.exchange_items.length===0&&i===null&&e.jsx("tr",{class:"hover:bg-slate-50",children:e.jsx("td",{colspan:"7",class:"p-4 border-b border-slate-200 text-center",children:e.jsxs("p",{class:"block text-sm text-slate-800",children:["No Exchange Item!  ",e.jsx("button",{type:"button",onClick:()=>{u({name:"",model:"",identity_type:"none",identity_value:"",purchase_price:"",quantity:"1",total:""})},className:"text-sm font-semibold text-black dark:text-white leading-tight underline",children:"Add Item"})]})})}),i&&e.jsxs("tr",{class:"hover:bg-slate-50",children:[e.jsx("td",{class:"p-4 border-b border-slate-200",children:e.jsx("input",{type:"text",value:i.name,onChange:a=>u({...i,name:a.target.value}),class:"bg-gray-50 border border-gray-300 text-gray-900 text-xs sm:text-sm rounded-lg focus:ring-black focus:border-black block w-full p-2.5"})}),e.jsx("td",{class:"p-4 border-b border-slate-200",children:e.jsx("input",{type:"text",value:i.model,onChange:a=>u({...i,model:a.target.value}),class:"bg-gray-50 border border-gray-300 text-gray-900 text-xs sm:text-sm rounded-lg focus:ring-black focus:border-black block w-full p-2.5"})}),e.jsxs("td",{class:"p-4 border-b border-slate-200 flex items-center gap-2",children:[e.jsxs("select",{value:i.identity_type,onChange:a=>u({...i,identity_type:a.target.value}),class:"bg-gray-50 border border-gray-300 text-gray-900 text-xs sm:text-sm rounded-lg focus:ring-black focus:border-black block w-full p-2.5",children:[e.jsx("option",{value:"none",children:"None"}),e.jsx("option",{value:"imei",children:"IMEI"}),e.jsx("option",{value:"serial",children:"Serial"}),e.jsx("option",{value:"sku",children:"SKU"})]}),i.identity_type!=="none"&&e.jsx("input",{type:"text",value:i.identity_value,onChange:a=>u({...i,identity_value:a.target.value}),class:"bg-gray-50 border border-gray-300 text-gray-900 text-xs sm:text-sm rounded-lg focus:ring-black focus:border-black block w-full p-2.5"})]}),e.jsx("td",{class:"p-4 border-b border-slate-200",children:e.jsx("input",{type:"text",value:i.purchase_price,onChange:a=>{const r=a.target.value;u({...i,purchase_price:r,total:r*i.quantity})},class:"bg-gray-50 border border-gray-300 text-gray-900 text-xs sm:text-sm rounded-lg focus:ring-black focus:border-black block w-full p-2.5"})}),e.jsx("td",{class:"p-4 border-b border-slate-200",children:e.jsx("input",{type:"number",value:i.quantity,onChange:a=>{const r=a.target.value;u({...i,quantity:r,total:r*i.purchase_price})},class:"bg-gray-50 border border-gray-300 text-gray-900 text-xs sm:text-sm rounded-lg focus:ring-black focus:border-black block w-full p-2.5"})}),e.jsx("td",{class:"p-4 border-b border-slate-200",children:e.jsx("input",{type:"text",disabled:!0,value:i.total,class:"bg-gray-200 border border-gray-300 text-gray-900 text-xs sm:text-sm rounded-lg focus:ring-black focus:border-black block w-full p-2.5"})}),e.jsxs("td",{class:"p-4 border-b border-slate-200",children:[e.jsx("button",{type:"button",onClick:()=>{i.name!==""&&i.purchase_price!==""&&i.identity_type!==""&&i.quantity!==""&&i.total!==""?(o("exchange_items",[...n.exchange_items,i]),u(null)):j.error("Please fill in all required fields")},className:"text-xs sm:text-sm font-semibold text-black dark:text-white leading-tight underline",children:"Add"})," ",e.jsx("button",{type:"button",onClick:()=>u(null),className:"text-xs sm:text-sm font-semibold text-black dark:text-white leading-tight underline",children:"Cancel"})]})]}),n.exchange_items.map(a=>e.jsxs("tr",{class:"hover:bg-slate-50",children:[e.jsx("td",{class:"p-4 border-b border-slate-200",children:e.jsx("p",{class:"block text-xs sm:text-sm text-slate-800",children:a.name})}),e.jsx("td",{class:"p-4 border-b border-slate-200",children:e.jsx("p",{class:"block text-xs sm:text-sm text-slate-800",children:a.model||e.jsx("span",{class:"text-red-500",children:"N/A"})})}),e.jsx("td",{class:"p-4 border-b border-slate-200",children:e.jsxs("p",{class:"block text-xs sm:text-sm text-slate-800",children:[a.identity_type,a.identity_value!==""&&` : ${a.identity_value}`]})}),e.jsx("td",{class:"p-4 border-b border-slate-200",children:e.jsx("p",{class:"block text-xs sm:text-sm text-slate-800",children:a.purchase_price})}),e.jsx("td",{class:"p-4 border-b border-slate-200",children:e.jsx("p",{class:"block text-xs sm:text-sm text-slate-800",children:a.quantity})}),e.jsx("td",{class:"p-4 border-b border-slate-200",children:e.jsx("p",{class:"block text-xs sm:text-sm text-slate-800",children:a.total})}),e.jsx("td",{class:"p-4 border-b border-slate-200 flex items-center gap-2",children:e.jsx(fe,{size:20,color:"red",className:"cursor-pointer",onClick:()=>{const r=n.exchange_items.filter(m=>m!==a);o("exchange_items",r);const x=r.reduce((m,f)=>m+f.quantity*f.purchase_price,0);o("exchange",x)}})})]}))]})]})})})]})})})})]}),n.items.length>0&&e.jsxs("div",{className:"w-full col-span-1",children:[e.jsx("div",{className:"font-sans antialiased bg-grey-lightest",children:e.jsx("div",{className:"w-full bg-grey-lightest",children:e.jsx("div",{className:"container mx-auto py-3 px-5",children:e.jsx("div",{className:"w-full lg:w-full mx-auto bg-white rounded shadow p-10",children:n.items.length>0&&e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"w-full flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-grey-darker text-lg font-bold ",children:"Cart"}),e.jsx(Be,{size:25,onClick:()=>o("items",[])})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsx("div",{class:"font-[sans-serif] overflow-x-auto",children:e.jsxs("table",{class:"min-w-full bg-white",children:[e.jsx("thead",{class:"whitespace-nowrap",children:e.jsxs("tr",{children:[e.jsx("th",{class:"p-4 text-left text-sm font-semibold text-black",children:"Product Info"}),e.jsx("th",{class:"p-4 text-left text-sm font-semibold text-black",children:"price"}),e.jsx("th",{class:"p-4 text-left text-sm font-semibold text-black",children:"Qty"}),e.jsx("th",{class:"p-4 text-left text-sm font-semibold text-black",children:"Total"}),e.jsx("th",{class:"p-4 text-left text-sm font-semibold text-black"})]})}),e.jsx("tbody",{class:"whitespace-nowrap",children:n.items.map((a,r)=>{var x,m,f,de,oe,xe,me,be,ue,he;return e.jsxs("tr",{class:"odd:bg-gray-50",children:[e.jsx("td",{class:" text-sm",children:e.jsx("div",{class:"flex items-center cursor-pointer w-max",children:e.jsxs("div",{class:"ml-4 ",children:[e.jsxs("p",{class:"text-sm text-black ",children:["Name : ",(x=a==null?void 0:a.data)==null?void 0:x.name]}),((m=a==null?void 0:a.data)==null?void 0:m.model)&&e.jsxs("p",{class:"text-xs text-gray-500 mt-0.5",children:["Model :",(f=a==null?void 0:a.data)==null?void 0:f.model," "]}),((de=a==null?void 0:a.data)==null?void 0:de.identity_type)!=="none"&&e.jsxs("p",{class:"text-xs text-gray-500 mt-0.5",children:[(oe=a==null?void 0:a.data)==null?void 0:oe.identity_type,":",(xe=a==null?void 0:a.data)==null?void 0:xe.identity_value," "]})]})})}),e.jsx("td",{class:"p-4 text-sm text-black",children:((me=a==null?void 0:a.data)==null?void 0:me.selling_price)||"N/A"}),e.jsx("td",{class:"p-4 text-sm text-black",children:e.jsx("input",{type:"number",name:"quantity",value:a==null?void 0:a.quantity,className:"appearance-none border rounded w-[60px] py-2 px-3 text-grey-darker",max:((ue=(be=a==null?void 0:a.data)==null?void 0:be.stock)==null?void 0:ue.quantity)||0,onChange:v=>{var pe,ge,je,ye;const w=Number(v.target.value);if(w>((ge=(pe=a==null?void 0:a.data)==null?void 0:pe.stock)==null?void 0:ge.quantity)){j.error("Quantity exceeds stock quantity");return}if(w<=0){j.error("Quantity must be greater than 0");return}o(`items.${r}.quantity`,Math.min(w,((ye=(je=a==null?void 0:a.data)==null?void 0:je.stock)==null?void 0:ye.quantity)||0))}})}),e.jsx("td",{class:"p-4 text-sm text-black",children:(a==null?void 0:a.quantity)*((he=a==null?void 0:a.data)==null?void 0:he.selling_price)||0}),e.jsx("td",{class:"p-4 text-sm text-black",children:e.jsx(fe,{color:"red",className:"cursor-pointer hover:scale-110",onClick:()=>{o("items",n.items.filter(v=>v.data.id!==a.data.id))}})})]})})})]})})})]})})})})}),e.jsx("div",{className:"font-sans antialiased bg-grey-lightest",children:e.jsx("div",{className:"w-full bg-grey-lightest",children:e.jsx("div",{className:"container mx-auto py-3 px-5",children:e.jsx("div",{className:"w-full lg:w-full mx-auto bg-white rounded shadow p-10",children:n.items.length>0&&e.jsxs("div",{className:"mb-2",children:[e.jsx("div",{className:"w-full flex items-center justify-between mb-2",children:e.jsx("label",{className:"block text-grey-darker text-lg font-bold ",children:"Calculation"})}),e.jsxs("ul",{className:"mt-5",children:[e.jsxs("li",{className:"w-full flex items-center justify-between mb-2",children:[e.jsx("div",{children:"Total Amount:"}),e.jsx("div",{children:e.jsx("input",{type:"number",value:n.items.reduce((a,r)=>a+r.quantity*r.data.selling_price,0),className:"appearance-none border rounded disabled:bg-gray-200 disabled:hover:bg-gray-200	 py-2 px-3 text-grey-darker",disabled:!0})})]}),e.jsxs("li",{className:"w-full flex items-center justify-between",children:[e.jsx("div",{children:"Extra Charges:"}),e.jsxs("div",{children:[" ",e.jsx(c,{type:"number",name:"extra_charges",value:n.extra_charges,className:"appearance-none border rounded 	 py-2 px-3 text-grey-darker"})]})]}),e.jsx("li",{className:"w-full flex items-center justify-between mb-2",children:e.jsx(d,{name:"extra_charges",component:"div",className:"text-red-600 text-xs mt-1"})}),e.jsxs("li",{className:"w-full flex items-center justify-between",children:[e.jsx("div",{children:"Discount:"}),e.jsxs("div",{children:[" ",e.jsx(c,{type:"number",name:"discount",value:n.discount,className:"appearance-none border rounded 	 py-2 px-3 text-grey-darker"})]})]}),e.jsx("li",{className:"w-full flex items-center justify-between mb-2",children:e.jsx(d,{name:"discount",component:"div",className:"text-red-600 text-xs mt-1"})}),e.jsxs("li",{className:"w-full flex items-center justify-between mb-2",children:[e.jsx("div",{children:"Exchange:"}),e.jsxs("div",{children:[" ",e.jsx(c,{type:"number",disabled:!0,name:"exchange",value:n.exchange,className:"appearance-none border rounded disabled:bg-gray-200	 py-2 px-3 text-grey-darker"})]})]}),e.jsxs("li",{className:"w-full flex items-center justify-between mb-2",children:[e.jsx("div",{children:"Tax:"}),e.jsx("div",{children:e.jsx("input",{type:"number",value:n.tax,className:"appearance-none border rounded disabled:bg-gray-200 disabled:hover:bg-gray-200	 py-2 px-3 text-grey-darker",disabled:!0})})]}),e.jsxs("li",{className:"w-full flex items-center justify-between mb-2",children:[e.jsx("div",{children:"Shipping Cost:"}),e.jsx("div",{children:e.jsx("input",{type:"number",value:parseFloat(n.shipping_charges||0).toFixed(2),className:"appearance-none border rounded disabled:bg-gray-200 disabled:hover:bg-gray-200	 py-2 px-3 text-grey-darker",disabled:!0})})]}),e.jsxs("li",{className:"w-full flex items-center justify-between mb-2",children:[e.jsx("div",{className:"font-bold",children:"Grand Total:"}),e.jsx("div",{children:e.jsx("input",{type:"number",value:n.items.reduce((a,r)=>a+r.quantity*r.data.selling_price,0)+parseFloat(n.extra_charges||0)+parseFloat(n.tax||0)+parseFloat(n.shipping_charges||0)-(n.exchange+parseFloat(n.discount||0)),className:"appearance-none border rounded disabled:bg-gray-200 disabled:hover:bg-gray-200 py-2 px-3 text-grey-darker",disabled:!0})})]}),e.jsxs("li",{className:"w-full flex items-center justify-between",children:[e.jsx("div",{children:"Paid Amount:"}),e.jsx("div",{children:e.jsx(c,{type:"number",name:"paid_amount",className:"appearance-none border rounded py-2 px-3 text-grey-darker"})})]}),e.jsx("li",{className:"w-full flex items-center justify-between mb-2",children:e.jsx(d,{name:"paid_amount",component:"div",className:"text-red-600 text-xs mt-1"})})]})]})})})})})]})]})})}})]})}export{lt as default};
