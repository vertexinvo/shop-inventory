import{r as b,j as e,Y as Ae,y as N}from"./app-CYB_0e0p.js";import{F as Ee,a as Pe,b as o,E as m}from"./formik.esm-BTYay0rC.js";import{F as ke}from"./index-BKDu5RRn.js";import{A as $e,d as Me,M as Qe}from"./AuthenticatedLayout-7z2KhnAb.js";import{c as Be,d as Le,e as Te,a as j}from"./index.esm-BCki6T22.js";import{S as we}from"./react-select.esm-BShIOqS2.js";/* empty css                   */import{B as h}from"./ReactToastify-DsAsqIYl.js";/* empty css              */import"./transition-DDbeH2lp.js";import"./Modal-DP2kzPh-.js";import"./defineProperty-DJACW-dl.js";import"./typeof-QjJsDpFa.js";function rt(ve){const{auth:ze,users:k,order_id:De,items:w,user:i}=ve,[_e,Oe]=b.useState(!1),[Ce,Fe]=b.useState(!1),[t,y]=b.useState(null),[Ke,Re]=b.useState(null),[Ge,Ue]=b.useState(!1),[l,c]=b.useState(null),v={control:(p,a)=>({...p,borderColor:a.isFocused?"black":p.borderColor,boxShadow:a.isFocused?"0 0 0 1px black":p.boxShadow,"&:hover":{borderColor:a.isFocused?"black":p.borderColor}})};return e.jsxs($e,{header:e.jsxs(e.Fragment,{children:[e.jsx(Qe,{size:20,className:"mr-2 cursor-pointer",onClick:()=>N.get(route("order.index")),title:"Back"}),e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Instant Sale"})]}),children:[e.jsx(Ae,{title:"Instant Sale"}),e.jsx(Ee,{enableReinitialize:!0,initialValues:{bill_no:"",name:(i==null?void 0:i.name)||"",email:(i==null?void 0:i.email)||"",phone:(i==null?void 0:i.phone)||"",address:(i==null?void 0:i.address)||"",total:0,payable_amount:0,paid_amount:0,user_id:(i==null?void 0:i.id)||"",discount:0,items:[],order_date:new Date().toISOString().slice(0,10),close:!1,exchange_items:[],exchange:0},validationSchema:Be({bill_no:j(),name:j().required("Name is required"),email:j(),phone:j().required("Phone number is required"),address:j(),items:Te().min(1,"At least one item is required"),order_date:Le().required("Order date is required")}),onSubmit:(p,{setSubmitting:a,resetForm:_})=>{N.post(route("order.instantorderstore"),p,{onSuccess:()=>{_()},preserveScroll:!0,preserveState:!0})},children:({isSubmitting:p,values:a,errors:_,setFieldValue:n,handleSubmit:C})=>{var S,q,A,E,P,$,M,Q,B,L,T,z,D,O,F,K,R,G,U,W,Y,H,J,X,Z,V,I,ee,te,se,ae,le,re,ne,ie,de,xe,ce;b.useEffect(()=>{const s=a.items.reduce((x,d)=>x+d.quantity*d.data.selling_price,0),r=parseFloat(a.discount||0);n("total",s),n("payable_amount",s+parseFloat(a.extra_charges||0)-(r+parseFloat(a.exchange||0)))},[a.items,a.discount,n,a.exchange,a.extra_charges,a.exchange_items]);const Se=()=>{n("close",!0),C()},qe=()=>{n("close",!1),C()};return b.useEffect(()=>{if(a.exchange_items.length>0){const s=a.exchange_items.reduce((r,x)=>r+x.quantity*x.purchase_price,0);n("exchange",s)}},[a.exchange_items]),e.jsx(Pe,{children:e.jsxs("div",{className:"grid grid-cols-3 gap-1",children:[e.jsxs("div",{className:`w-full ${a.items.length>0?"col-span-2":"col-span-3"}`,children:[e.jsx("div",{className:"font-sans antialiased bg-grey-lightest",children:e.jsx("div",{className:"w-full bg-grey-lightest",children:e.jsx("div",{className:"container mx-auto py-3 px-5",children:e.jsxs("div",{className:"w-full lg:w-full mx-auto bg-white rounded shadow p-10",children:[e.jsxs("div",{className:"w-full flex flex-col md:flex-row items-start md:items-center justify-between mb-5",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4 md:mb-0",children:[e.jsx("label",{className:"block text-grey-darker text-lg font-bold",children:"Order Date"}),e.jsx(o,{name:"order_date",type:"date",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-black focus:border-black block w-full p-2.5"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-start gap-2 w-full sm:w-auto",children:[e.jsx("button",{onClick:qe,className:"bg-black hover:bg-blue-dark text-white font-bold py-2 px-4 rounded-lg w-full sm:w-auto",type:"button",children:"Save"}),e.jsx("button",{onClick:Se,className:"bg-black hover:bg-blue-dark text-white font-bold py-2 px-4 rounded-lg w-full sm:w-auto",type:"button",children:"Save & Close"}),e.jsx("button",{onClick:()=>N.visit(route("order.index")),className:"bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-lg w-full sm:w-auto",type:"button",children:"Close"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-grey-darker text-sm  mb-2",children:"Bill No"}),e.jsx(o,{name:"bill_no",className:"appearance-none border rounded w-full py-2 px-3   focus:ring-black focus:border-black text-grey-darker",type:"text",placeholder:"Enter Bill No"}),e.jsx(m,{name:"bill_no",component:"div",className:"text-red-500 text-xs mt-1"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-grey-darker text-sm  mb-2 ",for:"shop_name",children:"Select Customer (Existing)"}),e.jsx(we,{onChange:s=>{n("user_id",s.value),n("name",s.name),n("email",s.email),n("phone",s.phone),n("address",s.address)},isSearchable:!0,isLoading:_e,value:k.find(s=>s.value===a.user_id),options:k,className:"basic-single ",classNamePrefix:"select ",styles:v})]}),e.jsxs("div",{className:"flex mb-4",children:[e.jsxs("div",{className:"w-1/2 mr-1",children:[e.jsx("label",{className:"block text-grey-darker text-sm  mb-2",children:"Customer Name"}),e.jsx(o,{name:"name",className:"appearance-none border rounded w-full py-2 px-3   focus:ring-black focus:border-black text-grey-darker",type:"text",placeholder:"Enter Customer name"}),e.jsx(m,{name:"name",component:"div",className:"text-red-500 text-xs mt-1"})]}),e.jsxs("div",{className:"w-1/2 mr-1",children:[e.jsx("label",{className:"block text-grey-darker text-sm  mb-2",children:"Customer Email"}),e.jsx(o,{name:"email",className:"appearance-none border rounded w-full py-2 px-3   focus:ring-black focus:border-black text-grey-darker",type:"text",placeholder:"Enter Customer email"}),e.jsx(m,{name:"email",component:"div",className:"text-red-500 text-xs mt-1"})]})]}),e.jsxs("div",{className:"flex mb-4",children:[e.jsxs("div",{className:"w-1/2 mr-1",children:[e.jsx("label",{className:"block text-grey-darker text-sm  mb-2",children:"Customer Phone"}),e.jsx(o,{name:"phone",className:"appearance-none border rounded w-full py-2 px-3   focus:ring-black focus:border-black text-grey-darker",type:"text",placeholder:"Enter Customer phone"}),e.jsx(m,{name:"phone",component:"div",className:"text-red-500 text-xs mt-1"})]}),e.jsxs("div",{className:"w-1/2 mr-1",children:[e.jsx("label",{className:"block text-grey-darker text-sm  mb-2",children:"Customer Address"}),e.jsx(o,{name:"address",className:"appearance-none border rounded w-full py-2 px-3   focus:ring-black focus:border-black text-grey-darker",type:"text",placeholder:"Enter Customer address"}),e.jsx(m,{name:"address",component:"div",className:"text-red-500 text-xs mt-1"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-grey-darker text-sm  mb-2",for:"shop_name",children:"Select Items"}),e.jsx(we,{onChange:s=>{y(s)},isSearchable:!0,isLoading:Ce,value:w.find(s=>s.value===(t==null?void 0:t.value)),options:w,className:"basic-single",classNamePrefix:"select",styles:v}),e.jsx(m,{name:"items",component:"div",className:"text-red-500 text-xs mt-1"})]}),t&&e.jsxs("div",{className:"flex  ",children:[e.jsx("div",{className:"w-1/2 mr-1",children:e.jsx("input",{type:"number",value:t==null?void 0:t.quantity,onChange:s=>y({...t,quantity:s.target.value}),placeholder:"Enter Quantity",className:"appearance-none border rounded w-full py-2 px-3   focus:ring-black focus:border-black text-grey-darker"})}),e.jsx("div",{className:"w-1/2 mr-1",children:e.jsx("button",{onClick:()=>{var s,r;if((t==null?void 0:t.quantity)>((r=(s=t==null?void 0:t.data)==null?void 0:s.stock)==null?void 0:r.quantity)){h.error("Quantity exceeds stock quantity");return}if(a.items.find(x=>{var d;return x.data.id===((d=t==null?void 0:t.data)==null?void 0:d.id)})){h.error("Item already added");return}if((t==null?void 0:t.quantity)<=0){h.error("Quantity must be greater than 0");return}y(null),n("items",[...a.items,t]),console.log(a.items)},className:"bg-black text-sm hover:bg-blue-dark text-white font-bold py-[11px] px-4  rounded-lg",type:"button",children:"Add Item"})})]}),t&&e.jsx("div",{className:"my-5",children:e.jsx("div",{className:"",children:e.jsx("div",{class:"font-[sans-serif] ",children:e.jsx("table",{class:"min-w-full bg-white",children:e.jsxs("thead",{className:`${((q=(S=t==null?void 0:t.data)==null?void 0:S.stock)==null?void 0:q.quantity)==0?"bg-red-100 border border-red-200":""} "whitespace-nowrap  "`,children:[e.jsxs("tr",{class:"odd:bg-gray-50",children:[e.jsx("th",{class:"p-4 text-left text-sm font-semibold text-black",children:"Product Info"}),e.jsx("td",{class:" text-sm",children:e.jsx("div",{class:"flex items-center cursor-pointer w-max",children:e.jsxs("div",{class:"ml-4 ",children:[e.jsxs("p",{class:"text-sm text-black ",children:["Name : ",(A=t==null?void 0:t.data)==null?void 0:A.name]}),((E=t==null?void 0:t.data)==null?void 0:E.model)&&e.jsxs("p",{class:"text-xs text-gray-500 mt-0.5",children:["Model :",(P=t==null?void 0:t.data)==null?void 0:P.model," "]}),(($=t==null?void 0:t.data)==null?void 0:$.identity_type)!=="none"&&e.jsxs("p",{class:"text-xs text-gray-500 mt-0.5",children:[(M=t==null?void 0:t.data)==null?void 0:M.identity_type,":",(Q=t==null?void 0:t.data)==null?void 0:Q.identity_value," "]})]})})})]}),e.jsxs("tr",{class:"odd:bg-gray-50",children:[e.jsx("th",{class:"p-4 text-left text-sm font-semibold text-black",children:"Purchase ID"}),e.jsx("td",{class:"p-4 text-sm text-black",children:((B=t==null?void 0:t.data)==null?void 0:B.code)||((L=t==null?void 0:t.data)==null?void 0:L.id)})]}),e.jsxs("tr",{class:"odd:bg-gray-50",children:[e.jsx("th",{class:"p-4 text-left text-sm font-semibold text-black",children:"Purchase price"}),e.jsx("td",{class:"p-4 text-sm text-black",children:((T=t==null?void 0:t.data)==null?void 0:T.purchase_price)||"N/A"})]}),e.jsxs("tr",{class:"odd:bg-gray-50",children:[e.jsx("th",{class:"p-4 text-left text-sm font-semibold text-black",children:"Selling price"}),e.jsx("td",{class:"p-4 text-sm text-black",children:((z=t==null?void 0:t.data)==null?void 0:z.selling_price)||"N/A"})]}),e.jsxs("tr",{class:"odd:bg-gray-50",children:[e.jsx("th",{class:"p-4 text-left text-sm font-semibold text-black",children:"Supplier"}),e.jsx("td",{class:"p-4 text-sm text-black",children:((D=t==null?void 0:t.data)==null?void 0:D.supplier_name)||"N/A"})]}),e.jsxs("tr",{class:"odd:bg-gray-50",children:[e.jsx("th",{class:"p-4 text-left text-sm font-semibold text-black",children:"Brands"}),e.jsx("td",{class:"p-4 text-sm text-black",children:((O=t==null?void 0:t.data)==null?void 0:O.brands.map(s=>s.name).join(", "))||"N/A"})]}),e.jsxs("tr",{class:"odd:bg-gray-50",children:[e.jsx("th",{class:"p-4 text-left text-sm font-semibold text-black",children:"Categories"}),e.jsx("td",{class:"p-4 text-sm text-black",children:((F=t==null?void 0:t.data)==null?void 0:F.categories.map(s=>s.name).join(", "))||"N/A"})]}),e.jsxs("tr",{class:"odd:bg-gray-50",children:[e.jsx("th",{class:"p-4 text-left text-sm font-semibold text-black",children:"Warranty period"}),e.jsxs("td",{class:"p-4 text-sm text-black",children:[((K=t==null?void 0:t.data)==null?void 0:K.is_warranty)=="0"&&e.jsx("p",{class:"text-xs text-gray-500 mt-0.5",children:"No"}),((R=t==null?void 0:t.data)==null?void 0:R.is_warranty)=="1"&&e.jsxs("p",{class:"text-xs text-gray-500 mt-0.5",children:[(G=t==null?void 0:t.data)==null?void 0:G.warranty_period," - ",(U=t==null?void 0:t.data)==null?void 0:U.warranty_type," "]})]})]}),e.jsxs("tr",{class:"odd:bg-gray-50",children:[e.jsx("th",{class:"p-4 text-left text-sm font-semibold text-black",children:"Is Borrow"}),e.jsxs("td",{class:"p-4 text-sm text-black",children:[((W=t==null?void 0:t.data)==null?void 0:W.is_borrow)=="0"&&e.jsx("p",{class:"text-xs text-gray-500 mt-0.5",children:"No"}),((Y=t==null?void 0:t.data)==null?void 0:Y.is_borrow)=="1"&&e.jsx("p",{class:"text-xs text-gray-500 mt-0.5",children:e.jsxs("ul",{class:"list-disc",children:[((H=t==null?void 0:t.data)==null?void 0:H.shop_name)&&e.jsxs("li",{children:["Name: ",(J=t==null?void 0:t.data)==null?void 0:J.shop_name]}),((X=t==null?void 0:t.data)==null?void 0:X.shop_address)&&e.jsxs("li",{children:["Address: ",(Z=t==null?void 0:t.data)==null?void 0:Z.shop_address]}),((V=t==null?void 0:t.data)==null?void 0:V.shop_phone)&&e.jsxs("li",{children:["Phone: ",(I=t==null?void 0:t.data)==null?void 0:I.shop_phone]}),((ee=t==null?void 0:t.data)==null?void 0:ee.shop_email)&&e.jsxs("li",{children:["Email: ",(te=t==null?void 0:t.data)==null?void 0:te.shop_email]})]})})]})]}),e.jsxs("tr",{className:`${((ae=(se=t==null?void 0:t.data)==null?void 0:se.stock)==null?void 0:ae.quantity)==0?"bg-red-100":""}`,children:[e.jsx("th",{class:"p-4 text-left text-sm font-semibold text-black",children:"Stock  Quantity"}),e.jsx("td",{class:"p-4 text-sm text-black",children:((re=(le=t==null?void 0:t.data)==null?void 0:le.stock)==null?void 0:re.quantity)||0})]}),e.jsxs("tr",{class:"odd:bg-gray-50",children:[e.jsx("th",{class:"p-4 text-left text-sm font-semibold text-black",children:"Stock Status"}),e.jsx("td",{class:"p-4",children:(ie=(ne=t==null?void 0:t.data)==null?void 0:ne.stock)!=null&&ie.status?e.jsx("p",{class:"text-xs text-gray-500 mt-0.5",children:"Available"}):e.jsx("p",{class:"text-xs text-gray-500 mt-0.5",children:"Not Available"})})]}),e.jsxs("tr",{class:"odd:bg-gray-50",children:[e.jsx("th",{class:"p-4 text-left text-sm font-semibold text-black",children:"Supplier Invoice"}),e.jsxs("td",{class:"p-4 text-sm text-black",children:[((de=t==null?void 0:t.data)==null?void 0:de.is_supplier)=="0"&&e.jsx("p",{class:"text-xs text-gray-500 mt-0.5",children:"No"}),((xe=t==null?void 0:t.data)==null?void 0:xe.is_supplier)=="1"&&e.jsx("p",{class:"text-xs text-gray-500 mt-0.5",children:(ce=t==null?void 0:t.data)==null?void 0:ce.supplier_invoice_no})]})]})]})})})})})]})})})}),e.jsx("div",{className:"font-sans antialiased bg-grey-lightest",children:e.jsx("div",{className:"w-full bg-grey-lightest",children:e.jsx("div",{className:"container mx-auto py-3 px-5",children:e.jsxs("div",{className:"w-full lg:w-full mx-auto bg-white rounded shadow p-4 sm:p-6 lg:p-10",children:[e.jsxs("div",{className:"w-full flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4",children:[e.jsx("label",{className:"block text-grey-darker text-base sm:text-lg font-bold mb-2 sm:mb-0",children:"Exchange"}),a.exchange_items.length>0&&l===null&&e.jsx("button",{type:"button",onClick:()=>{c({name:"",model:"",identity_type:"none",identity_value:"",purchase_price:"",quantity:"1",total:""})},className:"text-sm font-semibold text-black   underline leading-tight",children:"Add Item"})]}),e.jsx("div",{className:"relative flex flex-col w-full h-full text-gray-700 bg-white shadow-md rounded-lg",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-left table-auto",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-2 sm:p-4 border-b border-slate-300 bg-slate-50",children:e.jsx("p",{className:"text-xs sm:text-sm font-normal text-slate-500",children:"Name"})}),e.jsx("th",{className:"p-2 sm:p-4 border-b border-slate-300 bg-slate-50",children:e.jsx("p",{className:"text-xs sm:text-sm font-normal text-slate-500",children:"Model"})}),e.jsx("th",{className:"p-2 sm:p-4 border-b border-slate-300 bg-slate-50",children:e.jsx("p",{className:"text-xs sm:text-sm font-normal text-slate-500",children:"Identity*"})}),e.jsx("th",{className:"p-2 sm:p-4 border-b border-slate-300 bg-slate-50",children:e.jsx("p",{className:"text-xs sm:text-sm font-normal text-slate-500",children:"Purchase Price*"})}),e.jsx("th",{className:"p-2 sm:p-4 border-b border-slate-300 bg-slate-50",children:e.jsx("p",{className:"text-xs sm:text-sm font-normal text-slate-500",children:"Quantity*"})}),e.jsx("th",{className:"p-2 sm:p-4 border-b border-slate-300 bg-slate-50",children:e.jsx("p",{className:"text-xs sm:text-sm font-normal text-slate-500",children:"Total"})}),e.jsx("th",{className:"p-2 sm:p-4 border-b border-slate-300 bg-slate-50"})]})}),e.jsxs("tbody",{children:[a.exchange_items.length===0&&l===null&&e.jsx("tr",{className:"hover:bg-slate-50",children:e.jsx("td",{colSpan:"7",className:"p-4 border-b border-slate-200 text-center",children:e.jsxs("p",{className:"text-sm text-slate-800",children:["No Exchange Item!  ",e.jsx("button",{type:"button",onClick:()=>{c({name:"",model:"",identity_type:"none",identity_value:"",purchase_price:"",quantity:"1",total:""})},className:"text-sm font-semibold text-black   underline",children:"Add Item"})]})})}),l&&e.jsxs("tr",{className:"hover:bg-slate-50",children:[e.jsx("td",{className:"p-2 sm:p-4 border-b border-slate-200",children:e.jsx("input",{type:"text",value:l.name,onChange:s=>c({...l,name:s.target.value}),className:"bg-gray-50 border border-gray-300 text-gray-900 text-xs sm:text-sm rounded-lg focus:ring-black focus:border-black block w-full p-2.5"})}),e.jsx("td",{className:"p-2 sm:p-4 border-b border-slate-200",children:e.jsx("input",{type:"text",value:l.model,onChange:s=>c({...l,model:s.target.value}),className:"bg-gray-50 border border-gray-300 text-gray-900 text-xs sm:text-sm rounded-lg focus:ring-black focus:border-black block w-full p-2.5"})}),e.jsxs("td",{className:"p-2 sm:p-4 border-b border-slate-200 flex flex-col sm:flex-row items-center gap-2",children:[e.jsxs("select",{value:l.identity_type,onChange:s=>c({...l,identity_type:s.target.value}),className:"bg-gray-50 border border-gray-300 text-gray-900 text-xs sm:text-sm rounded-lg focus:ring-black focus:border-black block w-full sm:w-auto p-2.5",children:[e.jsx("option",{value:"none",children:"None"}),e.jsx("option",{value:"imei",children:"IMEI"}),e.jsx("option",{value:"serial",children:"Serial"}),e.jsx("option",{value:"sku",children:"SKU"})]}),l.identity_type!=="none"&&e.jsx("input",{type:"text",value:l.identity_value,onChange:s=>c({...l,identity_value:s.target.value}),className:"bg-gray-50 border border-gray-300 text-gray-900 text-xs sm:text-sm rounded-lg focus:ring-black focus:border-black block w-full p-2.5"})]}),e.jsx("td",{className:"p-2 sm:p-4 border-b border-slate-200",children:e.jsx("input",{type:"number",value:l.purchase_price,onChange:s=>{const r=s.target.value;c({...l,purchase_price:r,total:r*l.quantity})},className:"bg-gray-50 border border-gray-300 text-gray-900 text-xs sm:text-sm rounded-lg focus:ring-black focus:border-black block w-full p-2.5"})}),e.jsx("td",{className:"p-2 sm:p-4 border-b border-slate-200",children:e.jsx("input",{type:"number",value:l.quantity,onChange:s=>{const r=s.target.value;c({...l,quantity:r,total:r*l.purchase_price})},className:"bg-gray-50 border border-gray-300 text-gray-900 text-xs sm:text-sm rounded-lg focus:ring-black focus:border-black block w-full p-2.5"})}),e.jsx("td",{className:"p-2 sm:p-4 border-b border-slate-200",children:e.jsx("input",{type:"number",disabled:!0,value:l.total,className:"bg-gray-200 border border-gray-300 text-gray-900 text-xs sm:text-sm rounded-lg focus:ring-black focus:border-black block w-full p-2.5"})}),e.jsxs("td",{className:"p-2 sm:p-4 border-b border-slate-200 flex items-center gap-2",children:[e.jsx("button",{type:"button",onClick:()=>{l.name!==""&&l.purchase_price!==""&&l.identity_type!==""&&l.quantity!==""&&l.total!==""?(n("exchange_items",[...a.exchange_items,l]),c(null)):h.error("Please fill in all required fields")},className:"text-xs sm:text-sm font-semibold text-black   underline",children:"Add"})," ",e.jsx("button",{type:"button",onClick:()=>c(null),className:"text-xs sm:text-sm font-semibold text-black   underline",children:"Cancel"})]})]}),a.exchange_items.map(s=>e.jsxs("tr",{className:"hover:bg-slate-50",children:[e.jsx("td",{className:"p-2 sm:p-4 border-b border-slate-200",children:e.jsx("p",{className:"text-xs sm:text-sm text-slate-800",children:s.name})}),e.jsx("td",{className:"p-2 sm:p-4 border-b border-slate-200",children:e.jsx("p",{className:"text-xs sm:text-sm text-slate-800",children:s.model||e.jsx("span",{className:"text-red-500",children:"N/A"})})}),e.jsx("td",{className:"p-2 sm:p-4 border-b border-slate-200",children:e.jsxs("p",{className:"text-xs sm:text-sm text-slate-800",children:[s.identity_type,s.identity_value!==""&&` : ${s.identity_value}`]})}),e.jsx("td",{className:"p-2 sm:p-4 border-b border-slate-200",children:e.jsx("p",{className:"text-xs sm:text-sm text-slate-800",children:s.purchase_price})}),e.jsx("td",{className:"p-2 sm:p-4 border-b border-slate-200",children:e.jsx("p",{className:"text-xs sm:text-sm text-slate-800",children:s.quantity})}),e.jsx("td",{className:"p-2 sm:p-4 border-b border-slate-200",children:e.jsx("p",{className:"text-xs sm:text-sm text-slate-800",children:s.total})}),e.jsx("td",{className:"p-2 sm:p-4 border-b border-slate-200",children:e.jsx(ke,{size:20,color:"red",className:"cursor-pointer",onClick:()=>{const r=a.exchange_items.filter(d=>d!==s);n("exchange_items",r);const x=r.reduce((d,u)=>d+u.quantity*u.purchase_price,0);n("exchange",x)}})})]}))]})]})})})]})})})})]}),a.items.length>0&&e.jsxs("div",{className:"w-full col-span-1",children:[e.jsx("div",{className:"font-sans antialiased bg-grey-lightest",children:e.jsx("div",{className:"w-full bg-grey-lightest",children:e.jsx("div",{className:"container mx-auto py-3 px-5",children:e.jsx("div",{className:"w-full lg:w-full mx-auto bg-white rounded shadow p-10",children:a.items.length>0&&e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"w-full flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-grey-darker text-lg font-bold ",children:"Cart"}),e.jsx(Me,{size:25,onClick:()=>n("items",[])})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsx("div",{class:"font-[sans-serif] overflow-x-auto",children:e.jsxs("table",{class:"min-w-full bg-white",children:[e.jsx("thead",{class:"whitespace-nowrap",children:e.jsxs("tr",{children:[e.jsx("th",{class:"p-4 text-left text-sm font-semibold text-black",children:"Product Info"}),e.jsx("th",{class:"p-4 text-left text-sm font-semibold text-black",children:"price"}),e.jsx("th",{class:"p-4 text-left text-sm font-semibold text-black",children:"Qty"}),e.jsx("th",{class:"p-4 text-left text-sm font-semibold text-black",children:"Total"}),e.jsx("th",{class:"p-4 text-left text-sm font-semibold text-black"})]})}),e.jsx("tbody",{class:"whitespace-nowrap",children:a.items.map((s,r)=>{var x,d,u,oe,me,be,pe,he,ue,ge;return e.jsxs("tr",{class:"odd:bg-gray-50",children:[e.jsx("td",{class:" text-sm",children:e.jsx("div",{class:"flex items-center cursor-pointer w-max",children:e.jsxs("div",{class:"ml-4 ",children:[e.jsxs("p",{class:"text-sm text-black ",children:["Name : ",(x=s==null?void 0:s.data)==null?void 0:x.name]}),((d=s==null?void 0:s.data)==null?void 0:d.model)&&e.jsxs("p",{class:"text-xs text-gray-500 mt-0.5",children:["Model :",(u=s==null?void 0:s.data)==null?void 0:u.model," "]}),((oe=s==null?void 0:s.data)==null?void 0:oe.identity_type)!=="none"&&e.jsxs("p",{class:"text-xs text-gray-500 mt-0.5",children:[(me=s==null?void 0:s.data)==null?void 0:me.identity_type,":",(be=s==null?void 0:s.data)==null?void 0:be.identity_value," "]})]})})}),e.jsx("td",{class:"p-4 text-sm text-black",children:e.jsx("input",{type:"number",name:"selling_price",value:(pe=s==null?void 0:s.data)==null?void 0:pe.selling_price,className:"appearance-none border rounded w-[100px] py-2 px-3 text-grey-darker",min:0,onChange:g=>{n(`items.${r}.data.selling_price`,g.target.value||0)}})}),e.jsx("td",{class:"p-4 text-sm text-black",children:e.jsx("input",{type:"number",name:"quantity",value:s==null?void 0:s.quantity,className:"appearance-none border rounded w-[60px] py-2 px-3 text-grey-darker",max:((ue=(he=s==null?void 0:s.data)==null?void 0:he.stock)==null?void 0:ue.quantity)||0,onChange:g=>{var je,ye,fe,Ne;const f=Number(g.target.value);if(f>((ye=(je=s==null?void 0:s.data)==null?void 0:je.stock)==null?void 0:ye.quantity)){h.error("Quantity exceeds stock quantity");return}if(f<=0){h.error("Quantity must be greater than 0");return}n(`items.${r}.quantity`,Math.min(f,((Ne=(fe=s==null?void 0:s.data)==null?void 0:fe.stock)==null?void 0:Ne.quantity)||0))}})}),e.jsx("td",{class:"p-4 text-sm text-black",children:(s==null?void 0:s.quantity)*((ge=s==null?void 0:s.data)==null?void 0:ge.selling_price)||0}),e.jsx("td",{class:"p-4 text-sm text-black",children:e.jsx(ke,{color:"red",className:"cursor-pointer hover:scale-110",onClick:()=>{n("items",a.items.filter(g=>g.data.id!==s.data.id))}})})]})})})]})})})]})})})})}),e.jsx("div",{className:"font-sans antialiased bg-grey-lightest",children:e.jsx("div",{className:"w-full bg-grey-lightest",children:e.jsx("div",{className:"container mx-auto py-3 px-5",children:e.jsx("div",{className:"w-full lg:w-full mx-auto bg-white rounded shadow p-10",children:a.items.length>0&&e.jsxs("div",{className:"mb-2",children:[e.jsx("div",{className:"w-full flex items-center justify-between mb-2",children:e.jsx("label",{className:"block text-grey-darker text-lg font-bold ",children:"Calculation"})}),e.jsxs("ul",{className:"mt-5",children:[e.jsxs("li",{className:"w-full flex items-center justify-between mb-2",children:[e.jsx("div",{children:"Total Amount:"}),e.jsx("div",{children:e.jsx("input",{type:"number",value:a.items.reduce((s,r)=>s+r.quantity*r.data.selling_price,0),className:"appearance-none border rounded disabled:bg-gray-200 disabled:hover:bg-gray-200	 py-2 px-3 text-grey-darker",disabled:!0})})]}),e.jsxs("li",{className:"w-full flex items-center justify-between",children:[e.jsx("div",{children:"Extra Charges:"}),e.jsxs("div",{children:[" ",e.jsx(o,{type:"number",name:"extra_charges",value:a.extra_charges,className:"appearance-none border rounded 	 py-2 px-3 text-grey-darker"})]})]}),e.jsx("li",{className:"w-full flex items-center justify-between mb-2",children:e.jsx(m,{name:"extra_charges",component:"div",className:"text-red-600 text-xs mt-1"})}),e.jsxs("li",{className:"w-full flex items-center justify-between",children:[e.jsx("div",{children:"Discount:"}),e.jsxs("div",{children:[" ",e.jsx(o,{type:"number",name:"discount",value:a.discount,className:"appearance-none border rounded 	 py-2 px-3 text-grey-darker"})]})]}),e.jsx("li",{className:"w-full flex items-center justify-between mb-2",children:e.jsx(m,{name:"discount",component:"div",className:"text-red-600 text-xs mt-1"})}),e.jsxs("li",{className:"w-full flex items-center justify-between mb-2",children:[e.jsx("div",{children:"Exchange:"}),e.jsxs("div",{children:[" ",e.jsx(o,{type:"number",disabled:!0,name:"exchange",value:a.exchange,className:"appearance-none border rounded disabled:bg-gray-200	 py-2 px-3 text-grey-darker"})]})]}),e.jsxs("li",{className:"w-full flex items-center justify-between mb-2",children:[e.jsx("div",{children:"Tax:"}),e.jsx("div",{children:e.jsx("input",{type:"number",value:a.tax,className:"appearance-none border rounded disabled:bg-gray-200 disabled:hover:bg-gray-200	 py-2 px-3 text-grey-darker",disabled:!0})})]}),e.jsxs("li",{className:"w-full flex items-center justify-between mb-2",children:[e.jsx("div",{children:"Shipping Cost:"}),e.jsx("div",{children:e.jsx("input",{type:"number",value:parseFloat(a.shipping_charges||0).toFixed(2),className:"appearance-none border rounded disabled:bg-gray-200 disabled:hover:bg-gray-200	 py-2 px-3 text-grey-darker",disabled:!0})})]}),e.jsxs("li",{className:"w-full flex items-center justify-between mb-2",children:[e.jsx("div",{className:"font-bold",children:"Grand Total:"}),e.jsx("div",{children:e.jsx("input",{type:"number",value:a.items.reduce((s,r)=>s+r.quantity*r.data.selling_price,0)+(parseFloat(a.extra_charges||0)+parseFloat(a.tax||0)+parseFloat(a.shipping_charges||0))-(parseFloat(a.exchange||0)+parseFloat(a.discount||0)),className:"appearance-none border rounded disabled:bg-gray-200 disabled:hover:bg-gray-200 py-2 px-3 text-grey-darker",disabled:!0})})]}),e.jsxs("li",{className:"w-full flex items-center justify-between",children:[e.jsx("div",{children:"Paid Amount:"}),e.jsx("div",{children:e.jsx(o,{type:"number",name:"paid_amount",step:"0.01",className:"appearance-none border rounded py-2 px-3 text-grey-darker"})})]}),e.jsx("li",{className:"w-full flex items-center justify-between mb-2",children:e.jsx(m,{name:"paid_amount",component:"div",className:"text-red-600 text-xs mt-1"})})]})]})})})})})]})]})})}})]})}export{rt as default};
