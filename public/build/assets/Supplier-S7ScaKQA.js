import{r as l,q as m,j as e,Y as b,y as r,a as N}from"./app-B0udZE7F.js";import{F as v,a as w,b as _}from"./formik.esm-DydONQTA.js";import{A as S,k,l as A}from"./AuthenticatedLayout-BTKJ93ER.js";import{a as C}from"./index-C4GIR6gR.js";import{B as F}from"./ReactToastify-CRRX_O1A.js";import{F as I}from"./ReactContexify.min-CeRt7MVJ.js";import"./transition-DiPsKi7_.js";import"./Modal-CstDktYW.js";import"./proxy-BbYb6a1t.js";function J(p){const{auth:x,suppliers:a,totalPendingAmount:L,totalPaidAmount:P,totalSuppliers:M,status:n,search:c}=p,[D,T]=l.useState(null),[B,E]=l.useState(!1),[i,O]=l.useState([]),{url:u}=m(),t=new URLSearchParams(u.split("?")[1]),[R,V]=l.useState("cards"),{show:h}=I({id:"context-menu"}),g=s=>{r.get(route("ledger.supplier.supplierLedger",s))};return e.jsxs(S,{Product:x.Product,header:e.jsx(e.Fragment,{}),children:[e.jsx(b,{title:"Supplier"}),e.jsx("div",{className:"flex flex-col px-4 mt-4 mx-auto w-full",children:e.jsxs("div",{className:"w-full ",children:[e.jsx("div",{className:"flex flex-col md:flex-row justify-end items-center mt-2 mb-4",children:e.jsx("div",{className:"flex flex-col md:flex-row w-full md:justify-end space-y-2 md:space-y-0 md:space-x-2",children:e.jsx(v,{enableReinitialize:!0,initialValues:{search:""},onSubmit:s=>{r.get(route("ledger.supplier"),{search:s.search},{preserveState:!0})},children:({values:s,setFieldValue:o,handleSubmit:y})=>e.jsx(w,{className:"w-full flex items-center gap-3",children:e.jsx("div",{className:"relative w-full md:max-w-md",children:e.jsx(_,{name:"search",children:({field:d,form:j})=>e.jsxs("div",{className:"relative",children:[e.jsx("input",{...d,type:"text",placeholder:"Search suppliers...",className:"w-full pl-10 pr-10 py-2 rounded-xl border border-gray-300 focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 focus:outline-none transition-all duration-300 bg-white shadow-sm hover:shadow-md placeholder-gray-400 text-gray-800",onKeyDown:f=>{f.key==="Enter"&&y()}}),e.jsx("button",{type:"submit",className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-cyan-500 focus:outline-none transition-colors","aria-label":"Search",children:e.jsx(k,{className:"w-4 h-4"})}),d.value&&e.jsx("button",{type:"button",onClick:()=>{j.setFieldValue("search",""),r.get(route("ledger.supplier"))},className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-red-500 focus:outline-none transition-colors","aria-label":"Clear search",children:e.jsx(A,{className:"w-4 h-4"})})]})})})})})})}),e.jsxs("div",{className:"overflow-x-auto rounded-xl border border-gray-200 shadow-sm",children:[e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 bg-white",children:[e.jsx("thead",{className:"whitespace-nowrap text-xs uppercase bg-gray-200 text-gray-700 tracking-wide border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left ",children:"Supplier Info"}),e.jsx("th",{className:"px-4 py-3 text-left",children:"Contact"}),e.jsx("th",{className:"px-4 py-3 text-left",children:"Address"}),e.jsx("th",{className:"px-4 py-3 text-left",children:"Code"}),e.jsx("th",{className:"px-4 py-3 ",children:"Total Invoices"}),e.jsx("th",{className:"px-4 py-3 ",children:"Total Amount"}),e.jsx("th",{className:"px-4 py-3 ",children:"Amount Paid"}),e.jsx("th",{className:"px-4 py-3 ",children:"Amount Pending"}),e.jsx("th",{className:"px-4 py-3 ",children:"Action"})]})}),e.jsxs("tbody",{className:"divide-y divide-gray-100",children:[a.data.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"10",className:"px-4 py-1 text-center text-gray-500",children:"No Supplier found."})}),a.data.map(s=>e.jsxs("tr",{onContextMenu:o=>{o.preventDefault(),h({event:o,props:s})},className:`${(s==null?void 0:s.total_amount_paid)===0&&(s==null?void 0:s.total_amount)>0?"bg-red-50":(s==null?void 0:s.total_amount_paid)>0&&(s==null?void 0:s.total_amount_pending)>0?"bg-yellow-50":""} ${i.includes(s.id)?"border-l-4 border-black":""}`,children:[e.jsx("td",{className:"px-4 py-1 text-gray-800",children:e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium",children:["Person: ",s.person_name]}),s.email&&e.jsxs("p",{className:"text-xs text-gray-500",children:["Email: ",s.email]})]})}),e.jsx("td",{className:"px-4 py-1 text-gray-700",children:(s==null?void 0:s.contact)||"N/A"}),e.jsx("td",{className:"px-4 py-1 text-gray-700",children:(s==null?void 0:s.address)||"N/A"}),e.jsxs("td",{className:"px-4 py-3.5 flex items-center text-blue-600",children:[e.jsx(N,{href:route("product.index",{invoicecode:s.code}),className:"hover:underline ",children:(s==null?void 0:s.code)||"N/A"}),e.jsx(C,{size:18,onClick:()=>{navigator.clipboard.writeText(s.code),F.success("Copied!")},className:"ml-2 text-gray-500 cursor-pointer hover:text-black"})]}),e.jsx("td",{className:"px-4 py-1 text-gray-700 text-center",children:(s==null?void 0:s.total_supplierinvoices)||0}),e.jsx("td",{className:"px-4 py-1 text-gray-700 text-center",children:(s==null?void 0:s.total_amount)||0}),e.jsx("td",{className:"px-4 py-1 text-gray-700 text-center",children:(s==null?void 0:s.total_amount_paid)||0}),e.jsx("td",{className:"px-4 py-1 text-gray-700 text-center",children:(s==null?void 0:s.total_amount_pending)||0}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsx("button",{onClick:()=>g(s.code||s.id),className:"px-3 py-1 text-xs font-semibold text-white bg-black rounded-md hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-cyan-500",children:"Ledger"})})]},s.id))]})]}),e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 text-xs text-gray-500 bg-gray-50 border-t",children:[e.jsxs("span",{children:["Showing ",a.from," - ",a.to," of ",a.total]}),e.jsxs("div",{className:"space-x-2",children:[a.to<a.total&&e.jsx("button",{onClick:()=>r.get(route("ledger.supplier"),{status:n||"",search:c||"",per_page:t.get("per_page")?parseInt(t.get("per_page"))+10:20}),className:"px-3 py-1 bg-white border rounded shadow hover:bg-gray-100",children:"Load More"}),t.get("per_page")&&parseInt(t.get("per_page"))>10&&e.jsx("button",{onClick:()=>r.get(route("ledger.supplier"),{status:n||"",search:c||"",per_page:Math.max(10,parseInt(t.get("per_page"))-10)}),className:"px-3 py-1 bg-white border rounded shadow hover:bg-gray-100",children:"Load Less"})]})]})]})]})})]})}export{J as default};
