import{r as p,j as e,Y as _e,y as u}from"./app-C-NEWK0O.js";import{F as we,a as qe,b as l,E as r}from"./formik.esm-BfAicmq3.js";import{G as be,A as Se}from"./AuthenticatedLayout-ByUOrBBB.js";import{c as Ce,d as N,e as Ee,b as m,a as x,f as Pe}from"./index.esm-Calhhglk.js";import{S as f}from"./react-select.esm-CbuiOd18.js";import"./quill.snow-DIDGKDdm.js";import{B as b}from"./ReactToastify-D9VZo1cn.js";import"./transition-14Z3tDat.js";import"./Modal-DjPIAI2G.js";function Ae(o){return be({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"},child:[]}]})(o)}function Te(o){return be({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"},child:[]}]})(o)}function Ge(o){const{auth:Me,users:k,items:v,order_id:je,taxs:_,shippingrates:ge}=o,[ye,w]=p.useState(!1),[Ne,q]=p.useState(!1),[t,j]=p.useState(null),[fe,ke]=p.useState(null),[ve,S]=p.useState(!1);return e.jsxs(Se,{header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Add Order"}),children:[e.jsx(_e,{title:"Order"}),e.jsx(we,{enableReinitialize:!0,initialValues:{name:"",email:"",phone:"",address:"",total:0,payable_amount:0,paid_amount:0,method:"",cheque_no:"",cheque_date:"",status:"completed",bank_name:"",bank_branch:"",bank_account:"",online_payment_link:"",extra_charges:0,shipping_charges:0,discount:0,tax:0,is_installment:"0",installment_amount:0,installment_period:"",installment_count:0,installment_start_date:"",installment_end_date:"",user_id:"",items:[],tax_id:"",shipping_id:""},validationSchema:Ce({name:x().required("Name is required"),email:x().email("Invalid email address").required("Email is required"),phone:x().max(15,"Phone number must be at most 15 digits").min(10,"Phone number must be at least 10 digits").required("Phone is required"),address:x().required("Address is required"),total:m().min(0,"Total must be a positive number").required("Total is required"),payable_amount:m().min(0,"Payable amount must be a positive number").required("Payable amount is required"),paid_amount:m().min(0,"Paid amount must be a positive number").required("Paid amount is required"),method:x().required("Payment method is required"),cheque_no:x().when("method",{is:"cheque",then:s=>s.required(),otherwise:s=>s.optional()}),cheque_date:N().when("method",{is:"cheque",then:s=>s.required(),otherwise:s=>s.optional()}),bank_name:x().when("method",{is:"bank",then:s=>s.required(),otherwise:s=>s.optional()}),bank_branch:x().when("method",{is:"bank",then:s=>s.required(),otherwise:s=>s.optional()}),bank_account:x().when("method",{is:"bank",then:s=>s.required(),otherwise:s=>s.optional()}),online_payment_link:x().url("Invalid URL"),extra_charges:m().min(0,"Extra charges must be a positive number"),discount:m().min(0,"Discount must be a positive number"),tax:m().min(0,"Tax must be a positive number"),status:x().oneOf(["pending","completed","cancelled"],"Invalid status").required("Status is required"),is_installment:Pe(),installment_amount:m().when("is_installment",{is:!0,then:s=>s.number().min(0,"Installment amount must be a positive number").required("Installment amount is required"),otherwise:s=>s.optional()}),installment_period:x().when("is_installment",{is:!0,then:s=>s.string().required("Installment period is required"),otherwise:s=>s.optional()}),installment_count:m().when("is_installment",{is:!0,then:s=>s.number().min(1,"Installment count must be at least 1").required("Installment count is required"),otherwise:s=>s.optional()}),installment_start_date:N().when("is_installment",{is:!0,then:s=>s.date().required("Installment start date is required"),otherwise:s=>s.optional()}),installment_end_date:N().when("is_installment",{is:!0,then:s=>s.date().min(Ee("installment_start_date"),"End date must be after start date").required("Installment end date is required"),otherwise:s=>s.optional()})}),onSubmit:(s,{setSubmitting:n,resetForm:C})=>{u.post(route("supplier.store"),s,{onSuccess:()=>{C()},preserveScroll:!0,preserveState:!0})},children:({isSubmitting:s,values:n,errors:C,setFieldValue:d})=>{var E,P,A,T,M,L,B,$,D,Q,z,O,H,F,G,R,Y,U,W,J,K,X,Z,V,I,ee,te,ae,se;return e.jsx(qe,{children:e.jsxs("div",{className:"grid grid-cols-3 gap-1",children:[e.jsxs("div",{className:`w-full ${n.items.length>0?"col-span-2":"col-span-3"}`,children:[e.jsx("div",{className:"font-sans antialiased bg-grey-lightest",children:e.jsx("div",{className:"w-full bg-grey-lightest",children:e.jsx("div",{className:"container mx-auto py-3 px-5",children:e.jsxs("div",{className:"w-full lg:w-full mx-auto bg-white rounded shadow p-10",children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"w-full flex items-center justify-between",children:[e.jsxs("label",{className:"block text-grey-darker text-lg font-bold mb-2",children:["Order #",je]}),e.jsxs("div",{className:"flex items-center justify-start gap-1 ",children:[e.jsx("button",{className:"bg-black hover:bg-blue-dark text-white font-bold py-2 px-4 rounded-lg",type:"submit",children:"Submit"}),e.jsx("button",{onClick:()=>u.visit(route("order.index")),className:"bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-lg",type:"button",children:"Close"})]})]}),e.jsx("label",{className:"block text-grey-darker text-sm  mb-2",for:"shop_name",children:"Select Customer (Existing)"}),e.jsx(f,{onChange:a=>{d("user_id",a.value),d("name",a.name),d("email",a.email),d("phone",a.phone),d("address",a.address)},onInputChange:a=>{w(!0),setTimeout(()=>{u.get(route("order.create"),{searchuser:a},{preserveScroll:!0,preserveState:!0}),w(!1)},1e3)},isSearchable:!0,isLoading:ye,value:k.find(a=>a.value===n.user_id),options:k,className:"basic-single",classNamePrefix:"select"})]}),e.jsxs("div",{className:"flex mb-4",children:[e.jsxs("div",{className:"w-1/2 mr-1",children:[e.jsx("label",{className:"block text-grey-darker text-sm  mb-2",children:"Customer Name"}),e.jsx(l,{name:"name",className:"appearance-none border rounded w-full py-2 px-3 text-grey-darker",type:"text",placeholder:"Enter Customer name"}),e.jsx(r,{name:"name",component:"div",className:"text-red-500 text-xs mt-1"})]}),e.jsxs("div",{className:"w-1/2 mr-1",children:[e.jsx("label",{className:"block text-grey-darker text-sm  mb-2",children:"Customer Email"}),e.jsx(l,{name:"email",className:"appearance-none border rounded w-full py-2 px-3 text-grey-darker",type:"text",placeholder:"Enter Customer email"}),e.jsx(r,{name:"email",component:"div",className:"text-red-500 text-xs mt-1"})]})]}),e.jsxs("div",{className:"flex mb-4",children:[e.jsxs("div",{className:"w-1/2 mr-1",children:[e.jsx("label",{className:"block text-grey-darker text-sm  mb-2",children:"Customer Phone"}),e.jsx(l,{name:"phone",className:"appearance-none border rounded w-full py-2 px-3 text-grey-darker",type:"text",placeholder:"Enter Customer phone"}),e.jsx(r,{name:"phone",component:"div",className:"text-red-500 text-xs mt-1"})]}),e.jsxs("div",{className:"w-1/2 mr-1",children:[e.jsx("label",{className:"block text-grey-darker text-sm  mb-2",children:"Customer Address"}),e.jsx(l,{name:"address",className:"appearance-none border rounded w-full py-2 px-3 text-grey-darker",type:"text",placeholder:"Enter Customer address"}),e.jsx(r,{name:"address",component:"div",className:"text-red-500 text-xs mt-1"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-grey-darker text-sm  mb-2",for:"shop_name",children:"Select Status"}),e.jsxs(l,{name:"status",className:"appearance-none border rounded w-full py-2 px-3 text-grey-darker",as:"select",children:[e.jsx("option",{value:"",children:"Select Status"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"completed",children:"Completed"})]}),e.jsx(r,{name:"status",component:"div",className:"text-red-500 text-xs mt-1"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-grey-darker text-sm  mb-2",for:"shop_name",children:"Select Items"}),e.jsx(f,{onChange:a=>{j(a)},onInputChange:a=>{q(!0),setTimeout(()=>{u.get(route("order.create"),{searchitem:a},{preserveScroll:!0,preserveState:!0}),q(!1)},1e3)},isSearchable:!0,isLoading:Ne,value:v.find(a=>a.value===(t==null?void 0:t.value)),options:v,className:"basic-single",classNamePrefix:"select"})]}),t&&e.jsxs("div",{className:"flex  ",children:[e.jsx("div",{className:"w-1/2 mr-1",children:e.jsx("input",{type:"number",value:t==null?void 0:t.quantity,onChange:a=>j({...t,quantity:a.target.value}),placeholder:"Enter Quantity",className:"appearance-none border rounded w-full py-2 px-3 text-grey-darker"})}),e.jsx("div",{className:"w-1/2 mr-1",children:e.jsx("button",{onClick:()=>{var a,i;if((t==null?void 0:t.quantity)>((i=(a=t==null?void 0:t.data)==null?void 0:a.stock)==null?void 0:i.quantity)){b.error("Quantity exceeds stock quantity");return}if(n.items.find(c=>{var h;return c.data.id===((h=t==null?void 0:t.data)==null?void 0:h.id)})){b.error("Item already added");return}if((t==null?void 0:t.quantity)<=0){b.error("Quantity must be greater than 0");return}j(null),d("items",[...n.items,t]),console.log(n.items)},className:"bg-black text-sm hover:bg-blue-dark text-white font-bold py-[11px] px-4  rounded-lg",type:"button",children:"Add Item"})})]}),t&&e.jsx("div",{className:"my-5",children:e.jsx("div",{className:"",children:e.jsx("div",{class:"font-[sans-serif] ",children:e.jsx("table",{class:"min-w-full bg-white",children:e.jsxs("thead",{class:"whitespace-nowrap",children:[e.jsxs("tr",{class:"odd:bg-gray-50",children:[e.jsx("th",{class:"p-4 text-left text-sm font-semibold text-black",children:"Product Info"}),e.jsx("td",{class:" text-sm",children:e.jsx("div",{class:"flex items-center cursor-pointer w-max",children:e.jsxs("div",{class:"ml-4 ",children:[e.jsxs("p",{class:"text-sm text-black ",children:["Name : ",(E=t==null?void 0:t.data)==null?void 0:E.name]}),((P=t==null?void 0:t.data)==null?void 0:P.model)&&e.jsxs("p",{class:"text-xs text-gray-500 mt-0.5",children:["Model :",(A=t==null?void 0:t.data)==null?void 0:A.model," "]}),((T=t==null?void 0:t.data)==null?void 0:T.identity_type)!=="none"&&e.jsxs("p",{class:"text-xs text-gray-500 mt-0.5",children:[(M=t==null?void 0:t.data)==null?void 0:M.identity_type,":",(L=t==null?void 0:t.data)==null?void 0:L.identity_value," "]})]})})})]}),e.jsxs("tr",{class:"odd:bg-gray-50",children:[e.jsx("th",{class:"p-4 text-left text-sm font-semibold text-black",children:"Purchase price"}),e.jsx("td",{class:"p-4 text-sm text-black",children:((B=t==null?void 0:t.data)==null?void 0:B.purchase_price)||"N/A"})]}),e.jsxs("tr",{class:"odd:bg-gray-50",children:[e.jsx("th",{class:"p-4 text-left text-sm font-semibold text-black",children:"Selling price"}),e.jsx("td",{class:"p-4 text-sm text-black",children:(($=t==null?void 0:t.data)==null?void 0:$.selling_price)||"N/A"})]}),e.jsxs("tr",{class:"odd:bg-gray-50",children:[e.jsx("th",{class:"p-4 text-left text-sm font-semibold text-black",children:"Warranty period"}),e.jsxs("td",{class:"p-4 text-sm text-black",children:[((D=t==null?void 0:t.data)==null?void 0:D.is_warranty)=="0"&&e.jsx("p",{class:"text-xs text-gray-500 mt-0.5",children:"No"}),((Q=t==null?void 0:t.data)==null?void 0:Q.is_warranty)=="1"&&e.jsxs("p",{class:"text-xs text-gray-500 mt-0.5",children:[(z=t==null?void 0:t.data)==null?void 0:z.warranty_period," - ",(O=t==null?void 0:t.data)==null?void 0:O.warranty_type," "]})]})]}),e.jsxs("tr",{class:"odd:bg-gray-50",children:[e.jsx("th",{class:"p-4 text-left text-sm font-semibold text-black",children:"Is Borrow"}),e.jsxs("td",{class:"p-4 text-sm text-black",children:[((H=t==null?void 0:t.data)==null?void 0:H.is_borrow)=="0"&&e.jsx("p",{class:"text-xs text-gray-500 mt-0.5",children:"No"}),((F=t==null?void 0:t.data)==null?void 0:F.is_borrow)=="1"&&e.jsx("p",{class:"text-xs text-gray-500 mt-0.5",children:e.jsxs("ul",{class:"list-disc",children:[((G=t==null?void 0:t.data)==null?void 0:G.shop_name)&&e.jsxs("li",{children:["Name: ",(R=t==null?void 0:t.data)==null?void 0:R.shop_name]}),((Y=t==null?void 0:t.data)==null?void 0:Y.shop_address)&&e.jsxs("li",{children:["Address: ",(U=t==null?void 0:t.data)==null?void 0:U.shop_address]}),((W=t==null?void 0:t.data)==null?void 0:W.shop_phone)&&e.jsxs("li",{children:["Phone: ",(J=t==null?void 0:t.data)==null?void 0:J.shop_phone]}),((K=t==null?void 0:t.data)==null?void 0:K.shop_email)&&e.jsxs("li",{children:["Email: ",(X=t==null?void 0:t.data)==null?void 0:X.shop_email]})]})})]})]}),e.jsxs("tr",{class:"odd:bg-gray-50",children:[e.jsx("th",{class:"p-4 text-left text-sm font-semibold text-black",children:"Stock  Quantity"}),e.jsx("td",{class:"p-4 text-sm text-black",children:((V=(Z=t==null?void 0:t.data)==null?void 0:Z.stock)==null?void 0:V.quantity)||0})]}),e.jsxs("tr",{class:"odd:bg-gray-50",children:[e.jsx("th",{class:"p-4 text-left text-sm font-semibold text-black",children:"Stock Status"}),e.jsx("td",{class:"p-4",children:(ee=(I=t==null?void 0:t.data)==null?void 0:I.stock)!=null&&ee.status?e.jsx("p",{class:"text-xs text-gray-500 mt-0.5",children:"Available"}):e.jsx("p",{class:"text-xs text-gray-500 mt-0.5",children:"Not Available"})})]}),e.jsxs("tr",{class:"odd:bg-gray-50",children:[e.jsx("th",{class:"p-4 text-left text-sm font-semibold text-black",children:"Supplier Invoice"}),e.jsxs("td",{class:"p-4 text-sm text-black",children:[((te=t==null?void 0:t.data)==null?void 0:te.is_supplier)=="0"&&e.jsx("p",{class:"text-xs text-gray-500 mt-0.5",children:"No"}),((ae=t==null?void 0:t.data)==null?void 0:ae.is_supplier)=="1"&&e.jsx("p",{class:"text-xs text-gray-500 mt-0.5",children:(se=t==null?void 0:t.data)==null?void 0:se.supplier_invoice_no})]})]})]})})})})})]})})})}),e.jsx("div",{className:"font-sans antialiased bg-grey-lightest",children:e.jsx("div",{className:"w-full bg-grey-lightest",children:e.jsx("div",{className:"container mx-auto py-3 px-5",children:e.jsxs("div",{className:"w-full lg:w-full mx-auto bg-white rounded shadow p-10",children:[e.jsx("div",{className:"mb-4",children:e.jsx("div",{className:"w-full flex items-center justify-between",children:e.jsx("label",{className:"block text-grey-darker text-lg font-bold mb-2",children:"Payment"})})}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-grey-darker text-sm font-bold mb-2",children:"Is Installment"}),e.jsxs("div",{className:"flex items-center",children:[e.jsxs("label",{className:"mr-4",children:[e.jsx(l,{name:"is_installment",type:"radio",value:"1",className:"mr-2"})," Yes"]}),e.jsxs("label",{children:[e.jsx(l,{name:"is_installment",type:"radio",value:"0",className:"mr-2"})," No"]})]}),e.jsx(r,{name:"is_installment",component:"div",className:"text-red-500 text-xs mt-1"})]}),n.is_installment=="1"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex mb-4",children:[e.jsxs("div",{className:"w-1/2 mr-1",children:[e.jsx("label",{className:"block text-grey-darker text-sm  mb-2",children:"	Installment Amount"}),e.jsx(l,{name:"installment_amount",className:"appearance-none border rounded w-full py-2 px-3 text-grey-darker",type:"text",placeholder:"Enter Installment Amount"}),e.jsx(r,{name:"installment_amount",component:"div",className:"text-red-500 text-xs mt-1"})]}),e.jsxs("div",{className:"w-1/2 mr-1",children:[e.jsx("label",{className:"block text-grey-darker text-sm  mb-2",children:"Installment Period"}),e.jsx(l,{name:"installment_period",className:"appearance-none border rounded w-full py-2 px-3 text-grey-darker",type:"text",placeholder:"Enter Installment Period"}),e.jsx(r,{name:"installment_period",component:"div",className:"text-red-500 text-xs mt-1"})]})]}),e.jsxs("div",{className:"flex mb-4",children:[e.jsxs("div",{className:"w-1/2 mr-1",children:[e.jsx("label",{className:"block text-grey-darker text-sm  mb-2",children:"	Installment Start Date"}),e.jsx(l,{name:"installment_start_date",className:"appearance-none border rounded w-full py-2 px-3 text-grey-darker",type:"date",placeholder:"Enter Installment Start Date"}),e.jsx(r,{name:"installment_start_date",component:"div",className:"text-red-500 text-xs mt-1"})]}),e.jsxs("div",{className:"w-1/2 mr-1",children:[e.jsx("label",{className:"block text-grey-darker text-sm  mb-2",children:"Installment End Date"}),e.jsx(l,{name:"installment_end_date",className:"appearance-none border rounded w-full py-2 px-3 text-grey-darker",type:"date",placeholder:"Enter Installment End Date"}),e.jsx(r,{name:"installment_end_date",component:"div",className:"text-red-500 text-xs mt-1"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-grey-darker text-sm  mb-2 ",children:"Installment Count"}),e.jsx(l,{name:"installment_count",className:"appearance-none border rounded w-full py-2 px-3 text-grey-darker",type:"number",placeholder:"Enter Installment Count"}),e.jsx(r,{name:"installment_count",component:"div",className:"text-red-500 text-xs mt-1"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-grey-darker text-sm  mb-2 font-bold",children:"Select Payment Method"}),e.jsxs(l,{name:"method",className:"appearance-none border rounded w-full py-2 px-3 text-grey-darker",as:"select",children:[e.jsx("option",{value:"",children:"Select Payment Method"}),e.jsx("option",{value:"cash",children:"Cash"}),e.jsx("option",{value:"bank",children:"Bank Transfer"}),e.jsx("option",{value:"cheque",children:"Cheque"}),e.jsx("option",{value:"online",children:"Online"})]}),e.jsx(r,{name:"method",component:"div",className:"text-red-500 text-xs mt-1"})]}),n.method==="cheque"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-grey-darker text-sm mb-2",children:"Cheque No (optional)"}),e.jsx(l,{name:"cheque_no",className:"appearance-none border rounded w-full py-2 px-3 text-grey-darker",type:"text",placeholder:"Enter cheque no"}),e.jsx(r,{name:"cheque_no",component:"div",className:"text-red-500 text-xs mt-1"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-grey-darker text-sm mb-2",children:"Cheque Date (optional)"}),e.jsx(l,{name:"cheque_date",className:"appearance-none border rounded w-full py-2 px-3 text-grey-darker",type:"date"}),e.jsx(r,{name:"cheque_date",component:"div",className:"text-red-500 text-xs mt-1"})]})]}),n.method==="bank"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-grey-darker text-sm mb-2",children:"Bank Name (optional)"}),e.jsx(l,{name:"bank_name",className:"appearance-none border rounded w-full py-2 px-3 text-grey-darker",type:"text",placeholder:"Enter bank name"}),e.jsx(r,{name:"bank_name",component:"div",className:"text-red-500 text-xs mt-1"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-grey-darker text-sm mb-2",children:"Brank Brank (optional)"}),e.jsx(l,{name:"bank_branch",className:"appearance-none border rounded w-full py-2 px-3 text-grey-darker",type:"text",placeholder:"Enter bank branch"}),e.jsx(r,{name:"bank_branch",component:"div",className:"text-red-500 text-xs mt-1"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-grey-darker text-sm mb-2",children:"Bank Account No (optional)"}),e.jsx(l,{name:"bank_account",className:"appearance-none border rounded w-full py-2 px-3 text-grey-darker",type:"text",placeholder:"Enter bank account no"}),e.jsx(r,{name:"bank_account",component:"div",className:"text-red-500 text-xs mt-1"})]})]}),n.method==="online"&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-grey-darker text-sm mb-2",children:"Online payment link (optional)"}),e.jsx(l,{name:"online_payment_link",className:"appearance-none border rounded w-full py-2 px-3 text-grey-darker",type:"url",placeholder:"Enter online payment link"}),e.jsx(r,{name:"online_payment_link",component:"div",className:"text-red-500 text-xs mt-1"})]})}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-grey-darker text-sm  mb-2 font-bold",children:"Select Tax"}),e.jsxs(l,{name:"tax_id",as:"select",onChange:a=>{const i=_.find(c=>c.id==a.target.value);console.log(i),d("tax",i?i.cost:""),d("tax_id",a.target.value)},className:"appearance-none border rounded w-full py-2 px-3 text-grey-darker",children:[e.jsx("option",{value:"",children:"Select Tax"}),_.map(a=>e.jsxs("option",{value:a.id,children:[a.name," - ",a.cost]},a.id))]}),e.jsx(r,{name:"tax_id",component:"div",className:"text-red-500 text-xs mt-1"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-grey-darker text-sm  mb-2 font-bold",children:"Select Shipping Cost"}),e.jsx(f,{onChange:a=>{console.log(a),ke(a),d("shipping_id",a.value),d("shipping_charges",a.fee)},onInputChange:a=>{S(!0),setTimeout(()=>{u.get(route("order.create"),{searchshipping:a},{preserveScroll:!0,preserveState:!0}),S(!1)},1e3)},isSearchable:!0,isLoading:ve,value:fe,options:ge,className:"basic-single",classNamePrefix:"select"}),e.jsx(r,{name:"shipping_id",component:"div",className:"text-red-500 text-xs mt-1"})]})]})})})})]}),n.items.length>0&&e.jsxs("div",{className:"w-full col-span-1",children:[e.jsx("div",{className:"font-sans antialiased bg-grey-lightest",children:e.jsx("div",{className:"w-full bg-grey-lightest",children:e.jsx("div",{className:"container mx-auto py-3 px-5",children:e.jsx("div",{className:"w-full lg:w-full mx-auto bg-white rounded shadow p-10",children:n.items.length>0&&e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"w-full flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-grey-darker text-lg font-bold ",children:"Cart"}),e.jsx(Te,{size:25,onClick:()=>d("items",[])})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsx("div",{class:"font-[sans-serif] overflow-x-auto",children:e.jsxs("table",{class:"min-w-full bg-white",children:[e.jsx("thead",{class:"whitespace-nowrap",children:e.jsxs("tr",{children:[e.jsx("th",{class:"p-4 text-left text-sm font-semibold text-black",children:"Product Info"}),e.jsx("th",{class:"p-4 text-left text-sm font-semibold text-black",children:"price"}),e.jsx("th",{class:"p-4 text-left text-sm font-semibold text-black",children:"Qty"}),e.jsx("th",{class:"p-4 text-left text-sm font-semibold text-black",children:"Total"}),e.jsx("th",{class:"p-4 text-left text-sm font-semibold text-black"})]})}),e.jsx("tbody",{class:"whitespace-nowrap",children:n.items.map((a,i)=>{var c,h,ne,le,re,ie,de,xe,me,ce;return e.jsxs("tr",{class:"odd:bg-gray-50",children:[e.jsx("td",{class:" text-sm",children:e.jsx("div",{class:"flex items-center cursor-pointer w-max",children:e.jsxs("div",{class:"ml-4 ",children:[e.jsxs("p",{class:"text-sm text-black ",children:["Name : ",(c=a==null?void 0:a.data)==null?void 0:c.name]}),((h=a==null?void 0:a.data)==null?void 0:h.model)&&e.jsxs("p",{class:"text-xs text-gray-500 mt-0.5",children:["Model :",(ne=a==null?void 0:a.data)==null?void 0:ne.model," "]}),((le=a==null?void 0:a.data)==null?void 0:le.identity_type)!=="none"&&e.jsxs("p",{class:"text-xs text-gray-500 mt-0.5",children:[(re=a==null?void 0:a.data)==null?void 0:re.identity_type,":",(ie=a==null?void 0:a.data)==null?void 0:ie.identity_value," "]})]})})}),e.jsx("td",{class:"p-4 text-sm text-black",children:((de=a==null?void 0:a.data)==null?void 0:de.selling_price)||"N/A"}),e.jsx("td",{class:"p-4 text-sm text-black",children:e.jsx("input",{type:"number",name:"quantity",value:a==null?void 0:a.quantity,className:"appearance-none border rounded w-[60px] py-2 px-3 text-grey-darker",max:((me=(xe=a==null?void 0:a.data)==null?void 0:xe.stock)==null?void 0:me.quantity)||0,onChange:g=>{var oe,he,pe,ue;const y=Number(g.target.value);if(y>((he=(oe=a==null?void 0:a.data)==null?void 0:oe.stock)==null?void 0:he.quantity)){b.error("Quantity exceeds stock quantity");return}if(y<=0){b.error("Quantity must be greater than 0");return}d(`items.${i}.quantity`,Math.min(y,((ue=(pe=a==null?void 0:a.data)==null?void 0:pe.stock)==null?void 0:ue.quantity)||0))}})}),e.jsx("td",{class:"p-4 text-sm text-black",children:(a==null?void 0:a.quantity)*((ce=a==null?void 0:a.data)==null?void 0:ce.selling_price)||0}),e.jsx("td",{class:"p-4 text-sm text-black",children:e.jsx(Ae,{color:"red",className:"cursor-pointer hover:scale-110",onClick:()=>{d("items",n.items.filter(g=>g.data.id!==a.data.id))}})})]})})})]})})})]})})})})}),e.jsx("div",{className:"font-sans antialiased bg-grey-lightest",children:e.jsx("div",{className:"w-full bg-grey-lightest",children:e.jsx("div",{className:"container mx-auto py-3 px-5",children:e.jsx("div",{className:"w-full lg:w-full mx-auto bg-white rounded shadow p-10",children:n.items.length>0&&e.jsxs("div",{className:"mb-2",children:[e.jsx("div",{className:"w-full flex items-center justify-between mb-2",children:e.jsx("label",{className:"block text-grey-darker text-lg font-bold ",children:"Calculation"})}),e.jsxs("ul",{className:"mt-5",children:[e.jsxs("li",{className:"w-full flex items-center justify-between mb-2",children:[e.jsx("div",{children:"Total Amount:"}),e.jsx("div",{children:e.jsx("input",{type:"number",value:n.items.reduce((a,i)=>a+i.quantity*i.data.selling_price,0),className:"appearance-none border rounded disabled:bg-gray-200 disabled:hover:bg-gray-200	 py-2 px-3 text-grey-darker",disabled:!0})})]}),e.jsxs("li",{className:"w-full flex items-center justify-between",children:[e.jsx("div",{children:"Extra Charges:"}),e.jsxs("div",{children:[" ",e.jsx(l,{type:"number",name:"extra_charges",value:n.extra_charges,className:"appearance-none border rounded 	 py-2 px-3 text-grey-darker"})]})]}),e.jsx("li",{className:"w-full flex items-center justify-between mb-2",children:e.jsx(r,{name:"extra_charges",component:"div",className:"text-red-600 text-xs mt-1"})}),e.jsxs("li",{className:"w-full flex items-center justify-between",children:[e.jsx("div",{children:"Discount:"}),e.jsxs("div",{children:[" ",e.jsx(l,{type:"number",name:"discount",value:n.discount,className:"appearance-none border rounded 	 py-2 px-3 text-grey-darker"})]})]}),e.jsx("li",{className:"w-full flex items-center justify-between mb-2",children:e.jsx(r,{name:"discount",component:"div",className:"text-red-600 text-xs mt-1"})}),e.jsxs("li",{className:"w-full flex items-center justify-between mb-2",children:[e.jsx("div",{children:"Tax:"}),e.jsx("div",{children:e.jsx("input",{type:"number",value:n.tax,className:"appearance-none border rounded disabled:bg-gray-200 disabled:hover:bg-gray-200	 py-2 px-3 text-grey-darker",disabled:!0})})]}),e.jsxs("li",{className:"w-full flex items-center justify-between mb-2",children:[e.jsx("div",{children:"Shipping Cost:"}),e.jsx("div",{children:e.jsx("input",{type:"number",value:parseFloat(n.shipping_charges||0).toFixed(2),className:"appearance-none border rounded disabled:bg-gray-200 disabled:hover:bg-gray-200	 py-2 px-3 text-grey-darker",disabled:!0})})]}),e.jsxs("li",{className:"w-full flex items-center justify-between mb-2",children:[e.jsx("div",{className:"font-bold",children:"Grand Total:"}),e.jsx("div",{children:e.jsx("input",{type:"number",value:n.items.reduce((a,i)=>a+i.quantity*i.data.selling_price,0)+parseFloat(n.extra_charges||0)+parseFloat(n.tax||0)+parseFloat(n.shipping_charges||0)-parseFloat(n.discount||0),className:"appearance-none border rounded disabled:bg-gray-200 disabled:hover:bg-gray-200 py-2 px-3 text-grey-darker",disabled:!0})})]})]})]})})})})})]})]})})}})]})}export{Ge as default};
