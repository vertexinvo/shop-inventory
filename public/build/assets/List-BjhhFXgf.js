import{r as h,q as I,j as e,Y as M,a as d,y as a}from"./app-uvVrVUAm.js";import{F as T,a as B,b as E}from"./formik.esm-D3XBtuo1.js";import{A as O,o as z,p as V,c as $,q as R,r as q,k as j,D as r,N as K,C as N,l as w}from"./AuthenticatedLayout-4Ujjea55.js";import{M as G}from"./Modal-BAvTqX0i.js";import{B as U}from"./index-BaOsFkru.js";import{B as X}from"./ReactToastify-CibeMeaJ.js";import{P as Y}from"./index-BVeFza3x.js";import{V as H}from"./index-CvbLv-KZ.js";import{F as J}from"./ReactContexify.min-B2vfiD7j.js";import"./transition-CzF8R3-J.js";function oe(v){const{auth:k,suppliers:t,totalPendingAmount:C,totalPaidAmount:S,totalSuppliers:F,status:u,search:f}=v,[b,g]=h.useState(null),[_,m]=h.useState(!1),[n,i]=h.useState([]),{url:A}=I(),o=new URLSearchParams(A.split("?")[1]),[x,y]=h.useState("cards"),{show:L}=J({id:"context-menu"});return e.jsxs(O,{Product:k.Product,header:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(G,{size:20,className:"cursor-pointer text-gray-600 hover:text-gray-800",onClick:()=>a.get(route("dashboard")),title:"Back"}),e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Suppliers"})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsxs(r,{children:[e.jsx(r.Trigger,{children:e.jsxs("button",{className:"inline-flex items-center gap-2 rounded-lg bg-cyan-700 px-4 py-2 text-sm font-medium text-white transition hover:bg-cyan-800 focus:outline-none focus:ring-4 focus:ring-cyan-300",children:["File",e.jsx(w,{className:"h-3 w-3"})]})}),e.jsx(r.Content,{className:"mt-2 w-48 rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none",children:e.jsx("a",{href:route("supplier.csvexport"),download:!0,className:"block w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Export Excel (.csv)"})})]}),e.jsxs(r,{children:[e.jsx(r.Trigger,{children:e.jsxs("button",{className:"inline-flex items-center gap-2 rounded-lg bg-cyan-700 px-4 py-2 text-sm font-medium text-white transition hover:bg-cyan-800 focus:outline-none focus:ring-4 focus:ring-cyan-300",children:["Add new",e.jsx(w,{className:"h-3 w-3"})]})}),e.jsx(r.Content,{className:"mt-2 w-48 rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none",children:e.jsx(d,{href:route("supplier.create"),className:"block w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Supplier"})})]})]})]}),children:[e.jsx(M,{title:"Supplier"}),e.jsxs("div",{className:"flex gap-2 mt-4 mx-4",children:[e.jsxs("button",{onClick:()=>y("cards"),className:`px-4 py-2 rounded-lg text-xs font-medium flex items-center justify-center gap-2 ${x==="cards"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700"}`,children:[e.jsx(z,{className:""}),"Cards"]}),e.jsxs("button",{onClick:()=>y("filters"),className:`px-4 py-2 rounded-lg text-xs font-medium flex items-center justify-center gap-2  ${x==="filters"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700"}`,children:[e.jsx(V,{className:"inline mr-1"}),"Filters"]})]}),x==="cards"&&e.jsxs("div",{className:"mx-4 grid grid-cols-1 sm:grid-cols-1 lg:grid-cols-5 gap-4 mt-4",children:[e.jsx(d,{href:route("supplier.index"),children:e.jsxs("div",{className:"bg-white border border-gray-200 rounded-2xl shadow p-4 flex justify-between items-center hover:shadow-md transition",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm font-medium",children:"Total Suppliers"}),e.jsx("p",{className:"text-xl font-bold",children:F})]}),e.jsx(H,{size:36,className:"text-indigo-500"})]})}),e.jsx(d,{href:route("supplier.index",{status:"pending"}),children:e.jsxs("div",{className:"bg-white border border-gray-200 rounded-2xl shadow p-4 flex justify-between items-center hover:shadow-md transition",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm font-medium",children:"Pending Amount"}),e.jsx("p",{className:"text-xl font-bold text-orange-500",children:C})]}),e.jsx($,{size:36,className:"text-yellow-500"})]})}),e.jsx(d,{href:route("supplier.index",{status:"paid"}),children:e.jsxs("div",{className:"bg-white border border-gray-200 rounded-2xl shadow p-4 flex justify-between items-center hover:shadow-md transition",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm font-medium",children:"Completed Amount"}),e.jsx("p",{className:"text-xl font-bold text-emerald-600",children:S})]}),e.jsx(Y,{size:36,className:"text-green-600"})]})})]}),x==="filters"&&e.jsxs("div",{className:"mx-4 mt-4 p-4 bg-white border border-gray-200 rounded-2xl shadow",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Filter Options"}),e.jsxs("select",{name:"filter",className:`bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg 
                                          w-full md:w-[150px] p-2.5  pr-10  
                                              
                                          focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500`,onChange:s=>a.get(route("supplier.index"),{status:s.target.value},{preserveState:!0}),value:u,children:[e.jsx("option",{value:"",children:"Select Status"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"paid",children:"Paid"})]})]}),e.jsx("div",{className:"flex flex-col px-4 mt-4 mx-auto w-full",children:e.jsxs("div",{className:"w-full ",children:[e.jsx("div",{className:"flex flex-col md:flex-row justify-end items-center mt-2 mb-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row w-full md:justify-end space-y-2 md:space-y-0 md:space-x-2",children:[e.jsx(T,{enableReinitialize:!0,initialValues:{search:""},onSubmit:s=>{a.get(route("supplier.index"),{search:s.search},{preserveState:!0})},children:({values:s,setFieldValue:l,handleSubmit:c})=>e.jsx(B,{className:"w-full flex items-center gap-3",children:e.jsx("div",{className:"relative w-full md:max-w-md",children:e.jsx(E,{name:"search",children:({field:p,form:P})=>e.jsxs("div",{className:"relative",children:[e.jsx("input",{...p,type:"text",placeholder:"Search suppliers...",className:"w-full pl-10 pr-10 py-2 rounded-xl border border-gray-300 focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 focus:outline-none transition-all duration-300 bg-white shadow-sm hover:shadow-md placeholder-gray-400 text-gray-800",onKeyDown:D=>{D.key==="Enter"&&c()}}),e.jsx("button",{type:"submit",className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-cyan-500 focus:outline-none transition-colors","aria-label":"Search",children:e.jsx(R,{className:"w-4 h-4"})}),p.value&&e.jsx("button",{type:"button",onClick:()=>{P.setFieldValue("search",""),a.get(route("supplier.index"))},className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-red-500 focus:outline-none transition-colors","aria-label":"Clear search",children:e.jsx(q,{className:"w-4 h-4"})})]})})})})}),n.length>0&&e.jsx("button",{onClick:()=>m(!0),className:"text-white  w-full md:w-64 lg:w-48  py-2 px-4 bg-red-500 rounded-lg hover:bg-red-600 ",children:"Bulk Delete"})]})}),e.jsxs("div",{className:"overflow-x-auto rounded-xl border border-gray-200 shadow-sm",children:[e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 bg-white",children:[e.jsx("thead",{className:"whitespace-nowrap text-xs uppercase bg-gray-200 text-gray-700 tracking-wide border-b",children:e.jsxs("tr",{children:[e.jsxs("th",{className:"px-4 py-3 w-8",children:[e.jsx("input",{id:"checkbox",type:"checkbox",className:"hidden peer",onChange:s=>i(s.target.checked?t.data.map(l=>l.id):[]),checked:n.length===t.data.length}),e.jsx("label",{htmlFor:"checkbox",className:"relative flex items-center justify-center p-0.5 peer-checked:before:hidden before:block before:absolute before:w-full before:h-full before:bg-white w-5 h-5 cursor-pointer bg-black border border-gray-400 rounded overflow-hidden",children:e.jsx(j,{className:"w-full fill-white"})})]}),e.jsx("th",{className:"px-4 py-3 text-left ",children:"Supplier Info"}),e.jsx("th",{className:"px-4 py-3 text-left",children:"Contact"}),e.jsx("th",{className:"px-4 py-3 text-left",children:"Address"}),e.jsx("th",{className:"px-4 py-3 text-left",children:"Code"}),e.jsx("th",{className:"px-4 py-3 ",children:"Total Invoices"}),e.jsx("th",{className:"px-4 py-3 ",children:"Total Amount"}),e.jsx("th",{className:"px-4 py-3 ",children:"Amount Paid"}),e.jsx("th",{className:"px-4 py-3 ",children:"Amount Pending"}),e.jsx("th",{className:"px-4 py-3 ",children:"Action"})]})}),e.jsxs("tbody",{className:"divide-y divide-gray-100",children:[t.data.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"10",className:"px-4 py-3 text-center text-gray-500",children:"No Supplier found."})}),t.data.map(s=>e.jsxs("tr",{onContextMenu:l=>{l.preventDefault(),L({event:l,props:s})},className:`${(s==null?void 0:s.total_amount_paid)===0&&(s==null?void 0:s.total_amount)>0?"bg-red-50":(s==null?void 0:s.total_amount_paid)>0&&(s==null?void 0:s.total_amount_pending)>0?"bg-yellow-50":""} ${n.includes(s.id)?"border-l-4 border-black":""}`,children:[e.jsxs("td",{className:"px-4 py-3 w-8",children:[e.jsx("input",{id:`checkbox-${s.id}`,type:"checkbox",className:"hidden peer",value:s.id,onChange:l=>{l.target.checked?i(c=>[...c,s.id]):i(c=>c.filter(p=>p!==s.id))},checked:n.includes(s.id)}),e.jsx("label",{htmlFor:`checkbox-${s.id}`,className:"relative flex items-center justify-center w-5 h-5 bg-black border border-gray-400 rounded cursor-pointer p-0.5 peer-checked:before:hidden before:block before:absolute before:w-full before:h-full before:bg-white",children:e.jsx(j,{className:"w-full fill-white"})})]}),e.jsx("td",{className:"px-4 py-3 text-gray-800",children:e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium",children:["Person: ",s.person_name]}),s.email&&e.jsxs("p",{className:"text-xs text-gray-500",children:["Email: ",s.email]})]})}),e.jsx("td",{className:"px-4 py-3 text-gray-700",children:(s==null?void 0:s.contact)||"N/A"}),e.jsx("td",{className:"px-4 py-3 text-gray-700",children:(s==null?void 0:s.address)||"N/A"}),e.jsxs("td",{className:"px-4 py-3 flex items-center text-blue-600",children:[e.jsx(d,{href:route("product.index",{invoicecode:s.code}),className:"hover:underline",children:(s==null?void 0:s.code)||"N/A"}),e.jsx(U,{size:18,onClick:()=>{navigator.clipboard.writeText(s.code),X.success("Copied!")},className:"ml-2 text-gray-500 cursor-pointer hover:text-black"})]}),e.jsx("td",{className:"px-4 py-3 text-gray-700 text-center",children:(s==null?void 0:s.total_supplierinvoices)||0}),e.jsx("td",{className:"px-4 py-3 text-gray-700 text-center",children:(s==null?void 0:s.total_amount)||0}),e.jsx("td",{className:"px-4 py-3 text-gray-700 text-center",children:(s==null?void 0:s.total_amount_paid)||0}),e.jsx("td",{className:"px-4 py-3 text-gray-700 text-center",children:(s==null?void 0:s.total_amount_pending)||0}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsxs(r,{children:[e.jsx(r.Trigger,{children:e.jsx("button",{className:"text-gray-500 hover:text-black focus:outline-none",children:e.jsx(K,{className:"w-5 h-5"})})}),e.jsxs(r.Content,{children:[e.jsx(r.Link,{href:route("supplier.invoices",s.id),children:"Invoice"}),e.jsx(r.Link,{href:route("ledger.supplier.supplierLedger",s.code||s.id),children:"Ledger"}),e.jsx(r.Link,{href:route("supplier.edit",s.id),children:"Edit"}),e.jsx("button",{type:"button",onClick:()=>g(s),className:"block w-full px-4 py-2 text-start text-sm text-red-600 hover:bg-gray-100",children:"Delete"})]})]})})]},s.id))]})]}),e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 text-xs text-gray-500 bg-gray-50 border-t",children:[e.jsxs("span",{children:["Showing ",t.from," - ",t.to," of ",t.total]}),e.jsxs("div",{className:"space-x-2",children:[t.to<t.total&&e.jsx("button",{onClick:()=>a.get(route("supplier.index"),{status:u||"",search:f||"",per_page:o.get("per_page")?parseInt(o.get("per_page"))+10:20}),className:"px-3 py-1 bg-white border rounded shadow hover:bg-gray-100",children:"Load More"}),o.get("per_page")&&parseInt(o.get("per_page"))>10&&e.jsx("button",{onClick:()=>a.get(route("supplier.index"),{status:u||"",search:f||"",per_page:Math.max(10,parseInt(o.get("per_page"))-10)}),className:"px-3 py-1 bg-white border rounded shadow hover:bg-gray-100",children:"Load Less"})]})]})]})]})}),e.jsx(N,{isOpen:b!==null,onClose:()=>g(null),title:"Are you sure you want to delete?",onConfirm:()=>{a.delete(route("supplier.destroy",b.id),{preserveScroll:!0,preserveState:!0}),g(null)}}),e.jsx(N,{isOpen:_,onClose:()=>m(!1),title:"Are you sure you want to delete these supplier?",onConfirm:()=>{a.post(route("supplier.bulkdestroy"),{ids:n.join(",")},{onSuccess:()=>{m(!1),i([])}})}})]})}export{oe as default};
