import{r as n,j as e,Y as T,y as m}from"./app-VHcVLPlZ.js";import{A as L,w as c,e as R,t as I,x as b,y as $,z,C as g}from"./AuthenticatedLayout-CiSZMdsk.js";import{d as B,e as E,M as Y}from"./Modal-OHF5mhjC.js";import"./transition-BDrFex0a.js";import"./ReactToastify-IOuQ4NRo.js";import"./proxy-vzdz0bgF.js";function H(v){const{auth:U,notifications:w,stats:a}=v,[j,u]=n.useState(null),[k,h]=n.useState(!1),[S,p]=n.useState(!1),[l,i]=n.useState([]),[d,C]=n.useState("all"),[f,M]=n.useState("all"),A=s=>{if(s){const t=N();i(t.map(x=>x.id))}else i([])},O=(s,t)=>{i(t?[...l,s]:l.filter(x=>x!==s))},N=()=>{let s=w;return d==="read"?s=s.filter(t=>t.read_at!==null):d==="unread"&&(s=s.filter(t=>t.read_at===null)),f!=="all"&&(s=s.filter(t=>t.type.includes(f))),s},D=s=>s.includes("LowStock")?e.jsx(b,{className:"text-orange-500"}):s.includes("Order")?e.jsx(c,{className:"text-blue-500"}):e.jsx(c,{className:"text-gray-500"}),_=s=>s.includes("LowStockNotification")?"Low Stock Alert":s.includes("OrderNotification")?"Order Update":s.split("\\").pop().replace("Notification",""),F=s=>{const t=new Date(s),r=Math.floor((new Date-t)/1e3);return r<60?"Just now":r<3600?`${Math.floor(r/60)} minutes ago`:r<86400?`${Math.floor(r/3600)} hours ago`:r<2592e3?`${Math.floor(r/86400)} days ago`:t.toLocaleDateString()},o=N(),y=o.length>0&&l.length===o.length;return e.jsxs(L,{header:e.jsx("div",{className:"flex items-center justify-between py-2",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Y,{size:20,className:"cursor-pointer text-gray-600 hover:text-gray-800",onClick:()=>window.history.back(),title:"Back"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(c,{className:"text-xl text-gray-600"}),e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Notifications"}),a&&a.unread>0&&e.jsx("span",{className:"bg-red-500 text-white text-xs px-2 py-1 rounded-full",children:a.unread})]})]})}),children:[e.jsx(T,{title:"Notifications"}),e.jsxs("div",{className:"flex flex-col px-4 mt-6 mx-auto w-full ",children:[a&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(c,{className:"text-blue-500 text-2xl mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total"}),e.jsx("p",{className:"text-xl font-semibold",children:a.total})]})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(R,{className:"text-red-500 text-2xl mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Unread"}),e.jsx("p",{className:"text-xl font-semibold",children:a.unread})]})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(I,{className:"text-green-500 text-2xl mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Today"}),e.jsx("p",{className:"text-xl font-semibold",children:a.today})]})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(b,{className:"text-orange-500 text-2xl mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"This Week"}),e.jsx("p",{className:"text-xl font-semibold",children:a.this_week})]})]})})]}),e.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border mb-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center space-y-4 md:space-y-0",children:[e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsxs("select",{value:d,onChange:s=>C(s.target.value),className:"border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Notifications"}),e.jsx("option",{value:"unread",children:"Unread Only"}),e.jsx("option",{value:"read",children:"Read Only"})]}),e.jsxs("select",{value:f,onChange:s=>M(s.target.value),className:"border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Types"}),e.jsx("option",{value:"LowStock",children:"Low Stock"}),e.jsx("option",{value:"Order",children:"Orders"})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[a&&a.unread>0&&e.jsxs("button",{onClick:()=>p(!0),className:"flex items-center space-x-2 px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 text-sm",children:[e.jsx(B,{size:16}),e.jsx("span",{children:"Mark All Read"})]}),l.length>0&&e.jsxs("button",{onClick:()=>h(!0),className:"flex items-center space-x-2 px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 text-sm",children:[e.jsx(E,{size:16}),e.jsxs("span",{children:["Delete Selected (",l.length,")"]})]})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border",children:o.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"p-4 border-b bg-gray-50",children:e.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:y,onChange:s=>A(s.target.checked),className:"rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"}),e.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[y?"Deselect All":"Select All",l.length>0&&` (${l.length} selected)`]})]})}),e.jsx("div",{className:"divide-y divide-gray-200",children:o.map(s=>e.jsx("div",{className:`p-4 hover:bg-gray-50 transition-colors ${s.read_at===null?"bg-blue-50":""}`,children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("input",{type:"checkbox",checked:l.includes(s.id),onChange:t=>O(s.id,t.target.checked),className:"mt-1 rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"}),e.jsx("div",{className:"flex-shrink-0 mt-1",children:D(s.type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:_(s.type)}),s.read_at===null&&e.jsx("span",{className:"inline-flex items-center px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-full",children:"New"})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx("span",{className:"text-xs text-gray-500",children:F(s.created_at)})})]}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:s.data.message||"No message available"}),s.data.product_name&&e.jsx("div",{className:"mt-2 p-3 bg-gray-50 rounded-md",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2 text-xs",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Product:"}),e.jsx("span",{className:"ml-1 text-gray-600",children:s.data.product_name})]}),s.data.current_quantity!==void 0&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Current Stock:"}),e.jsx("span",{className:"ml-1 text-gray-600",children:s.data.current_quantity})]}),s.data.reorder_level!==void 0&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Reorder Level:"}),e.jsx("span",{className:"ml-1 text-gray-600",children:s.data.reorder_level})]})]})})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[s.read_at===null&&e.jsx("button",{onClick:()=>{m.post(route("notification.markAsRead",s.id),{},{preserveScroll:!0,preserveState:!0})},className:"text-blue-600 hover:text-blue-800 text-sm",title:"Mark as read",children:e.jsx($,{size:14})}),e.jsx("button",{onClick:()=>u(s),className:"text-red-600 hover:text-red-800 text-sm",title:"Delete",children:e.jsx(z,{size:14})})]})]})},s.id))})]}):e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(c,{className:"mx-auto text-4xl text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No notifications found"}),e.jsx("p",{className:"text-gray-600",children:d==="unread"?"You don't have any unread notifications.":d==="read"?"You don't have any read notifications.":"You don't have any notifications yet."})]})})]}),e.jsx(g,{isOpen:j!==null,onClose:()=>u(null),title:"Delete Notification",message:"Are you sure you want to delete this notification? This action cannot be undone.",onConfirm:()=>{m.delete(route("notification.destroy",j.id),{preserveScroll:!0,preserveState:!0,onSuccess:()=>u(null)})}}),e.jsx(g,{isOpen:k,onClose:()=>h(!1),title:"Delete Multiple Notifications",message:`Are you sure you want to delete ${l.length} notification${l.length>1?"s":""}? This action cannot be undone.`,onConfirm:()=>{m.post(route("notification.bulkdestroy"),{ids:l.join(",")},{onSuccess:()=>{h(!1),i([])}})}}),e.jsx(g,{isOpen:S,onClose:()=>p(!1),title:"Mark All as Read",message:`Are you sure you want to mark all ${(a==null?void 0:a.unread)||0} unread notifications as read?`,onConfirm:()=>{m.post(route("notification.markAllAsRead"),{},{preserveScroll:!0,preserveState:!0,onSuccess:()=>p(!1)})}})]})}export{H as default};
