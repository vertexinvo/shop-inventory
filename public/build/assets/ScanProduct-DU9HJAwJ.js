import{r as p,j as t,Y as O,a as W}from"./app-VHcVLPlZ.js";import{A as _}from"./AuthenticatedLayout-CiSZMdsk.js";import"./transition-BDrFex0a.js";import"./ReactToastify-IOuQ4NRo.js";import"./Modal-OHF5mhjC.js";import"./proxy-vzdz0bgF.js";var P={};Object.defineProperty(P,"__esModule",{value:!0});var d=p,A=function(e){var o=e.timeToEvaluate,s=o===void 0?100:o,m=e.averageWaitTime,l=m===void 0?50:m,i=e.startCharacter,r=i===void 0?[]:i,x=e.endCharacter,v=x===void 0?[13,27]:x,j=e.onComplete,h=e.onError,w=e.minLength,b=w===void 0?1:w,S=e.ignoreIfFocusOn,y=e.stopPropagation,C=y===void 0?!1:y,R=e.preventDefault,N=R===void 0?!1:R,E=e.container,T=E===void 0?document:E,a=d.useRef([]),f=d.useRef(!1),D=function(){a.current=[]},Q=function(){clearTimeout(f.current);var n=a.current.map(function(u,c,I){var F=u.time;return c>0?F-I[c-1].time:0}).slice(1).reduce(function(u,c){return u+c},0),k=n/(a.current.length-1),L=a.current.slice(r.length>0?1:0).map(function(u){var c=u.char;return c}).join("");k<=l&&a.current.slice(r.length>0?1:0).length>=b?j(L):k<=l&&h&&h(L),D()},g=d.useCallback(function(n){n.currentTarget!==S&&(v.includes(n.keyCode)&&Q(),(a.current.length>0||r.includes(n.keyCode)||r.length===0)&&(clearTimeout(f.current),f.current=setTimeout(Q,s),a.current.push({time:performance.now(),char:n.key}))),C&&n.stopPropagation(),N&&n.preventDefault()},[r,v,s,j,h,b,S,C,N]);d.useEffect(function(){return function(){clearTimeout(f.current)}},[]),d.useEffect(function(){return T.addEventListener("keydown",g),function(){T.removeEventListener("keydown",g)}},[g])},B=P.default=A;const G=()=>{const[e,o]=p.useState(!1),[s,m]=p.useState(!1);return B({onComplete:l=>{if(!e)return;console.log("Raw Scanned QR:",l);let i=l.replace(/Shift/g,"").trim();console.log("Cleaned QR:",i),m(i);try{const r=route("product.detail",i);window.open(r,"_blank")}catch{console.log("Scanned data is not a URL, displaying instead.")}o(!1)}}),t.jsx(t.Fragment,{children:t.jsxs(_,{header:!0,children:[t.jsx(O,{title:"Scan Product"}),t.jsx("div",{className:"flex justify-center items-center bg-gray-100",children:t.jsxs("div",{className:"p-4 sm:p-6 m-4 sm:m-8 w-full sm:w-2/3 md:w-2/3 lg:w-1/3 rounded-lg bg-white shadow-lg text-center relative",children:[t.jsx("h2",{className:"text-xl sm:text-2xl font-semibold pb-4",children:"Scan The QR"}),t.jsx("h4",{className:"text-xl sm:text-2xl font-semibold pb-4",children:s&&!s.startsWith("http")&&s}),t.jsxs("div",{className:"h-64 w-64 sm:h-80 sm:w-80 md:h-96 md:w-96 mx-auto",children:[!e&&t.jsx("img",{src:"/images/scanQR.jpg",className:"animate-fadeIn w-full h-full",alt:"QR Code"}),e&&t.jsx("div",{className:"flex justify-center items-center h-full",children:t.jsx("div",{className:"animate-pulse",children:t.jsx("img",{src:"/images/scanQR.jpg",className:"w-full h-full",alt:"QR Code"})})})]}),t.jsxs("div",{className:"grid gap-4 mt-6",children:[t.jsx("button",{onClick:()=>o(!e),className:"bg-black text-white py-2 rounded-md text-sm sm:text-base",children:e?"Stop Scanning...":"Start Scanning"}),t.jsx(W,{href:route("product.index"),className:"bg-red-500 text-white py-2 rounded-md text-center text-sm sm:text-base",children:"Close"})]})]})})]})})};export{G as default};
