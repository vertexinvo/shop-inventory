import{r as g,j as e,Y as F,a as M,y as O}from"./app-Ccp_PyOI.js";import{A as W}from"./AuthenticatedLayout-It5Ou7zQ.js";import{M as _}from"./Modal-DzheJWN8.js";import"./transition-Diutplxq.js";import"./ReactToastify-Bugxoa6g.js";var P={};Object.defineProperty(P,"__esModule",{value:!0});var d=g,A=function(t){var o=t.timeToEvaluate,s=o===void 0?100:o,m=t.averageWaitTime,l=m===void 0?50:m,c=t.startCharacter,r=c===void 0?[]:c,p=t.endCharacter,v=p===void 0?[13,27]:p,j=t.onComplete,h=t.onError,y=t.minLength,b=y===void 0?1:y,w=t.ignoreIfFocusOn,S=t.stopPropagation,C=S===void 0?!1:S,N=t.preventDefault,R=N===void 0?!1:N,k=t.container,E=k===void 0?document:k,n=d.useRef([]),f=d.useRef(!1),D=function(){n.current=[]},T=function(){clearTimeout(f.current);var a=n.current.map(function(u,i,B){var I=u.time;return i>0?I-B[i-1].time:0}).slice(1).reduce(function(u,i){return u+i},0),Q=a/(n.current.length-1),L=n.current.slice(r.length>0?1:0).map(function(u){var i=u.char;return i}).join("");Q<=l&&n.current.slice(r.length>0?1:0).length>=b?j(L):Q<=l&&h&&h(L),D()},x=d.useCallback(function(a){a.currentTarget!==w&&(v.includes(a.keyCode)&&T(),(n.current.length>0||r.includes(a.keyCode)||r.length===0)&&(clearTimeout(f.current),f.current=setTimeout(T,s),n.current.push({time:performance.now(),char:a.key}))),C&&a.stopPropagation(),R&&a.preventDefault()},[r,v,s,j,h,b,w,C,R]);d.useEffect(function(){return function(){clearTimeout(f.current)}},[]),d.useEffect(function(){return E.addEventListener("keydown",x),function(){E.removeEventListener("keydown",x)}},[x])},K=P.default=A;const H=()=>{const[t,o]=g.useState(!1),[s,m]=g.useState(!1);return K({onComplete:l=>{if(!t)return;console.log("Raw Scanned QR:",l);let c=l.replace(/Shift/g,"").trim();console.log("Cleaned QR:",c),m(c);try{const r=route("product.detail",c);window.open(r,"_blank")}catch{console.log("Scanned data is not a URL, displaying instead.")}o(!1)}}),e.jsx(e.Fragment,{children:e.jsxs(W,{header:e.jsx("div",{className:"flex items-center justify-between py-2",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(_,{size:20,className:"cursor-pointer text-gray-600 hover:text-gray-800",onClick:()=>O.get(route("dashboard")),title:"Back"}),e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Scan product"})]})}),children:[e.jsx(F,{title:"Scan Product"}),e.jsx("div",{className:"flex justify-center items-center bg-gray-100",children:e.jsxs("div",{className:"p-4 sm:p-6 m-4 sm:m-8 w-full sm:w-2/3 md:w-2/3 lg:w-1/3 rounded-lg bg-white shadow-lg text-center relative",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold pb-4",children:"Scan The QR"}),e.jsx("h4",{className:"text-xl sm:text-2xl font-semibold pb-4",children:s&&!s.startsWith("http")&&s}),e.jsxs("div",{className:"h-64 w-64 sm:h-80 sm:w-80 md:h-96 md:w-96 mx-auto",children:[!t&&e.jsx("img",{src:"/images/scanQR.jpg",className:"animate-fadeIn w-full h-full",alt:"QR Code"}),t&&e.jsx("div",{className:"flex justify-center items-center h-full",children:e.jsx("div",{className:"animate-pulse",children:e.jsx("img",{src:"/images/scanQR.jpg",className:"w-full h-full",alt:"QR Code"})})})]}),e.jsxs("div",{className:"grid gap-4 mt-6",children:[e.jsx("button",{onClick:()=>o(!t),className:"bg-black text-white py-2 rounded-md text-sm sm:text-base",children:t?"Stop Scanning...":"Start Scanning"}),e.jsx(M,{href:route("product.index"),className:"bg-red-500 text-white py-2 rounded-md text-center text-sm sm:text-base",children:"Close"})]})]})})]})})};export{H as default};
