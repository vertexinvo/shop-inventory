import{r as x,j as e,Y as u,y as c}from"./app-CegDTVyM.js";import{F as p,a as f,b as j}from"./formik.esm-CMfJSVpr.js";import{A as N,c as g,d as b}from"./AuthenticatedLayout-DjDpwd1q.js";import{a as y}from"./index-CMHb_DCX.js";import{G as v,M as L}from"./Modal-DglLWQn5.js";import"./transition-CTVNM1tR.js";import"./ReactToastify-jSZUL7IH.js";function w(d){return v({attr:{viewBox:"0 0 32 32"},child:[{tag:"path",attr:{d:"M 6 3 L 6 29 L 26 29 L 26 9.5996094 L 25.699219 9.3007812 L 19.699219 3.3007812 L 19.400391 3 L 6 3 z M 8 5 L 18 5 L 18 11 L 24 11 L 24 27 L 8 27 L 8 5 z M 20 6.4003906 L 22.599609 9 L 20 9 L 20 6.4003906 z M 10 13 L 10 15 L 22 15 L 22 13 L 10 13 z M 10 18 L 10 20 L 17 20 L 17 18 L 10 18 z M 19 18 L 19 20 L 22 20 L 22 18 L 19 18 z M 10 22 L 10 24 L 17 24 L 17 22 L 10 22 z M 19 22 L 19 24 L 22 24 L 22 22 L 19 22 z"},child:[]}]})(d)}function O(d){const[k,M]=x.useState(null),{auth:h,sales:t}=d,[S,I]=x.useState(!1),[z,A]=x.useState([]);return e.jsxs(N,{user:h.user,header:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(L,{size:20,className:"cursor-pointer text-gray-600 hover:text-gray-800",onClick:()=>window.history.back(),title:"Back"}),e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Sales Ledger"})]}),e.jsx("div",{className:"flex items-center space-x-3",children:e.jsx("a",{href:route("ledger.sales.csvexport"),className:"group relative flex items-center justify-center p-0.5 text-center font-medium transition-all focus:z-10 focus:outline-none border border-transparent bg-cyan-700 text-white focus:ring-4 focus:ring-cyan-300 enabled:hover:bg-cyan-800 dark:bg-cyan-600 dark:focus:ring-cyan-800 dark:enabled:hover:bg-cyan-700 rounded-lg",children:e.jsxs("span",{className:"flex items-center gap-x-1 transition-all duration-200 rounded-md px-4 py-2 text-sm",children:[e.jsx(y,{className:"h-5 w-5"}),"Export CSV File"]})})})]}),children:[e.jsx(u,{title:"Sales Ledger"}),e.jsx("div",{className:"flex flex-col px-5  mt-4 mx-auto w-full",children:e.jsxs("div",{className:"w-full ",children:[e.jsx("div",{className:"flex flex-col md:flex-row justify-end items-center mt-2 mb-4",children:e.jsx("div",{className:"flex flex-col md:flex-row w-full md:justify-end space-y-2 md:space-y-0 md:space-x-2",children:e.jsx(p,{enableReinitialize:!0,initialValues:{search:""},onSubmit:s=>{c.get(route("ledger.sales"),{search:s.search},{preserveState:!0})},children:({values:s,setFieldValue:i,handleSubmit:a,errors:r,touched:l})=>e.jsx(f,{className:"w-full flex items-center gap-3",children:e.jsx("div",{className:"relative w-full md:max-w-md",children:e.jsx(j,{name:"search",children:({field:n,form:m})=>e.jsxs("div",{className:"relative",children:[e.jsx("input",{...n,type:"text",placeholder:"Search...",className:"w-full pl-10 pr-10 py-2 rounded-xl border border-gray-300 focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 focus:outline-none transition-all duration-300 bg-white shadow-sm hover:shadow-md placeholder-gray-400 text-gray-800",onKeyDown:o=>{o.key==="Enter"&&a()}}),e.jsx("button",{type:"submit",className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-cyan-500 focus:outline-none transition-colors","aria-label":"Search",children:e.jsx(g,{className:"w-4 h-4"})}),n.value&&e.jsx("button",{type:"button",onClick:()=>{i("search",""),c.get(route("ledger.sales"))},className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-red-500 focus:outline-none transition-colors","aria-label":"Clear search",children:e.jsx(b,{className:"w-4 h-4"})})]})})})})})})}),e.jsxs("div",{className:"overflow-x-auto rounded-xl border border-gray-200 shadow-sm",children:[e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 bg-white",children:[e.jsx("thead",{className:"whitespace-nowrap text-xs uppercase bg-gray-200 text-gray-700 tracking-wide border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-4 text-left text-sm font-semibold",children:"User ID"}),e.jsx("th",{className:"p-4 text-left text-sm font-semibold",children:"Person Info"}),e.jsx("th",{className:"p-4 text-left text-sm font-semibold",children:"Contact"}),e.jsx("th",{className:"p-4 text-left text-sm font-semibold",children:"Address"}),e.jsx("th",{className:"p-4 text-left text-sm font-semibold",children:"Total Orders"}),e.jsx("th",{className:"p-4 text-left text-sm font-semibold",children:"Total Amount"}),e.jsx("th",{className:"p-4 text-left text-sm font-semibold",children:"Total Amount Paid"}),e.jsx("th",{className:"p-4 text-left text-sm font-semibold",children:"Total Amount Pending"}),e.jsx("th",{className:"p-4 text-left text-sm font-semibold",children:"Action"})]})}),e.jsx("tbody",{className:"whitespace-nowrap",children:t.data.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"9",className:"p-4 text-center",children:"No data available"})}):t.data.map(s=>e.jsxs("tr",{className:"odd:bg-gray-50 border-b border-gray-300",children:[e.jsx("td",{className:"p-4 text-sm",children:s.code||s.id}),e.jsx("td",{className:"p-4 text-sm",children:e.jsx("div",{className:"flex items-center",children:e.jsxs("div",{className:"ml-4",children:[e.jsxs("p",{className:"text-sm text-black",children:["Person Name: ",s.name||"N/A"]}),s.email&&e.jsxs("p",{className:"text-xs text-gray-500 mt-0.5",children:["Email: ",s.email]})]})})}),e.jsx("td",{className:"p-4 text-sm",children:s.phone||"N/A"}),e.jsx("td",{className:"p-4 text-sm",children:s.address||"N/A"}),e.jsx("td",{className:"p-4 text-sm",children:s.total_orders||0}),e.jsx("td",{className:"p-4 text-sm",children:s.total_orders_amount||0}),e.jsx("td",{className:"p-4 text-sm",children:s.total_orders_amount_paid||0}),e.jsx("td",{className:"p-4 text-sm",children:s.total_order_amount_pending||0}),e.jsx("td",{className:"p-4 flex items-center gap-2",children:e.jsxs("button",{onClick:()=>c.get(route("ledger.customers.salesLedger",s.code||s.id)),className:"mr-4 flex items-center space-x-2 bg-blue-500 text-white rounded px-4 py-1",title:"View Invoice",children:[e.jsx(w,{className:"w-5 h-5 text-white"}),e.jsx("span",{className:"hover:text-black",children:"Ledger"})]})})]},s.id||s.code))})]}),e.jsxs("div",{className:"grid px-4 py-3 text-xs font-semibold tracking-wide text-gray-500 uppercase border-t bg-gray-50 sm:grid-cols-9",children:[e.jsxs("span",{className:"flex items-center col-span-3",children:["Showing ",t.from," - ",t.to," of ",t.total]}),e.jsx("span",{className:"col-span-2"}),e.jsx("span",{className:"flex col-span-4 mt-2 sm:mt-auto sm:justify-end",children:e.jsx("nav",{"aria-label":"Table navigation",children:e.jsxs("ul",{className:"inline-flex items-center",children:[e.jsx("li",{children:e.jsx("button",{onClick:()=>t.links[0].url&&c.visit(t.links[0].url),className:"px-3 py-1 rounded-md rounded-l-lg focus:outline-none","aria-label":"Previous",children:e.jsx("svg",{className:"w-4 h-4 fill-current",viewBox:"0 0 20 20","aria-hidden":"true",children:e.jsx("path",{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"})})})}),(()=>{let s=-1;const i=t.links.findIndex(a=>a.active);return t.links.slice(1,-1).filter((a,r,l)=>{const n=parseInt(a.label,10);if(isNaN(n))return!0;const m=Math.max(0,i-2),o=Math.min(l.length-1,i+2);return r<3||r>l.length-4||r>=m&&r<=o}).map((a,r)=>{const l=parseInt(a.label,10),n=!isNaN(l)&&s!==-1&&l-s>1;return isNaN(l)||(s=l),e.jsx("li",{children:n?e.jsx("span",{className:"px-3 py-1",children:"..."}):a.active?e.jsx("button",{className:"px-3 py-1 text-white bg-black rounded-md","aria-current":"page",children:a.label}):e.jsx("button",{onClick:()=>a.url&&c.visit(a.url),className:"px-3 py-1 rounded-md",children:a.label})},r)})})(),e.jsx("li",{children:e.jsx("button",{onClick:()=>t.links[t.links.length-1].url&&c.visit(t.links[t.links.length-1].url),className:"px-3 py-1 rounded-md rounded-r-lg focus:outline-none","aria-label":"Next",children:e.jsx("svg",{className:"w-4 h-4 fill-current",viewBox:"0 0 20 20","aria-hidden":"true",children:e.jsx("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})})})})]})})})]})]})]})})]})}export{O as default};
