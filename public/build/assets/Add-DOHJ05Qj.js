import{r as o,j as e,Y as k,y as m}from"./app-B0udZE7F.js";import{F as S,a as q,b as s,E as r}from"./formik.esm-DydONQTA.js";import{c as F,b as h,a as l,d as C}from"./index.esm-DS7cpSJ6.js";import{A as I}from"./AuthenticatedLayout-BTKJ93ER.js";import{c as b}from"./Modal-CstDktYW.js";import"./ReactToastify-CRRX_O1A.js";import{S as E,a as R}from"./SupplierinvoiceForm-CG5evG0U.js";import"./transition-DiPsKi7_.js";import"./proxy-BbYb6a1t.js";import"./index-N8egqvuB.js";function O(j){const{auth:y,suppliers:f,supplierinvoices:x,product_id:i}=j,[N,n]=o.useState(!1),[g,c]=o.useState(!1),[d,v]=o.useState(!1),[A,_]=o.useState("");return e.jsxs(I,{tax:y.tax,header:!0,children:[e.jsx(k,{title:"Add Stocklog"}),e.jsx("div",{className:"flex flex-col px-4 mt-10 mx-auto w-full",children:e.jsx("div",{className:"w-full",children:e.jsx("div",{className:"font-sans antialiased bg-grey-lightest",children:e.jsx("div",{className:"w-full bg-grey-lightest",children:e.jsx("div",{className:"container mx-auto py-3 px-5",children:e.jsx("div",{className:"w-full lg:w-full mx-auto bg-white rounded shadow",children:e.jsx(S,{enableReinitialize:!0,initialValues:{quantity:"",type:"",is_supplier:"0",supplier_invoice_no:"",remarks:"",datetime:"",supplier_invoice_no:"",product_id:i,purchase_price:"",is_borrow:"0",shop_name:"",shop_address:"",shop_phone:"",shop_email:""},validationSchema:F({quantity:h().min(1).required("Quantity is required"),type:l().required("Type is required"),is_supplier:l().required("Is supplier is required"),datetime:C().required("Date is required"),purchase_price:h().when("type",{is:"removal",then:a=>a.optional(),otherwise:a=>a.required(),is_borrow:l().required("Borrow status is required"),shop_name:l(),shop_address:l(),shop_phone:l().matches(/^[0-9]*$/,"Must be only digits"),shop_email:l().email("Invalid email address")})}),onSubmit:(a,{setSubmitting:w,resetForm:p})=>{m.post(route("stocklog.store"),a,{onSuccess:()=>p()})},children:({values:a,errors:w,touched:p,setFieldValue:u,isSubmitting:M})=>e.jsx(q,{children:e.jsxs("div",{className:"py-4 px-8",children:[e.jsxs("div",{className:"flex mb-4",children:[e.jsxs("div",{className:"w-1/2 mr-1",children:[e.jsx("label",{className:"block text-grey-darker text-sm font-bold mb-2",htmlFor:"area_name",children:"Quantity"}),e.jsx(s,{name:"quantity",className:"appearance-none border rounded w-full py-2 px-3   focus:ring-black focus:border-black text-grey-darker",id:"quantity",type:"number",placeholder:"Enter quantity"}),e.jsx(r,{name:"quantity",component:"div",className:"text-red-500 text-xs mt-1"})]}),e.jsxs("div",{className:"w-1/2 ml-1",children:[e.jsx("label",{className:"block text-grey-darker text-sm font-bold mb-2",htmlFor:"postal_code",children:"Type"}),e.jsxs(s,{name:"type",className:"appearance-none border rounded w-full py-2 px-3   focus:ring-black focus:border-black text-grey-darker",id:"type",as:"select",children:[e.jsx("option",{value:"",children:"Select Type"}),e.jsx("option",{value:"addition",children:"Addition"}),e.jsx("option",{value:"removal",children:"Removal"}),e.jsx("option",{value:"adjustment",children:"Adjustment"})]}),e.jsx(r,{name:"type",component:"div",className:"text-red-500 text-xs mt-1"})]})]}),a.type!=="removal"&&a.type!==""&&e.jsx("div",{className:"flex mb-4",children:e.jsxs("div",{className:"w-full mr-1",children:[e.jsx("label",{className:"block text-grey-darker text-sm font-bold mb-2",htmlFor:"postal_code",children:"Purchase Price (Required)"}),e.jsx(s,{name:"purchase_price",className:"appearance-none border rounded w-full py-2 px-3   focus:ring-black focus:border-black text-grey-darker",id:"purchase_price",type:"number",step:"any",placeholder:"Enter Purchase Price"}),e.jsx(r,{name:"purchase_price",component:"div",className:"text-red-500 text-xs mt-1"})]})}),e.jsxs("div",{className:"flex mb-4",children:[e.jsxs("div",{className:"w-1/2 mr-1",children:[e.jsx("label",{className:"block text-grey-darker text-sm font-bold mb-2",htmlFor:"area_name",children:"Date/Time"}),e.jsx(s,{name:"datetime",className:"appearance-none border rounded w-full py-2 px-3   focus:ring-black focus:border-black text-grey-darker",id:"datetime",type:"datetime-local",placeholder:"Enter Date/Time"}),e.jsx(r,{name:"datetime",component:"div",className:"text-red-500 text-xs mt-1"})]}),e.jsxs("div",{className:"w-1/2 ml-1",children:[e.jsx("label",{className:"block text-grey-darker text-sm font-bold mb-2",htmlFor:"postal_code",children:"Remarks (Optional)"}),e.jsx(s,{name:"remarks",className:"appearance-none border rounded w-full py-2 px-3   focus:ring-black focus:border-black text-grey-darker",id:"remarks",type:"text",placeholder:"Enter Remarks"}),e.jsx(r,{name:"remarks",component:"div",className:"text-red-500 text-xs mt-1"})]})]}),a.type==="addition"&&e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"mt-6",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:["Is this a borrowed product? ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsxs("label",{className:"inline-flex items-center",children:[e.jsx(s,{type:"radio",name:"is_borrow",value:"1",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Yes"})]}),e.jsxs("label",{className:"inline-flex items-center",children:[e.jsx(s,{type:"radio",name:"is_borrow",value:"0",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"No"})]})]}),e.jsx(r,{name:"is_borrow",component:"div",className:"mt-1 text-sm text-red-600"})]}),a.is_borrow==="1"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mt-6",children:e.jsx("p",{className:"text-sm text-red-600 font-medium",children:"Please provide at least one contact method for the shop"})}),e.jsxs("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"shop_name",className:"block text-sm font-medium text-gray-700",children:"Shop Name"}),e.jsx("div",{className:"mt-1",children:e.jsx(s,{name:"shop_name",id:"shop_name",type:"text",className:"block w-full rounded-md border border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm py-2.5 px-3",placeholder:"e.g. Gadget World"})})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"shop_phone",className:"block text-sm font-medium text-gray-700",children:"Shop Phone"}),e.jsxs("div",{className:"mt-1",children:[e.jsx(s,{name:"shop_phone",id:"shop_phone",type:"tel",className:"block w-full rounded-md border border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm py-2.5 px-3",placeholder:"e.g. 0123456789"}),e.jsx(r,{name:"shop_phone",component:"div",className:"mt-1 text-sm text-red-600"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"shop_email",className:"block text-sm font-medium text-gray-700",children:"Shop Email"}),e.jsxs("div",{className:"mt-1",children:[e.jsx(s,{name:"shop_email",id:"shop_email",type:"email",className:"block w-full rounded-md border border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm py-2.5 px-3",placeholder:"e.g. contact@gadgetworld.com"}),e.jsx(r,{name:"shop_email",component:"div",className:"mt-1 text-sm text-red-600"})]})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("label",{htmlFor:"shop_address",className:"block text-sm font-medium text-gray-700",children:"Shop Address"}),e.jsx("div",{className:"mt-1",children:e.jsx(s,{as:"textarea",name:"shop_address",id:"shop_address",rows:3,className:"block w-full rounded-md border border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm py-2.5 px-3",placeholder:"Full shop address"})})]})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("label",{className:"block text-gray-700 text-sm font-medium mb-3",children:["Supplier ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"flex items-center gap-8",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx(s,{name:"is_supplier",type:"radio",value:"1",className:"mr-2 focus:ring-cyan-500 text-cyan-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Yes"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx(s,{name:"is_supplier",type:"radio",value:"0",className:"mr-2 focus:ring-cyan-500 text-cyan-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"No"})]})]}),e.jsx(r,{name:"is_supplier",component:"div",className:"text-red-500 text-xs mt-1"})]}),a.is_supplier==="1"&&e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-medium",children:"Supplier Invoice No"}),e.jsx("button",{type:"button",onClick:()=>{v(!d),u("supplier_invoice_no","")},className:"text-cyan-600 text-sm font-medium hover:text-cyan-800 transition underline",children:d?"Remember":"Not remember?"})]}),d?e.jsxs(e.Fragment,{children:[e.jsxs("select",{onChange:t=>{u("supplier_invoice_no",""),_(t.target.value),m.get(route("stocklog.create",{product_id:i}),{supplier_id:t.target.value},{preserveState:!0,preserveScroll:!0})},className:"appearance-none border border-gray-300 rounded-lg w-full py-3 px-4 text-gray-700 focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 transition duration-200 bg-white shadow-sm",id:"supplier_invoice_no",children:[e.jsx("option",{value:"",children:"Select supplier"}),f.map(t=>e.jsx("option",{value:t.id,children:t.person_name+" - "+t.code+" - "+t.contact},t.id))]}),x.length>0&&e.jsxs(s,{as:"select",name:"supplier_invoice_no",className:"mt-3 appearance-none border border-gray-300 rounded-lg w-full py-3 px-4 text-gray-700 focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 transition duration-200 bg-white shadow-sm",id:"supplier_invoice_no",children:[e.jsx("option",{value:"",children:"Select supplier invoice no"}),x.map(t=>e.jsx("option",{value:t.invoice_no,children:t.invoice_no},t.id))]})]}):e.jsx(s,{name:"supplier_invoice_no",className:"appearance-none border border-gray-300 rounded-lg w-full py-3 px-4 text-gray-700 focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 transition duration-200 bg-white shadow-sm",id:"supplier_invoice_no",type:"text",placeholder:"Enter supplier invoice no"}),e.jsx(r,{name:"supplier_invoice_no",component:"div",className:"text-red-500 text-xs mt-1"}),e.jsxs("div",{className:"flex items-center gap-4 mt-3",children:[e.jsx("button",{type:"button",onClick:()=>c(!0),className:"text-cyan-600 text-sm font-medium hover:text-cyan-800 transition underline",children:"Create new invoice"}),e.jsx("button",{type:"button",onClick:()=>n(!0),className:"text-cyan-600 text-sm font-medium hover:text-cyan-800 transition underline",children:"Create new supplier"})]})]}),e.jsxs("div",{className:"flex items-center justify-start gap-1 mt-8",children:[e.jsx("button",{className:"bg-black hover:bg-blue-dark text-white font-bold py-2 px-4 rounded-lg",type:"submit",children:"Save"}),e.jsx("button",{onClick:()=>m.get(route("stock.index"),{product_id:i}),className:"bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-lg",type:"button",children:"Close"})]})]})})})})})})})})}),e.jsx(b,{show:N,onClose:()=>n(!1),children:e.jsxs("div",{className:"overflow-y-auto max-h-[80vh]",children:[e.jsx("div",{className:"flex justify-center p-10",children:e.jsx("div",{className:"text-2xl font-medium text-[#5d596c] ",children:"Create New Supplier"})}),e.jsx("div",{className:"px-10 mb-5",children:e.jsx(E,{codeRoute:"stocklog.create",id:{product_id:i},setIsNewSupplierModel:n})})]})}),e.jsx(b,{show:g,onClose:()=>c(!1),children:e.jsxs("div",{className:"overflow-y-auto max-h-[80vh]",children:[e.jsx("div",{className:"flex justify-center p-10",children:e.jsx("div",{className:"text-2xl font-medium text-[#5d596c] ",children:"Create New Invoice"})}),e.jsx("div",{className:"px-10 mb-5",children:e.jsx(R,{codeRoute:"stocklog.create",id:{product_id:i},setIsNewSupplierInvoiceModel:c})})]})})]})}export{O as default};
