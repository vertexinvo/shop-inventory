import{j as e,Y as i,r as m,y as h}from"./app-B0udZE7F.js";import{A as p}from"./AuthenticatedLayout-BTKJ93ER.js";import"./transition-DiPsKi7_.js";import"./ReactToastify-CRRX_O1A.js";import"./Modal-CstDktYW.js";import"./proxy-BbYb6a1t.js";const y=({activities:l})=>(console.log(l),e.jsxs(p,{header:!0,children:[e.jsx(i,{title:"Activity Log"}),e.jsxs("div",{className:"p-5 mx-4",children:[e.jsx("div",{className:"font-[sans-serif] overflow-x-auto",children:e.jsxs("table",{className:"min-w-full bg-white shadow-md rounded-sm overflow-hidden",children:[e.jsx("thead",{className:"whitespace-nowrap",children:e.jsxs("tr",{className:"text-xs font-semibold tracking-wide text-left text-white uppercase border-b bg-black",children:[e.jsx("th",{className:"p-4 text-left text-sm font-semibold",children:"User"}),e.jsx("th",{className:"p-4 text-left text-sm font-semibold",children:"Email"}),e.jsx("th",{className:"p-4 text-left text-sm font-semibold",children:"Log Name"}),e.jsx("th",{className:"p-4 text-left text-sm font-semibold",children:"Action"}),e.jsx("th",{className:"p-4 text-left text-sm font-semibold",children:"Event"}),e.jsx("th",{className:"p-4 text-left text-sm font-semibold",children:"Properties"}),e.jsx("th",{className:"p-4 text-left text-sm font-semibold",children:"Time"})]})}),e.jsx(u,{activities:l})]})}),e.jsxs("div",{class:"grid px-4 py-3 text-xs font-semibold tracking-wide text-gray-500 uppercase border-t dark:border-gray-700 bg-gray-50 sm:grid-cols-9    ",children:[e.jsxs("span",{class:"flex items-center col-span-3",children:[" Showing ",l.from," - ",l.to," of ",l.total," "]}),e.jsx("span",{class:"col-span-2"}),e.jsx("span",{class:"flex col-span-4 mt-2 sm:mt-auto sm:justify-end",children:e.jsx("nav",{"aria-label":"Table navigation",children:e.jsxs("ul",{class:"inline-flex items-center",children:[e.jsx("li",{children:e.jsx("button",{onClick:()=>l.links[0].url?h.get(l.links[0].url):null,class:"px-3 py-1 rounded-md rounded-l-lg focus:outline-none focus:shadow-outline-purple","aria-label":"Previous",children:e.jsx("svg",{"aria-hidden":"true",class:"w-4 h-4 fill-current",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z","clip-rule":"evenodd","fill-rule":"evenodd"})})})}),(()=>{let o=-1;const d=l.links.findIndex(r=>r.active);return l.links.slice(1,-1).filter((r,n,s)=>{const t=parseInt(r.label,10);if(isNaN(t))return!0;const a=Math.max(0,d-2),c=Math.min(s.length-1,d+2);return n<3||n>s.length-4||n>=a&&n<=c}).map((r,n,s)=>{const t=parseInt(r.label,10),a=!isNaN(t)&&o!==-1&&t-o>1;return isNaN(t)||(o=t),e.jsx("li",{children:a?e.jsx("span",{className:"px-3 py-1",children:"..."}):r.active?e.jsx("button",{className:"px-3 py-1 text-white dark:text-gray-800 transition-colors duration-150 bg-black dark:bg-gray-100 border border-r-0 border-black dark:border-gray-100 rounded-md focus:outline-none focus:shadow-outline-purple","aria-current":"page",children:r.label}):e.jsx("button",{onClick:()=>r.url&&window.location.assign(r.url),className:"px-3 py-1 rounded-md focus:outline-none focus:shadow-outline-purple",children:r.label})},n)})})(),e.jsx("li",{children:e.jsx("button",{onClick:()=>l.links[l.links.length-1].url&&window.location.assign(l.links[l.links.length-1].url),class:"px-3 py-1 rounded-md rounded-r-lg focus:outline-none focus:shadow-outline-purple","aria-label":"Next",children:e.jsx("svg",{class:"w-4 h-4 fill-current","aria-hidden":"true",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd","fill-rule":"evenodd"})})})})]})})})]})]})]})),u=({activities:l})=>{var n;const[o,d]=m.useState({}),r=s=>{d(t=>({...t,[s]:!t[s]}))};return e.jsx("tbody",{className:"whitespace-nowrap",children:((n=l==null?void 0:l.data)==null?void 0:n.length)>0?l.data.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"p-4 text-sm text-gray-700",children:s.causer?s.causer.name:"System"}),e.jsx("td",{className:"p-4 text-sm text-gray-700",children:s.causer?s.causer.email:"N/A"}),e.jsx("td",{className:"p-4 text-sm text-gray-700",children:s.log_name}),e.jsx("td",{className:"p-4 text-sm text-gray-700",children:s.description}),e.jsx("td",{className:"p-4 text-sm text-gray-700",children:s.event}),e.jsx("td",{className:"p-4 text-sm text-gray-700",children:s.properties&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>r(s.id),className:"px-3 py-1 bg-gray-500 text-white rounded hover:bg-gray-600 transition",children:o[s.id]?"Hide Details":"Show Details"}),o[s.id]&&e.jsx("div",{className:"overflow-x-auto mt-2",children:e.jsxs("table",{className:"min-w-full border border-gray-300 bg-white shadow-md rounded-lg",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100 text-left",children:[e.jsx("th",{className:"py-2 px-4 border-b",children:"Property"}),e.jsx("th",{className:"py-2 px-4 border-b",children:"Value"})]})}),e.jsx("tbody",{children:Object.entries(s.properties).map(([t,a])=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"py-2 px-4 border-b font-semibold",children:t}),e.jsx("td",{className:"py-2 px-4 border-b",children:typeof a=="object"?e.jsx("ul",{className:"list-disc list-inside bg-gray-100 p-2 rounded",children:Object.entries(a).map(([c,x])=>e.jsxs("li",{children:[e.jsxs("strong",{children:[c,": "]})," ",x]},c))}):a})]},t))})]})})]})}),e.jsx("td",{className:"p-4 text-sm text-gray-700",children:new Date(s.created_at).toLocaleString()})]},s.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"p-4 text-sm text-center text-gray-700",children:"No activity logs found."})})})};export{y as default};
