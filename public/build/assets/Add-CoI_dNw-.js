import{r as p,j as e,Y as le,y as g}from"./app-BE9YTN8D.js";import{F as ne,a as re,b as c,E as m}from"./formik.esm-CVxVHHkl.js";import{F as Y}from"./index-CcegLGOY.js";import{a as ie,M as ce}from"./index-Bvm17EGy.js";import{A as de}from"./AuthenticatedLayout-BuMXvMEX.js";import{c as me,b as h,d as N,e as oe,f as xe,a as b,g as be}from"./index.esm-BOJunK6e.js";import{S as q}from"./react-select.esm-BmW-dvAP.js";import"./index-BRMKjexk.js";/* empty css                   */import{B as j}from"./ReactToastify-Bsdm7qPy.js";import"./transition-BRfpvuzu.js";import"./Modal-BXpgV9U9.js";import"./defineProperty-DJACW-dl.js";import"./typeof-QjJsDpFa.js";function Ie(F){const{auth:ue,users:C,items:S,order_id:G,taxs:E,shippingrates:H,order:a,default_selected_shippingrate:J}=F,[W,I]=p.useState(!1),[X,P]=p.useState(!1),[d,_]=p.useState(null),[Z,V]=p.useState(J||null),[ee,A]=p.useState(!1),[r,u]=p.useState(null),v={control:(s,l)=>({...s,borderColor:l.isFocused?"black":s.borderColor,boxShadow:l.isFocused?"0 0 0 1px black":s.boxShadow,"&:hover":{borderColor:l.isFocused?"black":s.borderColor}})};console.log(a);const[te,pe]=p.useState((a==null?void 0:a.items.map(s=>{var l,f;return s!=null&&s.product&&(s.product.selling_price=s.price),{value:s.product_id,data:s==null?void 0:s.product,quantity:s.qty,label:`${(l=s==null?void 0:s.product)==null?void 0:l.name} - ${(f=s==null?void 0:s.product)==null?void 0:f.model}`,price:s.price}}))||[]);return e.jsxs(de,{header:e.jsxs(e.Fragment,{children:[e.jsx(ce,{size:20,className:"mr-2 cursor-pointer",onClick:()=>g.get(route("order.index")),title:"Back"}),e.jsxs("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:[" ",a?"Edit Order":"Add Order"]})]}),children:[e.jsx(le,{title:"Order"}),e.jsx(ne,{enableReinitialize:!0,initialValues:{name:(a==null?void 0:a.name)||"",email:(a==null?void 0:a.email)||"",phone:(a==null?void 0:a.phone)||"",address:(a==null?void 0:a.address)||"",total:(a==null?void 0:a.total)||0,payable_amount:(a==null?void 0:a.payable_amount)||0,paid_amount:(a==null?void 0:a.paid_amount)||0,method:(a==null?void 0:a.method)||"",cheque_no:(a==null?void 0:a.cheque_no)||"",cheque_date:(a==null?void 0:a.cheque_date)||"",status:(a==null?void 0:a.status)||"completed",bank_name:(a==null?void 0:a.bank_name)||"",bank_branch:(a==null?void 0:a.bank_branch)||"",bank_account:(a==null?void 0:a.bank_account)||"",online_payment_link:(a==null?void 0:a.online_payment_link)||"",extra_charges:parseFloat(a==null?void 0:a.extra_charges)||0,shipping_charges:parseFloat(a==null?void 0:a.shipping_charges)||0,discount:parseFloat(a==null?void 0:a.discount)||0,tax:(a==null?void 0:a.tax_fee)||0,is_installment:(a==null?void 0:a.is_installment)===!0&&"1"||"0",installment_amount:(a==null?void 0:a.installment_amount)||0,installment_period:(a==null?void 0:a.installment_period)||"",installment_count:(a==null?void 0:a.installment_count)||0,installment_start_date:(a==null?void 0:a.installment_start_date)||"",installment_end_date:(a==null?void 0:a.installment_end_date)||"",user_id:(a==null?void 0:a.user_id)||"",items:te||[],tax_id:(a==null?void 0:a.tax_id)||"",shipping_id:(a==null?void 0:a.shipping_id)||"",order_date:(a==null?void 0:a.order_date)||new Date().toISOString().slice(0,10),close:!1,exchange_items:(a==null?void 0:a.exchange_items)||[],exchange:(a==null?void 0:a.exchange)||0},validationSchema:me({name:b().required("Name is required"),email:b().email("Invalid email address"),phone:b().max(15,"Phone number must be at most 15 digits").min(10,"Phone number must be at least 10 digits"),address:b(),total:h().min(0,"Total must be a positive number").required("Total is required"),payable_amount:h().min(0,"Payable amount must be a positive number").required("Payable amount is required"),paid_amount:h().min(0,"Paid amount must be a positive number").required("Paid amount is required"),method:b().required("Payment method is required"),cheque_no:b().when("method",{is:"cheque",then:s=>s.required(),otherwise:s=>s.optional()}),cheque_date:N().when("method",{is:"cheque",then:s=>s.required(),otherwise:s=>s.optional()}),bank_name:b().when("method",{is:"bank",then:s=>s.required(),otherwise:s=>s.optional()}),bank_branch:b().when("method",{is:"bank",then:s=>s.required(),otherwise:s=>s.optional()}),bank_account:b().when("method",{is:"bank",then:s=>s.required(),otherwise:s=>s.optional()}),online_payment_link:b().url("Invalid URL"),extra_charges:h().min(0,"Extra charges must be a positive number"),discount:h().min(0,"Discount must be a positive number"),tax:h().min(0,"Tax must be a positive number"),status:b().oneOf(["pending","completed","cancelled"],"Invalid status").required("Status is required"),is_installment:be(),installment_amount:h().when("is_installment",{is:!0,then:s=>s.min(0,"Installment amount must be a positive number").required("Installment amount is required"),otherwise:s=>s.optional()}),installment_period:b().when("is_installment",{is:!0,then:s=>s.required("Installment period is required"),otherwise:s=>s.optional()}),installment_count:h().when("is_installment",{is:!0,then:s=>s.min(1,"Installment count must be at least 1").required("Installment count is required"),otherwise:s=>s.optional()}),installment_start_date:N().when("is_installment",{is:!0,then:s=>s.required("Installment start date is required"),otherwise:s=>s.optional()}),installment_end_date:N().when("is_installment",{is:!0,then:s=>s.min(xe("installment_start_date"),"End date must be after start date").required("Installment end date is required"),otherwise:s=>s.optional()}),items:oe().min(1,"At least one item is required"),order_date:N().required("Order date is required"),paid_amount:h().min(0,"Paid amount must be a positive number").required("Paid amount is required")}),onSubmit:(s,{setSubmitting:l,resetForm:f})=>{a?g.put(route("order.update",a.id),s,{preserveScroll:!0,preserveState:!0}):g.post(route("order.store"),s,{onSuccess:()=>{f()},preserveScroll:!0,preserveState:!0})},children:({isSubmitting:s,values:l,errors:f,setFieldValue:i,handleSubmit:T})=>{p.useEffect(()=>{const t=l.items.reduce((o,x)=>o+x.quantity*x.data.selling_price,0),n=parseFloat(l.discount||0);i("total",t),i("payable_amount",t-(n+l.exchange))},[l.items,l.discount,i,l.exchange]);const ae=()=>{i("close",!0),T()},se=()=>{i("close",!1),T()};return p.useEffect(()=>{(l.paid_amount===0||l.paid_amount<l.payable_amount)&&i("paid_amount",l.payable_amount)},[l.payable_amount,l.tax_id,l.shipping_id]),p.useEffect(()=>{if(l.exchange_items.length>0){const t=l.exchange_items.reduce((n,o)=>n+o.quantity*o.purchase_price,0);i("exchange",t)}},[l.exchange_items]),e.jsx(re,{children:e.jsxs("div",{className:"grid grid-cols-3 gap-1",children:[e.jsxs("div",{className:`w-full ${l.items.length>0?"col-span-2":"col-span-3"}`,children:[e.jsx("div",{className:"font-sans antialiased bg-grey-lightest",children:e.jsx("div",{className:"w-full bg-grey-lightest",children:e.jsx("div",{className:"container mx-auto py-3 px-5",children:e.jsxs("div",{className:"w-full  mx-auto bg-white rounded shadow p-5 sm:p-8 md:p-10",children:[e.jsxs("div",{className:"w-full flex flex-col md:flex-row items-start md:items-center justify-between mb-5",children:[e.jsxs("div",{className:" flex items-center gap-2 mb-4 md:mb-0 w-full sm:w-auto",children:[e.jsxs("label",{className:"block text-grey-darker text-lg font-bold",children:["Order#",G]}),e.jsx(c,{name:"order_date",type:"date",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-black focus:border-black block w-full p-2.5"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-start gap-2 w-full sm:w-auto",children:[e.jsx("button",{onClick:se,className:"bg-black hover:bg-blue-dark text-white font-bold py-2 px-4 rounded-lg w-full sm:w-auto",type:"button",children:"Save"}),e.jsx("button",{onClick:ae,className:"bg-black hover:bg-blue-dark text-white font-bold py-2 px-4 rounded-lg w-full sm:w-auto",type:"button",children:"Save & Close"}),e.jsx("button",{onClick:()=>g.visit(route("order.index")),className:"bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-lg w-full sm:w-auto",type:"button",children:"Close"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-grey-darker text-sm mb-2",children:"Select Customer (Existing)"}),e.jsx(q,{onChange:t=>{i("user_id",t.value),i("name",t.name),i("email",t.email),i("phone",t.phone),i("address",t.address)},onInputChange:t=>{I(!0),setTimeout(()=>{g.get(route("order.instantorder"),{searchuser:t},{preserveScroll:!0,preserveState:!0}),I(!1)},1e3)},isSearchable:!0,isLoading:W,value:C.find(t=>t.value===l.user_id),options:C,className:"basic-single",classNamePrefix:"select",styles:v})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row mb-4 gap-2",children:[e.jsxs("div",{className:"w-full sm:w-1/2",children:[e.jsx("label",{className:"block text-grey-darker text-sm mb-2",children:"Customer Name"}),e.jsx(c,{name:"name",className:"appearance-none border rounded w-full py-2 px-3 focus:ring-black focus:border-black text-grey-darker",type:"text",placeholder:"Enter Customer name"}),e.jsx(m,{name:"name",component:"div",className:"text-red-500 text-xs mt-1"})]}),e.jsxs("div",{className:"w-full sm:w-1/2",children:[e.jsx("label",{className:"block text-grey-darker text-sm mb-2",children:"Customer Email"}),e.jsx(c,{name:"email",className:"appearance-none border rounded w-full py-2 px-3 focus:ring-black focus:border-black text-grey-darker",type:"text",placeholder:"Enter Customer email"}),e.jsx(m,{name:"email",component:"div",className:"text-red-500 text-xs mt-1"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-grey-darker text-sm mb-2",children:"Select Items"}),e.jsx(q,{onChange:t=>_(t),onInputChange:t=>{P(!0),setTimeout(()=>{g.get(route("order.instantorder"),{searchitem:t,searchid:(user==null?void 0:user.id)||""},{preserveScroll:!0,preserveState:!0}),P(!1)},1e3)},isSearchable:!0,isLoading:X,value:S.find(t=>t.value===(d==null?void 0:d.value)),options:S,className:"basic-single",classNamePrefix:"select",styles:v})]}),d&&e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsx("div",{className:"w-full sm:w-1/2",children:e.jsx("input",{type:"number",value:d==null?void 0:d.quantity,onChange:t=>_({...d,quantity:t.target.value}),placeholder:"Enter Quantity",className:"appearance-none border rounded w-full py-2 px-3 focus:ring-black focus:border-black text-grey-darker"})}),e.jsx("div",{className:"w-full sm:w-1/2",children:e.jsx("button",{onClick:()=>{var t,n;if((d==null?void 0:d.quantity)>((n=(t=d==null?void 0:d.data)==null?void 0:t.stock)==null?void 0:n.quantity)){j.error("Quantity exceeds stock quantity");return}if(l.items.find(o=>{var x;return o.data.id===((x=d==null?void 0:d.data)==null?void 0:x.id)})){j.error("Item already added");return}if((d==null?void 0:d.quantity)<=0){j.error("Quantity must be greater than 0");return}_(null),i("items",[...l.items,d])},className:"bg-black text-sm hover:bg-blue-dark text-white font-bold py-2 px-4 rounded-lg",type:"button",children:"Add Item"})})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsx("table",{className:"min-w-full bg-white",children:e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-4 text-left text-sm font-semibold text-black",children:"Product Info"}),e.jsx("td",{className:"p-4 text-sm",children:"..."})]})})})})]})})})}),e.jsx("div",{className:"font-sans antialiased bg-grey-lightest",children:e.jsx("div",{className:"w-full bg-grey-lightest",children:e.jsx("div",{className:"container mx-auto py-3 px-5",children:e.jsxs("div",{className:"w-full lg:w-full mx-auto bg-white rounded shadow p-10",children:[e.jsx("div",{className:"mb-4",children:e.jsx("div",{className:"w-full flex items-center justify-between",children:e.jsx("label",{className:"block text-grey-darker text-lg font-bold mb-2",children:"Payment"})})}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-grey-darker text-sm font-bold mb-2",children:"Is Installment"}),e.jsxs("div",{className:"flex items-center",children:[e.jsxs("label",{className:"mr-4",children:[e.jsx(c,{name:"is_installment",type:"radio",value:"1",className:"mr-2 checked:bg-black checked:hover:bg-gray-700 checked:active:bg-black checked:focus:bg-black focus:bg-black focus:outline-none focus:ring-1 focus:ring-black"})," Yes"]}),e.jsxs("label",{children:[e.jsx(c,{name:"is_installment",type:"radio",value:"0",className:"mr-2 checked:bg-black checked:hover:bg-gray-700 checked:active:bg-black checked:focus:bg-black focus:bg-black focus:outline-none focus:ring-1 focus:ring-black"})," No"]})]}),e.jsx(m,{name:"is_installment",component:"div",className:"text-red-500 text-xs mt-1"})]}),l.is_installment=="1"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex mb-4",children:[e.jsxs("div",{className:"w-1/2 mr-1",children:[e.jsx("label",{className:"block text-grey-darker text-sm  mb-2",children:"	Installment Amount"}),e.jsx(c,{name:"installment_amount",className:"appearance-none border rounded w-full py-2 px-3   focus:ring-black focus:border-black text-grey-darker",type:"text",placeholder:"Enter Installment Amount"}),e.jsx(m,{name:"installment_amount",component:"div",className:"text-red-500 text-xs mt-1"})]}),e.jsxs("div",{className:"w-1/2 mr-1",children:[e.jsx("label",{className:"block text-grey-darker text-sm  mb-2",children:"Installment Period"}),e.jsx(c,{name:"installment_period",className:"appearance-none border rounded w-full py-2 px-3   focus:ring-black focus:border-black text-grey-darker",type:"text",placeholder:"Enter Installment Period"}),e.jsx(m,{name:"installment_period",component:"div",className:"text-red-500 text-xs mt-1"})]})]}),e.jsxs("div",{className:"flex mb-4",children:[e.jsxs("div",{className:"w-1/2 mr-1",children:[e.jsx("label",{className:"block text-grey-darker text-sm  mb-2",children:"	Installment Start Date"}),e.jsx(c,{name:"installment_start_date",className:"appearance-none border rounded w-full py-2 px-3   focus:ring-black focus:border-black text-grey-darker",type:"date",placeholder:"Enter Installment Start Date"}),e.jsx(m,{name:"installment_start_date",component:"div",className:"text-red-500 text-xs mt-1"})]}),e.jsxs("div",{className:"w-1/2 mr-1",children:[e.jsx("label",{className:"block text-grey-darker text-sm  mb-2",children:"Installment End Date"}),e.jsx(c,{name:"installment_end_date",className:"appearance-none border rounded w-full py-2 px-3   focus:ring-black focus:border-black text-grey-darker",type:"date",placeholder:"Enter Installment End Date"}),e.jsx(m,{name:"installment_end_date",component:"div",className:"text-red-500 text-xs mt-1"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-grey-darker text-sm  mb-2 ",children:"Installment Count"}),e.jsx(c,{name:"installment_count",className:"appearance-none border rounded w-full py-2 px-3   focus:ring-black focus:border-black text-grey-darker",type:"number",placeholder:"Enter Installment Count"}),e.jsx(m,{name:"installment_count",component:"div",className:"text-red-500 text-xs mt-1"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-grey-darker text-sm  mb-2 font-bold",children:"Select Payment Method"}),e.jsxs(c,{name:"method",className:"appearance-none border rounded w-full py-2 px-3   focus:ring-black focus:border-black text-grey-darker",as:"select",children:[e.jsx("option",{value:"",children:"Select Payment Method"}),e.jsx("option",{value:"cash",children:"Cash"}),e.jsx("option",{value:"bank",children:"Bank Transfer"}),e.jsx("option",{value:"cheque",children:"Cheque"}),e.jsx("option",{value:"online",children:"Online"})]}),e.jsx(m,{name:"method",component:"div",className:"text-red-500 text-xs mt-1"})]}),l.method==="cheque"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-grey-darker text-sm mb-2",children:"Cheque No (optional)"}),e.jsx(c,{name:"cheque_no",className:"appearance-none border rounded w-full py-2 px-3   focus:ring-black focus:border-black text-grey-darker",type:"text",placeholder:"Enter cheque no"}),e.jsx(m,{name:"cheque_no",component:"div",className:"text-red-500 text-xs mt-1"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-grey-darker text-sm mb-2",children:"Cheque Date (optional)"}),e.jsx(c,{name:"cheque_date",className:"appearance-none border rounded w-full py-2 px-3   focus:ring-black focus:border-black text-grey-darker",type:"date"}),e.jsx(m,{name:"cheque_date",component:"div",className:"text-red-500 text-xs mt-1"})]})]}),l.method==="bank"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-grey-darker text-sm mb-2",children:"Bank Name (optional)"}),e.jsx(c,{name:"bank_name",className:"appearance-none border rounded w-full py-2 px-3   focus:ring-black focus:border-black text-grey-darker",type:"text",placeholder:"Enter bank name"}),e.jsx(m,{name:"bank_name",component:"div",className:"text-red-500 text-xs mt-1"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-grey-darker text-sm mb-2",children:"Brank Brank (optional)"}),e.jsx(c,{name:"bank_branch",className:"appearance-none border rounded w-full py-2 px-3   focus:ring-black focus:border-black text-grey-darker",type:"text",placeholder:"Enter bank branch"}),e.jsx(m,{name:"bank_branch",component:"div",className:"text-red-500 text-xs mt-1"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-grey-darker text-sm mb-2",children:"Bank Account No (optional)"}),e.jsx(c,{name:"bank_account",className:"appearance-none border rounded w-full py-2 px-3   focus:ring-black focus:border-black text-grey-darker",type:"text",placeholder:"Enter bank account no"}),e.jsx(m,{name:"bank_account",component:"div",className:"text-red-500 text-xs mt-1"})]})]}),l.method==="online"&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-grey-darker text-sm mb-2",children:"Online payment link (optional)"}),e.jsx(c,{name:"online_payment_link",className:"appearance-none border rounded w-full py-2 px-3   focus:ring-black focus:border-black text-grey-darker",type:"url",placeholder:"Enter online payment link"}),e.jsx(m,{name:"online_payment_link",component:"div",className:"text-red-500 text-xs mt-1"})]})}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-grey-darker text-sm  mb-2 font-bold",children:"Select Tax"}),e.jsxs(c,{name:"tax_id",as:"select",onChange:t=>{const n=E.find(o=>o.id==t.target.value);console.log(n),i("tax",n?n.cost:""),i("tax_id",t.target.value)},className:"appearance-none border rounded w-full py-2 px-3   focus:ring-black focus:border-black text-grey-darker",children:[e.jsx("option",{value:"",children:"Select Tax"}),E.map(t=>e.jsxs("option",{value:t.id,children:[t.name," - ",t.cost]},t.id))]}),e.jsx(m,{name:"tax_id",component:"div",className:"text-red-500 text-xs mt-1"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-grey-darker text-sm  mb-2 font-bold",children:"Select Shipping Cost"}),e.jsx(q,{onChange:t=>{console.log(t),V(t),i("shipping_id",t.value),i("shipping_charges",t.fee)},onInputChange:t=>{A(!0),setTimeout(()=>{g.get(a?route("order.edit",a.id):route("order.create"),{searchshipping:t},{preserveScroll:!0,preserveState:!0}),A(!1)},1e3)},isSearchable:!0,isLoading:ee,value:Z,options:H,className:"basic-single",classNamePrefix:"select",styles:v}),e.jsx(m,{name:"shipping_id",component:"div",className:"text-red-500 text-xs mt-1"})]})]})})})}),e.jsx("div",{className:"font-sans antialiased bg-grey-lightest",children:e.jsx("div",{className:"w-full bg-grey-lightest",children:e.jsx("div",{className:"container mx-auto py-3 px-5",children:e.jsxs("div",{className:"w-full lg:w-full mx-auto bg-white rounded shadow p-4 sm:p-6 lg:p-10",children:[e.jsxs("div",{className:"w-full flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4",children:[e.jsx("label",{className:"block text-grey-darker text-base sm:text-lg font-bold mb-2 sm:mb-0",children:"Exchange"}),l.exchange_items.length>0&&r===null&&e.jsx("button",{type:"button",onClick:()=>{u({name:"",model:"",identity_type:"none",identity_value:"",purchase_price:"",quantity:"1",total:""})},className:"text-sm font-semibold text-black dark:text-white underline leading-tight",children:"Add Item"})]}),e.jsx("div",{className:"relative flex flex-col w-full h-full text-gray-700 bg-white shadow-md rounded-lg",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-left table-auto",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-2 sm:p-4 border-b border-slate-300 bg-slate-50",children:e.jsx("p",{className:"text-xs sm:text-sm font-normal text-slate-500",children:"Name"})}),e.jsx("th",{className:"p-2 sm:p-4 border-b border-slate-300 bg-slate-50",children:e.jsx("p",{className:"text-xs sm:text-sm font-normal text-slate-500",children:"Model"})}),e.jsx("th",{className:"p-2 sm:p-4 border-b border-slate-300 bg-slate-50",children:e.jsx("p",{className:"text-xs sm:text-sm font-normal text-slate-500",children:"Identity*"})}),e.jsx("th",{className:"p-2 sm:p-4 border-b border-slate-300 bg-slate-50",children:e.jsx("p",{className:"text-xs sm:text-sm font-normal text-slate-500",children:"Purchase Price*"})}),e.jsx("th",{className:"p-2 sm:p-4 border-b border-slate-300 bg-slate-50",children:e.jsx("p",{className:"text-xs sm:text-sm font-normal text-slate-500",children:"Quantity*"})}),e.jsx("th",{className:"p-2 sm:p-4 border-b border-slate-300 bg-slate-50",children:e.jsx("p",{className:"text-xs sm:text-sm font-normal text-slate-500",children:"Total"})}),e.jsx("th",{className:"p-2 sm:p-4 border-b border-slate-300 bg-slate-50"})]})}),e.jsxs("tbody",{children:[l.exchange_items.length===0&&r===null&&e.jsx("tr",{className:"hover:bg-slate-50",children:e.jsx("td",{colSpan:"7",className:"p-4 border-b border-slate-200 text-center",children:e.jsxs("p",{className:"text-sm text-slate-800",children:["No Exchange Item!  ",e.jsx("button",{type:"button",onClick:()=>{u({name:"",model:"",identity_type:"none",identity_value:"",purchase_price:"",quantity:"1",total:""})},className:"text-sm font-semibold text-black dark:text-white underline",children:"Add Item"})]})})}),r&&e.jsxs("tr",{className:"hover:bg-slate-50",children:[e.jsx("td",{className:"p-2 sm:p-4 border-b border-slate-200",children:e.jsx("input",{type:"text",value:r.name,onChange:t=>u({...r,name:t.target.value}),className:"bg-gray-50 border border-gray-300 text-gray-900 text-xs sm:text-sm rounded-lg focus:ring-black focus:border-black block w-full p-2.5"})}),e.jsx("td",{className:"p-2 sm:p-4 border-b border-slate-200",children:e.jsx("input",{type:"text",value:r.model,onChange:t=>u({...r,model:t.target.value}),className:"bg-gray-50 border border-gray-300 text-gray-900 text-xs sm:text-sm rounded-lg focus:ring-black focus:border-black block w-full p-2.5"})}),e.jsxs("td",{className:"p-2 sm:p-4 border-b border-slate-200 flex flex-col sm:flex-row items-center gap-2",children:[e.jsxs("select",{value:r.identity_type,onChange:t=>u({...r,identity_type:t.target.value}),className:"bg-gray-50 border border-gray-300 text-gray-900 text-xs sm:text-sm rounded-lg focus:ring-black focus:border-black block w-full sm:w-auto p-2.5",children:[e.jsx("option",{value:"none",children:"None"}),e.jsx("option",{value:"imei",children:"IMEI"}),e.jsx("option",{value:"serial",children:"Serial"}),e.jsx("option",{value:"sku",children:"SKU"})]}),r.identity_type!=="none"&&e.jsx("input",{type:"text",value:r.identity_value,onChange:t=>u({...r,identity_value:t.target.value}),className:"bg-gray-50 border border-gray-300 text-gray-900 text-xs sm:text-sm rounded-lg focus:ring-black focus:border-black block w-full p-2.5"})]}),e.jsx("td",{className:"p-2 sm:p-4 border-b border-slate-200",children:e.jsx("input",{type:"text",value:r.purchase_price,onChange:t=>{const n=t.target.value;u({...r,purchase_price:n,total:n*r.quantity})},className:"bg-gray-50 border border-gray-300 text-gray-900 text-xs sm:text-sm rounded-lg focus:ring-black focus:border-black block w-full p-2.5"})}),e.jsx("td",{className:"p-2 sm:p-4 border-b border-slate-200",children:e.jsx("input",{type:"number",value:r.quantity,onChange:t=>{const n=t.target.value;u({...r,quantity:n,total:n*r.purchase_price})},className:"bg-gray-50 border border-gray-300 text-gray-900 text-xs sm:text-sm rounded-lg focus:ring-black focus:border-black block w-full p-2.5"})}),e.jsx("td",{className:"p-2 sm:p-4 border-b border-slate-200",children:e.jsx("input",{type:"text",disabled:!0,value:r.total,className:"bg-gray-200 border border-gray-300 text-gray-900 text-xs sm:text-sm rounded-lg focus:ring-black focus:border-black block w-full p-2.5"})}),e.jsxs("td",{className:"p-2 sm:p-4 border-b border-slate-200 flex items-center gap-2",children:[e.jsx("button",{type:"button",onClick:()=>{r.name!==""&&r.purchase_price!==""&&r.identity_type!==""&&r.quantity!==""&&r.total!==""?(i("exchange_items",[...l.exchange_items,r]),u(null)):j.error("Please fill in all required fields")},className:"text-xs sm:text-sm font-semibold text-black dark:text-white underline",children:"Add"})," ",e.jsx("button",{type:"button",onClick:()=>u(null),className:"text-xs sm:text-sm font-semibold text-black dark:text-white underline",children:"Cancel"})]})]}),l.exchange_items.map(t=>e.jsxs("tr",{className:"hover:bg-slate-50",children:[e.jsx("td",{className:"p-2 sm:p-4 border-b border-slate-200",children:e.jsx("p",{className:"text-xs sm:text-sm text-slate-800",children:t.name})}),e.jsx("td",{className:"p-2 sm:p-4 border-b border-slate-200",children:e.jsx("p",{className:"text-xs sm:text-sm text-slate-800",children:t.model||e.jsx("span",{className:"text-red-500",children:"N/A"})})}),e.jsx("td",{className:"p-2 sm:p-4 border-b border-slate-200",children:e.jsxs("p",{className:"text-xs sm:text-sm text-slate-800",children:[t.identity_type,t.identity_value!==""&&` : ${t.identity_value}`]})}),e.jsx("td",{className:"p-2 sm:p-4 border-b border-slate-200",children:e.jsx("p",{className:"text-xs sm:text-sm text-slate-800",children:t.purchase_price})}),e.jsx("td",{className:"p-2 sm:p-4 border-b border-slate-200",children:e.jsx("p",{className:"text-xs sm:text-sm text-slate-800",children:t.quantity})}),e.jsx("td",{className:"p-2 sm:p-4 border-b border-slate-200",children:e.jsx("p",{className:"text-xs sm:text-sm text-slate-800",children:t.total})}),e.jsx("td",{className:"p-2 sm:p-4 border-b border-slate-200",children:e.jsx(Y,{size:20,color:"red",className:"cursor-pointer",onClick:()=>{const n=l.exchange_items.filter(x=>x!==t);i("exchange_items",n);const o=n.reduce((x,y)=>x+y.quantity*y.purchase_price,0);i("exchange",o)}})})]}))]})]})})})]})})})})]}),l.items.length>0&&e.jsxs("div",{className:"w-full col-span-1",children:[e.jsx("div",{className:"font-sans antialiased bg-grey-lightest",children:e.jsx("div",{className:"w-full bg-grey-lightest",children:e.jsx("div",{className:"container mx-auto py-3 px-5",children:e.jsx("div",{className:"w-full lg:w-full mx-auto bg-white rounded shadow p-10",children:l.items.length>0&&e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"w-full flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-grey-darker text-lg font-bold ",children:"Cart"}),e.jsx(ie,{size:25,onClick:()=>i("items",[])})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsx("div",{class:"font-[sans-serif] overflow-x-auto",children:e.jsxs("table",{class:"min-w-full bg-white",children:[e.jsx("thead",{class:"whitespace-nowrap",children:e.jsxs("tr",{children:[e.jsx("th",{class:"p-4 text-left text-sm font-semibold text-black",children:"Product Info"}),e.jsx("th",{class:"p-4 text-left text-sm font-semibold text-black",children:"price"}),e.jsx("th",{class:"p-4 text-left text-sm font-semibold text-black",children:"Qty"}),e.jsx("th",{class:"p-4 text-left text-sm font-semibold text-black",children:"Total"}),e.jsx("th",{class:"p-4 text-left text-sm font-semibold text-black"})]})}),e.jsx("tbody",{class:"whitespace-nowrap",children:l.items.map((t,n)=>{var o,x,y,$,M,O,B,D,L,Q;return e.jsxs("tr",{class:"odd:bg-gray-50",children:[e.jsx("td",{class:" text-sm",children:e.jsx("div",{class:"flex items-center cursor-pointer w-max",children:e.jsxs("div",{class:"ml-4 ",children:[e.jsxs("p",{class:"text-sm text-black ",children:["Name : ",(o=t==null?void 0:t.data)==null?void 0:o.name]}),((x=t==null?void 0:t.data)==null?void 0:x.model)&&e.jsxs("p",{class:"text-xs text-gray-500 mt-0.5",children:["Model :",(y=t==null?void 0:t.data)==null?void 0:y.model," "]}),(($=t==null?void 0:t.data)==null?void 0:$.identity_type)!=="none"&&e.jsxs("p",{class:"text-xs text-gray-500 mt-0.5",children:[(M=t==null?void 0:t.data)==null?void 0:M.identity_type,":",(O=t==null?void 0:t.data)==null?void 0:O.identity_value," "]})]})})}),e.jsx("td",{class:"p-4 text-sm text-black",children:e.jsx("input",{type:"number",name:"selling_price",value:(B=t==null?void 0:t.data)==null?void 0:B.selling_price,className:"appearance-none border rounded w-[100px] py-2 px-3 text-grey-darker",min:0,onChange:k=>{i(`items.${n}.data.selling_price`,k.target.value||0)}})}),e.jsx("td",{class:"p-4 text-sm text-black",children:e.jsx("input",{type:"number",name:"quantity",value:t==null?void 0:t.quantity,className:"appearance-none border rounded w-[60px] py-2 px-3 text-grey-darker",max:((L=(D=t==null?void 0:t.data)==null?void 0:D.stock)==null?void 0:L.quantity)||0,onChange:k=>{var z,R,K,U;const w=Number(k.target.value);if(w>((R=(z=t==null?void 0:t.data)==null?void 0:z.stock)==null?void 0:R.quantity)){j.error("Quantity exceeds stock quantity");return}if(w<=0){j.error("Quantity must be greater than 0");return}i(`items.${n}.quantity`,Math.min(w,((U=(K=t==null?void 0:t.data)==null?void 0:K.stock)==null?void 0:U.quantity)||0))}})}),e.jsx("td",{class:"p-4 text-sm text-black",children:(t==null?void 0:t.quantity)*((Q=t==null?void 0:t.data)==null?void 0:Q.selling_price)||0}),e.jsx("td",{class:"p-4 text-sm text-black",children:e.jsx(Y,{color:"red",className:"cursor-pointer hover:scale-110",onClick:()=>{i("items",l.items.filter(k=>k.data.id!==t.data.id))}})})]})})})]})})})]})})})})}),e.jsx("div",{className:"font-sans antialiased bg-grey-lightest",children:e.jsx("div",{className:"w-full bg-grey-lightest",children:e.jsx("div",{className:"container mx-auto py-3 px-5",children:e.jsx("div",{className:"w-full lg:w-full mx-auto bg-white rounded shadow p-10",children:l.items.length>0&&e.jsxs("div",{className:"mb-2",children:[e.jsx("div",{className:"w-full flex items-center justify-between mb-2",children:e.jsx("label",{className:"block text-grey-darker text-lg font-bold ",children:"Calculation"})}),e.jsxs("ul",{className:"mt-5",children:[e.jsxs("li",{className:"w-full flex items-center justify-between mb-2",children:[e.jsx("div",{children:"Total Amount:"}),e.jsx("div",{children:e.jsx("input",{type:"number",value:l.items.reduce((t,n)=>t+n.quantity*n.data.selling_price,0),className:"appearance-none border rounded disabled:bg-gray-200 disabled:hover:bg-gray-200	 py-2 px-3 text-grey-darker",disabled:!0})})]}),e.jsxs("li",{className:"w-full flex items-center justify-between",children:[e.jsx("div",{children:"Extra Charges:"}),e.jsxs("div",{children:[" ",e.jsx(c,{type:"number",name:"extra_charges",value:l.extra_charges,className:"appearance-none border rounded 	 py-2 px-3 text-grey-darker"})]})]}),e.jsx("li",{className:"w-full flex items-center justify-between mb-2",children:e.jsx(m,{name:"extra_charges",component:"div",className:"text-red-600 text-xs mt-1"})}),e.jsxs("li",{className:"w-full flex items-center justify-between",children:[e.jsx("div",{children:"Discount:"}),e.jsxs("div",{children:[" ",e.jsx(c,{type:"number",name:"discount",value:l.discount,className:"appearance-none border rounded 	 py-2 px-3 text-grey-darker"})]})]}),e.jsx("li",{className:"w-full flex items-center justify-between mb-2",children:e.jsx(m,{name:"discount",component:"div",className:"text-red-600 text-xs mt-1"})}),e.jsxs("li",{className:"w-full flex items-center justify-between mb-2",children:[e.jsx("div",{children:"Exchange:"}),e.jsxs("div",{children:[" ",e.jsx(c,{type:"number",disabled:!0,name:"exchange",value:l.exchange,className:"appearance-none border rounded disabled:bg-gray-200	 py-2 px-3 text-grey-darker"})]})]}),e.jsxs("li",{className:"w-full flex items-center justify-between mb-2",children:[e.jsx("div",{children:"Tax:"}),e.jsx("div",{children:e.jsx("input",{type:"number",value:l.tax,className:"appearance-none border rounded disabled:bg-gray-200 disabled:hover:bg-gray-200	 py-2 px-3 text-grey-darker",disabled:!0})})]}),e.jsxs("li",{className:"w-full flex items-center justify-between mb-2",children:[e.jsx("div",{children:"Shipping Cost:"}),e.jsx("div",{children:e.jsx("input",{type:"number",value:parseFloat(l.shipping_charges||0).toFixed(2),className:"appearance-none border rounded disabled:bg-gray-200 disabled:hover:bg-gray-200	 py-2 px-3 text-grey-darker",disabled:!0})})]}),e.jsxs("li",{className:"w-full flex items-center justify-between mb-2",children:[e.jsx("div",{className:"font-bold",children:"Grand Total:"}),e.jsx("div",{children:e.jsx("input",{type:"number",value:l.items.reduce((t,n)=>t+n.quantity*n.data.selling_price,0)+parseFloat(l.extra_charges||0)+parseFloat(l.tax||0)+parseFloat(l.shipping_charges||0)-(l.exchange+parseFloat(l.discount||0)),className:"appearance-none border rounded disabled:bg-gray-200 disabled:hover:bg-gray-200 py-2 px-3 text-grey-darker",disabled:!0})})]}),e.jsxs("li",{className:"w-full flex items-center justify-between",children:[e.jsx("div",{children:"Paid Amount:"}),e.jsx("div",{children:e.jsx(c,{type:"number",name:"paid_amount",className:"appearance-none border rounded py-2 px-3 text-grey-darker"})})]}),e.jsx("li",{className:"w-full flex items-center justify-between mb-2",children:e.jsx(m,{name:"paid_amount",component:"div",className:"text-red-600 text-xs mt-1"})})]})]})})})})})]})]})})}})]})}export{Ie as default};
