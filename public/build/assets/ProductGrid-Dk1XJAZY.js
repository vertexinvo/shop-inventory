import{r as t,R as c,f as Xe,h as Ze,V as et,i as tt,k as Me,m as je,n as st,o as rt,p as nt,B as ot,A as ie,e as _e,s as at,G as ct,t as lt,u as it,v as ut,T as dt,w as xe,C as we,F as pt,x as mt,z as ht,D as ft,E as Ct,H as gt,I as yt,J as pe,K as Rt,L as vt,M as wt,N as St,O as bt,P as kt,Q as xt,S as Et,U as Pt,X as Mt,j as D}from"./app-DhNW9LHY.js";import{l as Ft,F as At,m as Gt}from"./index-CmLoYHl9.js";import{j as Bt}from"./index-D8GFt_VK.js";var Z=c.createContext({}),Ce=(e,s,r,o)=>{if(!e||e.componentFromFramework||s.isDestroyed())return;const u=e.newAgStackInstance();let p,l,i=!1;return u.then(h=>{if(i){s.destroyBean(h);return}p=h,l=p.getGui(),r.appendChild(l),Ie(o,p)}),()=>{var h;i=!0,p&&((h=l==null?void 0:l.parentElement)==null||h.removeChild(l),s.destroyBean(p),o&&Ie(o,void 0))}},Ie=(e,s)=>{if(e)if(e instanceof Function)e(s);else{const r=e;r.current=s}},ne=(...e)=>e.filter(r=>r!=null&&r!=="").join(" "),oe=class Ve{constructor(...s){this.classesMap={},s.forEach(r=>{this.classesMap[r]=!0})}setClass(s,r){if(!!this.classesMap[s]==r)return this;const n=new Ve;return n.classesMap={...this.classesMap},n.classesMap[s]=r,n}toString(){return Object.keys(this.classesMap).filter(r=>this.classesMap[r]).join(" ")}},me=e=>{const s=()=>typeof Symbol=="function"&&Symbol.for,r=()=>s()?Symbol.for("react.memo"):60115;return typeof e=="function"&&!(e.prototype&&e.prototype.isReactComponent)||typeof e=="object"&&e.$$typeof===r()},He,Pe=(He=c.version)==null?void 0:He.split(".")[0],Nt=Pe==="16"||Pe==="17";function It(){return Pe==="19"}var Re=!1;function Dt(e){return Re||setTimeout(()=>Re=!1,0),Re=!0,e()}var fe=(e,s)=>{!Nt&&e&&!Re?Xe.flushSync(s):s()};function ve(e,s,r){if(s==null||e==null)return s;if(e===s||s.length===0&&e.length===0)return e;if(r||e.length===0&&s.length>0||e.length>0&&s.length===0)return s;const o=[],n=[],u=new Map,p=new Map;for(let l=0;l<s.length;l++){const i=s[l];p.set(i.instanceId,i)}for(let l=0;l<e.length;l++){const i=e[l];u.set(i.instanceId,i),p.has(i.instanceId)&&o.push(i)}for(let l=0;l<s.length;l++){const i=s[l],h=i.instanceId;u.has(h)||n.push(i)}return o.length===e.length&&n.length===0?e:o.length===0&&n.length===s.length?s:o.length===0?n:n.length===0?o:[...o,...n]}var Le=t.forwardRef((e,s)=>{var _;const{registry:r,context:o}=t.useContext(Z),n=t.useRef(null),u=t.useRef(null),p=t.useRef(null),l=t.useRef(null),i=t.useRef(null),h=t.useRef(),[C,k]=t.useState(),[R,g]=t.useState(),[a,f]=t.useState(),[m,d]=t.useState(()=>new oe),[v,E]=t.useState(()=>new oe("ag-hidden")),[x,P]=t.useState(()=>new oe("ag-hidden")),[M,G]=t.useState(()=>new oe("ag-invisible"));t.useImperativeHandle(s,()=>({refresh(){return!1}})),t.useLayoutEffect(()=>Ce(C,o,u.current),[C]);const W=t.useCallback(w=>{if(n.current=w,!w){h.current=o.destroyBean(h.current);return}const T={setInnerRenderer:(I,U)=>{k(I),f(U)},setChildCount:I=>g(I),toggleCss:(I,U)=>d(H=>H.setClass(I,U)),setContractedDisplayed:I=>P(U=>U.setClass("ag-hidden",!I)),setExpandedDisplayed:I=>E(U=>U.setClass("ag-hidden",!I)),setCheckboxVisible:I=>G(U=>U.setClass("ag-invisible",!I)),setCheckboxSpacing:I=>G(U=>U.setClass("ag-group-checkbox-spacing",I))},B=r.createDynamicBean("groupCellRendererCtrl",!0);B&&(h.current=o.createBean(B),h.current.init(T,w,p.current,l.current,i.current,Le,e))},[]),O=t.useMemo(()=>`ag-cell-wrapper ${m.toString()}`,[m]),N=t.useMemo(()=>`ag-group-expanded ${v.toString()}`,[v]),b=t.useMemo(()=>`ag-group-contracted ${x.toString()}`,[x]),S=t.useMemo(()=>`ag-group-checkbox ${M.toString()}`,[M]),y=C&&C.componentFromFramework,L=y?C.componentClass:void 0,F=C==null&&a!=null,V=nt(a);return c.createElement("span",{className:O,ref:W,...e.colDef?{}:{role:(_=h.current)==null?void 0:_.getCellAriaRole()}},c.createElement("span",{className:N,ref:l}),c.createElement("span",{className:b,ref:i}),c.createElement("span",{className:S,ref:p}),c.createElement("span",{className:"ag-group-value",ref:u},F&&c.createElement(c.Fragment,null,V),y&&c.createElement(L,{...C.params})),c.createElement("span",{className:"ag-group-child-count"},R))}),De=Le,Fe=t.createContext({setMethods:()=>{}}),Wt=e=>{const{initialProps:s,addUpdateCallback:r,CustomComponentClass:o,setMethods:n}=e,[{key:u,...p},l]=t.useState(s);return t.useEffect(()=>{r(i=>l(i))},[]),c.createElement(Fe.Provider,{value:{setMethods:n}},c.createElement(o,{key:u,...p}))},Ot=t.memo(Wt),Tt=0;function We(){return`agPortalKey_${++Tt}`}var $e=class{constructor(e,s,r,o){this.portal=null,this.oldPortal=null,this.reactComponent=e,this.portalManager=s,this.componentType=r,this.suppressFallbackMethods=!!o,this.statelessComponent=this.isStateless(this.reactComponent),this.key=We(),this.portalKey=We(),this.instanceCreated=this.isStatelessComponent()?ie.resolve(!1):new ie(n=>{this.resolveInstanceCreated=n})}getGui(){return this.eParentElement}getRootElement(){return this.eParentElement.firstChild}destroy(){this.componentInstance&&typeof this.componentInstance.destroy=="function"&&this.componentInstance.destroy();const e=this.portal;e&&this.portalManager.destroyPortal(e)}createParentElement(e){const s=this.portalManager.getComponentWrappingElement(),r=document.createElement(s||"div");return r.classList.add("ag-react-container"),e.reactContainer=r,r}statelessComponentRendered(){return this.eParentElement.childElementCount>0||this.eParentElement.childNodes.length>0}getFrameworkComponentInstance(){return this.componentInstance}isStatelessComponent(){return this.statelessComponent}getReactComponentName(){return this.reactComponent.name}getMemoType(){return this.hasSymbol()?Symbol.for("react.memo"):60115}hasSymbol(){return typeof Symbol=="function"&&Symbol.for}isStateless(e){return typeof e=="function"&&!(e.prototype&&e.prototype.isReactComponent)||typeof e=="object"&&e.$$typeof===this.getMemoType()}hasMethod(e){const s=this.getFrameworkComponentInstance();return!!s&&s[e]!=null||this.fallbackMethodAvailable(e)}callMethod(e,s){const r=this.getFrameworkComponentInstance();if(this.isStatelessComponent())return this.fallbackMethod(e,s&&s[0]?s[0]:{});if(!r){setTimeout(()=>this.callMethod(e,s));return}const o=r[e];if(o)return o.apply(r,s);if(this.fallbackMethodAvailable(e))return this.fallbackMethod(e,s&&s[0]?s[0]:{})}addMethod(e,s){this[e]=s}init(e){return this.eParentElement=this.createParentElement(e),this.createOrUpdatePortal(e),new ie(s=>this.createReactComponent(s))}createOrUpdatePortal(e){this.isStatelessComponent()||(this.ref=s=>{var r;this.componentInstance=s,(r=this.resolveInstanceCreated)==null||r.call(this,!0),this.resolveInstanceCreated=void 0},e.ref=this.ref),this.reactElement=this.createElement(this.reactComponent,{...e,key:this.key}),this.portal=_e.createPortal(this.reactElement,this.eParentElement,this.portalKey)}createElement(e,s){return t.createElement(e,s)}createReactComponent(e){this.portalManager.mountReactPortal(this.portal,this,e)}rendered(){return this.isStatelessComponent()&&this.statelessComponentRendered()||!!(!this.isStatelessComponent()&&this.getFrameworkComponentInstance())}refreshComponent(e){this.oldPortal=this.portal,this.createOrUpdatePortal(e),this.portalManager.updateReactPortal(this.oldPortal,this.portal)}fallbackMethod(e,s){const r=this[`${e}Component`];if(!this.suppressFallbackMethods&&r)return r.bind(this)(s)}fallbackMethodAvailable(e){return this.suppressFallbackMethods?!1:!!this[`${e}Component`]}};function Ae(e,s,r){e.forEach(o=>{const n=s[o];n&&(r[o]=n)})}var ae=class extends $e{constructor(){super(...arguments),this.awaitUpdateCallback=new ie(e=>{this.resolveUpdateCallback=e}),this.wrapperComponent=Ot}init(e){return this.sourceParams=e,super.init(this.getProps())}addMethod(){}getInstance(){return this.instanceCreated.then(()=>this.componentInstance)}getFrameworkComponentInstance(){return this}createElement(e,s){return super.createElement(this.wrapperComponent,{initialProps:s,CustomComponentClass:e,setMethods:r=>this.setMethods(r),addUpdateCallback:r=>{this.updateCallback=()=>(r(this.getProps()),new ie(o=>{setTimeout(()=>{o()})})),this.resolveUpdateCallback()}})}setMethods(e){this.providedMethods=e,Ae(this.getOptionalMethods(),this.providedMethods,this)}getOptionalMethods(){return[]}getProps(){return{...this.sourceParams,key:this.key,ref:this.ref}}refreshProps(){return this.updateCallback?this.updateCallback():new ie(e=>this.awaitUpdateCallback.then(()=>{this.updateCallback().then(()=>e())}))}},Ut=class extends ae{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},Ht=class extends ae{constructor(){super(...arguments),this.date=null,this.onDateChange=e=>this.updateDate(e)}getDate(){return this.date}setDate(e){this.date=e,this.refreshProps()}refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached","setInputPlaceholder","setInputAriaLabel","setDisabled"]}updateDate(e){this.setDate(e),this.sourceParams.onDateChanged()}getProps(){const e=super.getProps();return e.date=this.date,e.onDateChange=this.onDateChange,delete e.onDateChanged,e}},jt=class extends ae{constructor(){super(...arguments),this.label="",this.icon=null,this.shake=!1}setIcon(e,s){this.icon=e,this.shake=s,this.refreshProps()}setLabel(e){this.label=e,this.refreshProps()}getProps(){const e=super.getProps(),{label:s,icon:r,shake:o}=this;return e.label=s,e.icon=r,e.shake=o,e}},_t=class extends ae{constructor(){super(...arguments),this.model=null,this.onModelChange=e=>this.updateModel(e),this.onUiChange=()=>this.sourceParams.filterModifiedCallback(),this.expectingNewMethods=!0,this.hasBeenActive=!1,this.awaitSetMethodsCallback=new ie(e=>{this.resolveSetMethodsCallback=e})}isFilterActive(){return this.model!=null}doesFilterPass(e){return this.providedMethods.doesFilterPass(e)}getModel(){return this.model}setModel(e){return this.expectingNewMethods=!0,this.model=e,this.hasBeenActive||(this.hasBeenActive=this.isFilterActive()),this.refreshProps()}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}afterGuiAttached(e){var r;const s=this.providedMethods;s?(r=s.afterGuiAttached)==null||r.call(s,e):this.awaitSetMethodsCallback.then(()=>{var o,n;return(n=(o=this.providedMethods)==null?void 0:o.afterGuiAttached)==null?void 0:n.call(o,e)})}getOptionalMethods(){return["afterGuiAttached","afterGuiDetached","onNewRowsLoaded","getModelAsString","onAnyFilterChanged"]}setMethods(e){var s;this.expectingNewMethods===!1&&this.hasBeenActive&&((s=this.providedMethods)==null?void 0:s.doesFilterPass)!==(e==null?void 0:e.doesFilterPass)&&setTimeout(()=>{this.sourceParams.filterChangedCallback()}),this.expectingNewMethods=!1,super.setMethods(e),this.resolveSetMethodsCallback()}updateModel(e){this.setModel(e).then(()=>this.sourceParams.filterChangedCallback())}getProps(){const e=super.getProps();return e.model=this.model,e.onModelChange=this.onModelChange,e.onUiChange=this.onUiChange,delete e.filterChangedCallback,delete e.filterModifiedCallback,e}};function ze(e,s){e.parentFilterInstance(r=>{(r.setModel(s)||ie.resolve()).then(()=>{e.filterParams.filterChangedCallback()})})}var Vt=class{constructor(e,s){this.floatingFilterParams=e,this.refreshProps=s,this.model=null,this.onModelChange=r=>this.updateModel(r)}getProps(){return{...this.floatingFilterParams,model:this.model,onModelChange:this.onModelChange}}onParentModelChanged(e){this.model=e,this.refreshProps()}refresh(e){this.floatingFilterParams=e,this.refreshProps()}setMethods(e){Ae(this.getOptionalMethods(),e,this)}getOptionalMethods(){return["afterGuiAttached"]}updateModel(e){this.model=e,this.refreshProps(),ze(this.floatingFilterParams,e)}},Lt=class extends ae{constructor(){super(...arguments),this.model=null,this.onModelChange=e=>this.updateModel(e)}onParentModelChanged(e){this.model=e,this.refreshProps()}refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached"]}updateModel(e){this.model=e,this.refreshProps(),ze(this.sourceParams,e)}getProps(){const e=super.getProps();return e.model=this.model,e.onModelChange=this.onModelChange,e}},$t=class extends ae{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},zt=class extends ae{refresh(e){this.sourceParams=e,this.refreshProps()}},Jt=class extends ae{constructor(){super(...arguments),this.active=!1,this.expanded=!1,this.onActiveChange=e=>this.updateActive(e)}setActive(e){this.awaitSetActive(e)}setExpanded(e){this.expanded=e,this.refreshProps()}getOptionalMethods(){return["select","configureDefaults"]}awaitSetActive(e){return this.active=e,this.refreshProps()}updateActive(e){const s=this.awaitSetActive(e);e&&s.then(()=>this.sourceParams.onItemActivated())}getProps(){const e=super.getProps();return e.active=this.active,e.expanded=this.expanded,e.onActiveChange=this.onActiveChange,delete e.onItemActivated,e}},qt=class extends ae{refresh(e){this.sourceParams=e,this.refreshProps()}},Kt=class extends ae{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},Qt=class extends ae{constructor(){super(...arguments),this.onStateChange=e=>this.updateState(e)}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}getState(){return this.state}updateState(e){this.state=e,this.refreshProps(),this.sourceParams.onStateUpdated()}getProps(){const e=super.getProps();return e.state=this.state,e.onStateChange=this.onStateChange,e}};function Ge(){Me(231)}var Yt=1e3,Xt=class{constructor(e,s,r){this.destroyed=!1,this.portals=[],this.hasPendingPortalUpdate=!1,this.wrappingElement=s||"div",this.refresher=e,this.maxComponentCreationTimeMs=r||Yt}getPortals(){return this.portals}destroy(){this.destroyed=!0}destroyPortal(e){this.portals=this.portals.filter(s=>s!==e),this.batchUpdate()}getComponentWrappingElement(){return this.wrappingElement}mountReactPortal(e,s,r){this.portals=[...this.portals,e],this.waitForInstance(s,r),this.batchUpdate()}updateReactPortal(e,s){this.portals[this.portals.indexOf(e)]=s,this.batchUpdate()}batchUpdate(){this.hasPendingPortalUpdate||(setTimeout(()=>{this.destroyed||(this.refresher(),this.hasPendingPortalUpdate=!1)}),this.hasPendingPortalUpdate=!0)}waitForInstance(e,s,r=Date.now()){if(this.destroyed){s(null);return}if(e.rendered())s(e);else{if(Date.now()-r>=this.maxComponentCreationTimeMs&&!this.hasPendingPortalUpdate){fe(!0,()=>this.refresher()),e.rendered()&&s(e);return}window.setTimeout(()=>{this.waitForInstance(e,s,r)})}}},Zt=({ctrl:e})=>{const s=e.isAlive(),{context:r}=t.useContext(Z),o=s?e.column.getColId():void 0,[n,u]=t.useState(),[p,l]=t.useState(),i=t.useRef(),h=t.useRef(null),C=t.useRef(null),k=t.useRef(null),R=t.useRef(),g=t.useRef();s&&!g.current&&(g.current=new we(()=>h.current));const a=t.useCallback(v=>{var P;if(h.current=v,i.current=v?r.createBean(new pe):r.destroyBean(i.current),!v||!e.isAlive())return;const E={setWidth:M=>{h.current&&(h.current.style.width=M)},toggleCss:(M,G)=>g.current.toggleCss(M,G),setUserStyles:M=>l(M),setAriaSort:M=>{h.current&&(M?Rt(h.current,M):vt(h.current))},setUserCompDetails:M=>u(M),getUserCompInstance:()=>R.current||void 0};e.setComp(E,v,C.current,k.current,i.current);const x=e.getSelectAllGui();x&&((P=C.current)==null||P.insertAdjacentElement("afterend",x),i.current.addDestroyFunc(()=>x.remove()))},[]);t.useLayoutEffect(()=>Ce(n,r,k.current,R),[n]),t.useEffect(()=>{e.setDragSource(h.current)},[n]);const f=t.useMemo(()=>!!((n==null?void 0:n.componentFromFramework)&&me(n.componentClass)),[n]),m=n&&n.componentFromFramework,d=n&&n.componentClass;return c.createElement("div",{ref:a,style:p,className:"ag-header-cell","col-id":o,role:"columnheader"},c.createElement("div",{ref:C,className:"ag-header-cell-resize",role:"presentation"}),c.createElement("div",{ref:k,className:"ag-header-cell-comp-wrapper",role:"presentation"},m&&f&&c.createElement(d,{...n.params}),m&&!f&&c.createElement(d,{...n.params,ref:R})))},es=t.memo(Zt),ts=({ctrl:e})=>{const{context:s,gos:r}=t.useContext(Z),[o,n]=t.useState(),[u,p]=t.useState(()=>new oe("ag-header-cell","ag-floating-filter")),[l,i]=t.useState(()=>new oe),[h,C]=t.useState(()=>new oe("ag-floating-filter-button","ag-hidden")),[k,R]=t.useState("false"),[g,a]=t.useState(),[,f]=t.useState(1),m=t.useRef(),d=t.useRef(null),v=t.useRef(null),E=t.useRef(null),x=t.useRef(null),P=t.useRef(),M=t.useRef(),G=w=>{w!=null&&P.current&&P.current(w)},W=t.useCallback(w=>{if(d.current=w,m.current=w?s.createBean(new pe):s.destroyBean(m.current),!w)return;M.current=new ie(B=>{P.current=B});const T={toggleCss:(B,I)=>p(U=>U.setClass(B,I)),setUserStyles:B=>n(B),addOrRemoveBodyCssClass:(B,I)=>i(U=>U.setClass(B,I)),setButtonWrapperDisplayed:B=>{C(I=>I.setClass("ag-hidden",!B)),R(B?"false":"true")},setWidth:B=>{d.current&&(d.current.style.width=B)},setCompDetails:B=>a(B),getFloatingFilterComp:()=>M.current?M.current:null,setMenuIcon:B=>{var I;return(I=x.current)==null?void 0:I.appendChild(B)}};e.setComp(T,w,x.current,v.current,m.current)},[]);t.useLayoutEffect(()=>Ce(g,s,v.current,G),[g]);const O=t.useMemo(()=>u.toString(),[u]),N=t.useMemo(()=>l.toString(),[l]),b=t.useMemo(()=>h.toString(),[h]),S=t.useMemo(()=>!!(g&&g.componentFromFramework&&me(g.componentClass)),[g]),y=t.useMemo(()=>r.get("reactiveCustomComponents"),[]),L=t.useMemo(()=>{if(g)if(y){const w=new Vt(g.params,()=>f(T=>T+1));return G(w),w}else g.componentFromFramework&&Ge()},[g]),F=L==null?void 0:L.getProps(),V=g&&g.componentFromFramework,_=g&&g.componentClass;return c.createElement("div",{ref:W,style:o,className:O,role:"gridcell"},c.createElement("div",{ref:v,className:N,role:"presentation"},V&&!y&&c.createElement(_,{...g.params,ref:S?()=>{}:G}),V&&y&&c.createElement(Fe.Provider,{value:{setMethods:w=>L.setMethods(w)}},c.createElement(_,{...F}))),c.createElement("div",{ref:E,"aria-hidden":k,className:b,role:"presentation"},c.createElement("button",{ref:x,type:"button",className:"ag-button ag-floating-filter-button-button",tabIndex:-1})))},ss=t.memo(ts),rs=({ctrl:e})=>{const{context:s}=t.useContext(Z),[r,o]=t.useState(),[n,u]=t.useState(()=>new oe),[p,l]=t.useState(()=>new oe),[i,h]=t.useState("false"),[C,k]=t.useState(),[R,g]=t.useState(),a=t.useMemo(()=>e.column.getUniqueId(),[]),f=t.useRef(),m=t.useRef(null),d=t.useRef(null),v=t.useRef(null),E=t.useRef(),x=t.useCallback(N=>{if(m.current=N,f.current=N?s.createBean(new pe):s.destroyBean(f.current),!N)return;const b={setWidth:S=>{m.current&&(m.current.style.width=S)},toggleCss:(S,y)=>u(L=>L.setClass(S,y)),setUserStyles:S=>o(S),setHeaderWrapperHidden:S=>{const y=v.current;y&&(S?y.style.setProperty("display","none"):y.style.removeProperty("display"))},setHeaderWrapperMaxHeight:S=>{const y=v.current;y&&(S!=null?y.style.setProperty("max-height",`${S}px`):y.style.removeProperty("max-height"),y.classList.toggle("ag-header-cell-comp-wrapper-limited-height",S!=null))},setUserCompDetails:S=>g(S),setResizableDisplayed:S=>{l(y=>y.setClass("ag-hidden",!S)),h(S?"false":"true")},setAriaExpanded:S=>k(S),getUserCompInstance:()=>E.current||void 0};e.setComp(b,N,d.current,v.current,f.current)},[]);t.useLayoutEffect(()=>Ce(R,s,v.current),[R]),t.useEffect(()=>{m.current&&e.setDragSource(m.current)},[R]);const P=t.useMemo(()=>!!((R==null?void 0:R.componentFromFramework)&&me(R.componentClass)),[R]),M=t.useMemo(()=>"ag-header-group-cell "+n.toString(),[n]),G=t.useMemo(()=>"ag-header-cell-resize "+p.toString(),[p]),W=R&&R.componentFromFramework,O=R&&R.componentClass;return c.createElement("div",{ref:x,style:r,className:M,"col-id":a,role:"columnheader","aria-expanded":C},c.createElement("div",{ref:v,className:"ag-header-cell-comp-wrapper",role:"presentation"},W&&P&&c.createElement(O,{...R.params}),W&&!P&&c.createElement(O,{...R.params,ref:E})),c.createElement("div",{ref:d,"aria-hidden":i,className:G}))},ns=t.memo(rs),os=({ctrl:e})=>{const{context:s}=t.useContext(Z),{topOffset:r,rowHeight:o}=t.useMemo(()=>e.getTopAndHeight(),[]),n=e.getAriaRowIndex(),u=e.headerRowClass,[p,l]=t.useState(()=>o+"px"),[i,h]=t.useState(()=>r+"px"),C=t.useRef(null),k=t.useRef(null),[R,g]=t.useState(()=>e.getUpdatedHeaderCtrls()),a=t.useRef(),f=t.useRef(null),m=t.useCallback(E=>{if(f.current=E,a.current=E?s.createBean(new pe):s.destroyBean(a.current),!E)return;const x={setHeight:P=>l(P),setTop:P=>h(P),setHeaderCtrls:(P,M,G)=>{k.current=C.current,C.current=P;const W=ve(k.current,P,M);W!==k.current&&fe(G,()=>g(W))},setWidth:P=>{f.current&&(f.current.style.width=P)}};e.setComp(x,a.current,!1)},[]),d=t.useMemo(()=>({height:p,top:i}),[p,i]),v=t.useCallback(E=>{switch(e.type){case"group":return c.createElement(ns,{ctrl:E,key:E.instanceId});case"filter":return c.createElement(ss,{ctrl:E,key:E.instanceId});default:return c.createElement(es,{ctrl:E,key:E.instanceId})}},[]);return c.createElement("div",{ref:m,className:u,role:"row",style:d,"aria-rowindex":n},R.map(v))},as=t.memo(os),cs=({pinned:e})=>{const[s,r]=t.useState(!0),[o,n]=t.useState([]),{context:u}=t.useContext(Z),p=t.useRef(null),l=t.useRef(null),i=t.useRef(),h=e==="left",C=e==="right",k=!h&&!C,R=t.useCallback(f=>{if(p.current=f,i.current=f?u.createBean(new yt(e)):u.destroyBean(i.current),!f)return;const m={setDisplayed:r,setCtrls:d=>n(d),setCenterWidth:d=>{l.current&&(l.current.style.width=d)},setViewportScrollLeft:d=>{p.current&&(p.current.scrollLeft=d)},setPinnedContainerWidth:d=>{p.current&&(p.current.style.width=d,p.current.style.minWidth=d,p.current.style.maxWidth=d)}};i.current.setComp(m,p.current)},[]),g=s?"":"ag-hidden",a=()=>o.map(f=>c.createElement(as,{ctrl:f,key:f.instanceId}));return c.createElement(c.Fragment,null,h&&c.createElement("div",{ref:R,className:"ag-pinned-left-header "+g,"aria-hidden":!s,role:"rowgroup"},a()),C&&c.createElement("div",{ref:R,className:"ag-pinned-right-header "+g,"aria-hidden":!s,role:"rowgroup"},a()),k&&c.createElement("div",{ref:R,className:"ag-header-viewport "+g,role:"presentation",tabIndex:-1},c.createElement("div",{ref:l,className:"ag-header-container",role:"rowgroup"},a())))},Ee=t.memo(cs),ls=()=>{const[e,s]=t.useState(()=>new oe),[r,o]=t.useState(),{context:n}=t.useContext(Z),u=t.useRef(null),p=t.useRef(),l=t.useCallback(C=>{if(u.current=C,p.current=C?n.createBean(new gt):n.destroyBean(p.current),!C)return;const k={toggleCss:(R,g)=>s(a=>a.setClass(R,g)),setHeightAndMinHeight:R=>o(R)};p.current.setComp(k,C,C)},[]),i=t.useMemo(()=>"ag-header "+e.toString(),[e]),h=t.useMemo(()=>({height:r,minHeight:r}),[r]);return c.createElement("div",{ref:l,className:i,style:h,role:"presentation"},c.createElement(Ee,{pinned:"left"}),c.createElement(Ee,{pinned:null}),c.createElement(Ee,{pinned:"right"}))},is=t.memo(ls),us=(e,s)=>{t.useEffect(()=>{const r=s.current;if(r){const o=r.parentElement;if(o){const n=document.createComment(e);return o.insertBefore(n,r),()=>{o.removeChild(n)}}}},[e])},ue=us,ds=class{constructor(e,s){this.cellEditorParams=e,this.refreshProps=s,this.instanceCreated=new ie(r=>{this.resolveInstanceCreated=r}),this.onValueChange=r=>this.updateValue(r),this.value=e.value}getProps(){return{...this.cellEditorParams,initialValue:this.cellEditorParams.value,value:this.value,onValueChange:this.onValueChange}}getValue(){return this.value}refresh(e){this.cellEditorParams=e,this.refreshProps()}setMethods(e){Ae(this.getOptionalMethods(),e,this)}getInstance(){return this.instanceCreated.then(()=>this.componentInstance)}setRef(e){var s;this.componentInstance=e,(s=this.resolveInstanceCreated)==null||s.call(this),this.resolveInstanceCreated=void 0}getOptionalMethods(){return["isCancelBeforeStart","isCancelAfterEnd","focusIn","focusOut","afterGuiAttached"]}updateValue(e){this.value=e,this.refreshProps()}},ps=e=>{const s=t.useRef(e),r=t.useRef(),o=t.useRef(!1),n=t.useRef(!1),[,u]=t.useState(0);o.current&&(n.current=!0),t.useEffect(()=>(o.current||(r.current=s.current(),o.current=!0),u(p=>p+1),()=>{var p;n.current&&((p=r.current)==null||p.call(r))}),[])},ms=e=>{const[s,r]=t.useState(),o=t.useContext(Z),{context:n,popupSvc:u,localeSvc:p,gos:l,editSvc:i}=o,{editDetails:h,cellCtrl:C,eParentCell:k}=e;return ps(()=>{var G,W;const{compDetails:R}=h,g=l.get("stopEditingWhenCellsLoseFocus"),a=n.createBean(i.createPopupEditorWrapper(R.params)),f=a.getGui();if(e.jsChildComp){const O=e.jsChildComp.getGui();O&&f.appendChild(O)}const{column:m,rowNode:d}=C,v={column:m,rowNode:d,type:"popupCellEditor",eventSource:k,ePopup:f,position:h.popupPosition,keepWithinBounds:!0},E=u==null?void 0:u.positionPopupByComponent.bind(u,v),x=Pt(p),P=u==null?void 0:u.addPopup({modal:g,eChild:f,closeOnEsc:!0,closedCallback:()=>{C.onPopupEditorClosed()},anchorToElement:k,positionCallback:E,ariaLabel:x("ariaLabelCellEditor","Cell Editor")}),M=P?P.hideFunc:void 0;return r(a),(W=(G=e.jsChildComp)==null?void 0:G.afterGuiAttached)==null||W.call(G),()=>{M==null||M(),n.destroyBean(a)}}),t.useLayoutEffect(()=>()=>{C.isCellFocused()&&(s!=null&&s.getGui().contains(Mt(o)))&&k.focus({preventScroll:!0})},[s]),c.createElement(c.Fragment,null,s&&e.wrappedContent&&_e.createPortal(e.wrappedContent,s.getGui()))},Oe=t.memo(ms),hs=(e,s,r,o,n,u)=>{const{context:p}=t.useContext(Z),l=t.useCallback(()=>{const i=n.current;if(!i)return;const h=i.getGui();h&&h.parentElement&&h.parentElement.removeChild(h),p.destroyBean(i),n.current=void 0},[]);t.useEffect(()=>{const i=e!=null,h=(e==null?void 0:e.compDetails)&&!e.compDetails.componentFromFramework,C=s&&r==null;if(!(i&&h&&!C)){l();return}const R=e.compDetails;if(n.current){const a=n.current,m=a.refresh!=null&&e.force==!1?a.refresh(R.params):!1;if(m===!0||m===void 0)return;l()}R.newAgStackInstance().then(a=>{if(!a)return;const f=a.getGui();if(!f)return;(s?r:u.current).appendChild(f),n.current=a})},[e,s,o]),t.useEffect(()=>l,[])},fs=hs,Cs=(e,s,r)=>{const{compProxy:o}=e;r(o);const n=o.getProps(),u=me(s);return c.createElement(Fe.Provider,{value:{setMethods:p=>o.setMethods(p)}},u?c.createElement(s,{...n}):c.createElement(s,{...n,ref:p=>o.setRef(p)}))},Te=(e,s,r)=>{const o=e.compProxy;return c.createElement(c.Fragment,null,o?Cs(e,s,r):c.createElement(s,{...e.compDetails.params,ref:r}))},gs=(e,s,r,o,n)=>{const u=e.compDetails,p=u.componentClass,l=u.componentFromFramework&&!e.popup,i=u.componentFromFramework&&e.popup,h=!u.componentFromFramework&&e.popup;return c.createElement(c.Fragment,null,l&&Te(e,p,s),i&&c.createElement(Oe,{editDetails:e,cellCtrl:o,eParentCell:r,wrappedContent:Te(e,p,s)}),h&&n&&c.createElement(Oe,{editDetails:e,cellCtrl:o,eParentCell:r,jsChildComp:n}))},ys=(e,s,r,o,n,u,p)=>{const{compDetails:l,value:i}=e,h=!l,C=l&&l.componentFromFramework,k=l&&l.componentClass,R=i!=null&&i.toString?i.toString():i,g=()=>c.createElement(c.Fragment,null,h&&c.createElement(c.Fragment,null,R),C&&!u&&c.createElement(k,{...l.params,key:s,ref:o}),C&&u&&c.createElement(k,{...l.params,key:s}));return c.createElement(c.Fragment,null,n?c.createElement("span",{role:"presentation",id:`cell-${r}`,className:"ag-cell-value",ref:p},g()):g())},Rs=({cellCtrl:e,printLayout:s,editingRow:r})=>{const o=t.useContext(Z),{context:n}=o,{column:{colIdSanitised:u},instanceId:p}=e,l=t.useRef(),[i,h]=t.useState(()=>e.isCellRenderer()?void 0:{compDetails:void 0,value:e.getValueToDisplay(),force:!1}),[C,k]=t.useState(),[R,g]=t.useState(1),[a,f]=t.useState(),[m,d]=t.useState(!1),[v,E]=t.useState(!1),[x,P]=t.useState(!1),[M,G]=t.useState(),W=t.useMemo(()=>e.isForceWrapper(),[e]),O=t.useMemo(()=>e.getCellAriaRole(),[e]),N=t.useRef(null),b=t.useRef(null),S=t.useRef(null),y=t.useRef(),L=t.useRef(),F=t.useRef(),V=t.useRef([]),_=t.useRef(),[w,T]=t.useState(0),B=t.useCallback($=>{_.current=$,T(J=>J+1)},[]),I=i!=null&&(m||x||v),U=W||I,H=t.useCallback($=>{if(L.current=$,$){const J=$.isCancelBeforeStart&&$.isCancelBeforeStart();setTimeout(()=>{J?(e.stopEditing(!0),e.focusCell(!0)):e.cellEditorAttached()})}},[e]),A=t.useRef();A.current||(A.current=new we(()=>N.current)),fs(i,U,_.current,w,y,N);const Q=t.useRef();t.useLayoutEffect(()=>{var K;const $=Q.current,J=i;if(Q.current=i,$==null||$.compDetails==null||J==null||J.compDetails==null)return;const X=$.compDetails,re=J.compDetails;if(X.componentClass!=re.componentClass||((K=S.current)==null?void 0:K.refresh)==null)return;S.current.refresh(re.params)!=!0&&g(ee=>ee+1)},[i]),t.useLayoutEffect(()=>{if(!(C&&!C.compDetails.componentFromFramework))return;const J=C.compDetails,X=C.popup===!0,re=J.newAgStackInstance();return re.then(j=>{if(!j)return;const K=j.getGui();if(H(j),!X){const ee=(W?F:N).current;ee==null||ee.appendChild(K),j.afterGuiAttached&&j.afterGuiAttached()}G(j)}),()=>{re.then(j=>{var ee;const K=j.getGui();n.destroyBean(j),H(void 0),G(void 0),(ee=K==null?void 0:K.parentElement)==null||ee.removeChild(K)})}},[C]);const q=t.useCallback($=>{if(F.current=$,!$){V.current.forEach(X=>X()),V.current=[];return}const J=X=>{if(X){const re=X.getGui();$.insertAdjacentElement("afterbegin",re),V.current.push(()=>{n.destroyBean(X),Et(re)})}return X};if(m){const X=e.createSelectionCheckbox();J(X)}x&&J(e.createDndSource()),v&&J(e.createRowDragComp())},[e,n,x,v,m]),ce=t.useCallback(()=>{const $=!e.isCellSpanning()||b.current,J=N.current;if(l.current=J?n.createBean(new pe):n.destroyBean(l.current),!J||!$||!e)return;const X={toggleCss:(j,K)=>A.current.toggleCss(j,K),setUserStyles:j=>f(j),getFocusableElement:()=>N.current,setIncludeSelection:j=>d(j),setIncludeRowDrag:j=>E(j),setIncludeDndSource:j=>P(j),getCellEditor:()=>L.current||null,getCellRenderer:()=>S.current??y.current,getParentOfValue:()=>_.current??F.current??N.current,setRenderDetails:(j,K,ee)=>{h(Y=>(Y==null?void 0:Y.compDetails)!==j||(Y==null?void 0:Y.value)!==K||(Y==null?void 0:Y.force)!==ee?{value:K,compDetails:j,force:ee}:Y)},setEditDetails:(j,K,ee,Y)=>{if(j){let te;Y?te=new ds(j.params,()=>g(le=>le+1)):j.componentFromFramework&&Ge(),k({compDetails:j,popup:K,popupPosition:ee,compProxy:te}),K||h(void 0)}else e.hasBrowserFocus()&&X.getFocusableElement().focus({preventScroll:!0}),k(le=>{le!=null&&le.compProxy&&(L.current=void 0)})}},re=F.current||void 0;e.setComp(X,J,b.current??void 0,re,s,r,l.current)},[]),de=t.useCallback($=>{N.current=$,ce()},[]),Se=t.useCallback($=>{b.current=$,ce()},[]),be=t.useMemo(()=>{var J;return!!(((J=i==null?void 0:i.compDetails)==null?void 0:J.componentFromFramework)&&me(i.compDetails.componentClass))},[i]);t.useLayoutEffect(()=>{N.current&&(A.current.toggleCss("ag-cell-value",!U),A.current.toggleCss("ag-cell-inline-editing",!!C&&!C.popup),A.current.toggleCss("ag-cell-popup-editing",!!C&&!!C.popup),A.current.toggleCss("ag-cell-not-inline-editing",!C||!!C.popup),e.setInlineEditingCss())});const ge=()=>c.createElement(c.Fragment,null,i!=null&&ys(i,R,p,S,U,be,B),C!=null&&gs(C,H,N.current,e,M)),ye=()=>c.createElement("div",{ref:de,style:a,role:O,"col-id":u},U?c.createElement("div",{className:"ag-cell-wrapper",role:"presentation",ref:q},ge()):ge());return e.isCellSpanning()?c.createElement("div",{ref:Se,className:"ag-spanned-cell-wrapper",role:"presentation"},ye()):ye()},vs=t.memo(Rs),ws=({rowCtrl:e,containerType:s})=>{const{context:r,gos:o}=t.useContext(Z),n=t.useRef(),u=t.useRef(e.getDomOrder()),p=e.isFullWidth(),l=e.rowNode.displayed,[i,h]=t.useState(()=>l?e.rowNode.getRowIndexString():null),[C,k]=t.useState(()=>e.rowId),[R,g]=t.useState(()=>e.businessKey),[a,f]=t.useState(()=>e.rowStyles),m=t.useRef(null),d=t.useRef(null),[v,E]=t.useState(()=>null),[x,P]=t.useState(),[M,G]=t.useState(()=>l?e.getInitialRowTop(s):void 0),[W,O]=t.useState(()=>l?e.getInitialTransform(s):void 0),N=t.useRef(null),b=t.useRef(),S=t.useRef(!1),[y,L]=t.useState(0);t.useEffect(()=>{var Q;if(S.current||!x||y>10)return;const A=(Q=N.current)==null?void 0:Q.firstChild;A?(e.setupDetailRowAutoHeight(A),S.current=!0):L(q=>q+1)},[x,y]);const F=t.useRef();F.current||(F.current=new we(()=>N.current));const V=t.useCallback(A=>{if(N.current=A,n.current=A?r.createBean(new pe):r.destroyBean(n.current),!A){e.unsetComp(s);return}if(!e.isAlive())return;const Q={setTop:G,setTransform:O,toggleCss:(q,ce)=>F.current.toggleCss(q,ce),setDomOrder:q=>u.current=q,setRowIndex:h,setRowId:k,setRowBusinessKey:g,setUserStyles:f,setCellCtrls:(q,ce)=>{d.current=m.current,m.current=q;const de=ve(d.current,q,u.current);de!==d.current&&fe(ce,()=>E(de))},showFullWidth:q=>P(q),getFullWidthCellRenderer:()=>b.current,refreshFullWidth:q=>I.current?(P(ce=>({...ce,params:q()})),!0):!b.current||!b.current.refresh?!1:b.current.refresh(q())};e.setComp(Q,A,s,n.current)},[]);t.useLayoutEffect(()=>Ce(x,r,N.current,b),[x]);const _=t.useMemo(()=>{const A={top:M,transform:W};return Object.assign(A,a),A},[M,W,a]),w=p&&(x==null?void 0:x.componentFromFramework),T=!p&&v!=null,B=t.useMemo(()=>!!((x==null?void 0:x.componentFromFramework)&&me(x.componentClass)),[x]),I=t.useRef(!1);t.useEffect(()=>{I.current=B&&!!x&&!!o.get("reactiveCustomComponents")},[B,x]);const U=()=>v==null?void 0:v.map(A=>c.createElement(vs,{cellCtrl:A,editingRow:e.editing,printLayout:e.printLayout,key:A.instanceId})),H=()=>{const A=x.componentClass;return c.createElement(c.Fragment,null,B?c.createElement(A,{...x.params}):c.createElement(A,{...x.params,ref:b}))};return c.createElement("div",{ref:V,role:"row",style:_,"row-index":i,"row-id":C,"row-business-key":R},T&&U(),w&&H())},Ue=t.memo(ws),Ss=({name:e})=>{const{context:s,gos:r}=t.useContext(Z),o=t.useMemo(()=>wt(e),[e]),n=t.useRef(null),u=t.useRef(null),p=t.useRef(null),l=t.useRef([]),i=t.useRef([]),[h,C]=t.useState(()=>[]),k=!!r.get("enableCellSpan")&&!!o.getSpannedRowCtrls,R=t.useRef([]),g=t.useRef([]),[a,f]=t.useState(()=>[]),m=t.useRef(!1),d=t.useRef(),v=t.useMemo(()=>ne("ag-viewport",St(e)),[e]),E=t.useMemo(()=>ne(bt(e)),[e]),x=t.useMemo(()=>ne("ag-spanning-container",kt(e)),[e]),P=o.type==="center"||k,M=P?n:u;ue(" AG Row Container "+e+" ",M);const G=t.useCallback(()=>{const F=!P||n.current!=null,V=u.current!=null,_=!k||p.current!=null;return F&&V&&_},[]),W=t.useCallback(()=>n.current==null&&u.current==null&&p.current==null,[]),O=t.useCallback(()=>{if(W()&&(d.current=s.destroyBean(d.current)),G()){const F=w=>{const T=ve(i.current,l.current,m.current);T!==i.current&&(i.current=T,fe(w,()=>C(T)))},V=w=>{const T=ve(g.current,R.current,m.current);T!==g.current&&(g.current=T,fe(w,()=>f(T)))},_={setHorizontalScroll:w=>{n.current&&(n.current.scrollLeft=w)},setViewportHeight:w=>{n.current&&(n.current.style.height=w)},setRowCtrls:({rowCtrls:w,useFlushSync:T})=>{const B=!!T&&l.current.length>0&&w.length>0;l.current=w,F(B)},setSpannedRowCtrls:(w,T)=>{const B=!!T&&R.current.length>0&&w.length>0;R.current=w,V(B)},setDomOrder:w=>{m.current!=w&&(m.current=w,F(!1))},setContainerWidth:w=>{u.current&&(u.current.style.width=w)},setOffsetTop:w=>{u.current&&(u.current.style.transform=`translateY(${w})`)}};d.current=s.createBean(new xt(e)),d.current.setComp(_,u.current,p.current??void 0,n.current)}},[G,W]),N=t.useCallback(F=>{u.current=F,O()},[O]),b=t.useCallback(F=>{p.current=F,O()},[O]),S=t.useCallback(F=>{n.current=F,O()},[O]),y=()=>c.createElement("div",{className:E,ref:N,role:"rowgroup"},h.map(F=>c.createElement(Ue,{rowCtrl:F,containerType:o.type,key:F.instanceId})));if(!P)return y();const L=()=>k&&c.createElement("div",{className:x,ref:b,role:"rowgroup"},a.map(F=>c.createElement(Ue,{rowCtrl:F,containerType:o.type,key:F.instanceId})));return c.createElement("div",{className:v,ref:S,role:"presentation"},y(),L())},bs=t.memo(Ss),ks=()=>{const e=t.useContext(Z),{context:s,overlays:r}=e,[o,n]=t.useState(""),[u,p]=t.useState(0),[l,i]=t.useState(0),[h,C]=t.useState("0px"),[k,R]=t.useState("0px"),[g,a]=t.useState("100%"),[f,m]=t.useState("0px"),[d,v]=t.useState("0px"),[E,x]=t.useState("100%"),[P,M]=t.useState(!0),[G,W]=t.useState(!0),[O,N]=t.useState(null),[b,S]=t.useState(""),[y,L]=t.useState(null),[F,V]=t.useState("ag-layout-normal"),_=t.useRef();_.current||(_.current=new we(()=>w.current));const w=t.useRef(null),T=t.useRef(null),B=t.useRef(null),I=t.useRef(null),U=t.useRef(null),H=t.useRef(null),A=t.useRef(null),Q=t.useRef([]),q=t.useRef([]);ue(" AG Grid Body ",w),ue(" AG Pinned Top ",T),ue(" AG Sticky Top ",B),ue(" AG Middle ",H),ue(" AG Pinned Bottom ",A);const ce=t.useCallback(te=>{if(w.current=te,!te){Q.current=s.destroyBeans(Q.current),q.current.forEach(z=>z()),q.current=[];return}if(!s)return;const le=(z,se)=>{z.appendChild(se),q.current.push(()=>z.removeChild(se))},ke=z=>{const se=s.createBean(new z);return Q.current.push(se),se},he=(z,se,Ye)=>{le(z,document.createComment(Ye)),le(z,ke(se).getGui())};he(te,pt," AG Fake Horizontal Scroll ");const Be=r==null?void 0:r.getOverlayWrapperCompClass();Be&&he(te,Be," AG Overlay Wrapper "),U.current&&he(U.current,mt," AG Fake Vertical Scroll ");const Qe={setRowAnimationCssOnBodyViewport:n,setColumnCount:z=>{w.current&&Ct(w.current,z)},setRowCount:z=>{w.current&&ft(w.current,z)},setTopHeight:p,setBottomHeight:i,setStickyTopHeight:C,setStickyTopTop:R,setStickyTopWidth:a,setTopInvisible:M,setBottomInvisible:W,setColumnMovingCss:(z,se)=>_.current.toggleCss(z,se),updateLayoutClasses:V,setAlwaysVerticalScrollClass:N,setPinnedTopBottomOverflowY:S,setCellSelectableCss:(z,se)=>L(se?z:null),setBodyViewportWidth:z=>{H.current&&(H.current.style.width=z)},registerBodyViewportResizeListener:z=>{if(H.current){const se=je(e,H.current,z);q.current.push(()=>se())}},setStickyBottomHeight:m,setStickyBottomBottom:v,setStickyBottomWidth:x,setGridRootRole:z=>te.setAttribute("role",z)},Ne=s.createBean(new ht);Q.current.push(Ne),Ne.setComp(Qe,te,H.current,T.current,A.current,B.current,I.current)},[]),de=t.useMemo(()=>ne("ag-root","ag-unselectable",F),[F]),Se=t.useMemo(()=>ne("ag-body-viewport",o,F,O,y),[o,F,O,y]),be=t.useMemo(()=>ne("ag-body",F),[F]),ge=t.useMemo(()=>ne("ag-floating-top",P?"ag-invisible":null,y),[y,P]),ye=t.useMemo(()=>ne("ag-sticky-top",y),[y]),$=t.useMemo(()=>ne("ag-sticky-bottom",f==="0px"?"ag-invisible":null,y),[y,f]),J=t.useMemo(()=>ne("ag-floating-bottom",G?"ag-invisible":null,y),[y,G]),X=t.useMemo(()=>({height:u,minHeight:u,overflowY:b}),[u,b]),re=t.useMemo(()=>({height:h,top:k,width:g}),[h,k,g]),j=t.useMemo(()=>({height:f,bottom:d,width:E}),[f,d,E]),K=t.useMemo(()=>({height:l,minHeight:l,overflowY:b}),[l,b]),ee=te=>c.createElement(bs,{name:te,key:`${te}-container`}),Y=({section:te,children:le,className:ke,style:he})=>c.createElement("div",{ref:te,className:ke,role:"presentation",style:he},le.map(ee));return c.createElement("div",{ref:ce,className:de},c.createElement(is,null),Y({section:T,className:ge,style:X,children:["topLeft","topCenter","topRight","topFullWidth"]}),c.createElement("div",{className:be,ref:U,role:"presentation"},Y({section:H,className:Se,children:["left","center","right","fullWidth"]})),Y({section:B,className:ye,style:re,children:["stickyTopLeft","stickyTopCenter","stickyTopRight","stickyTopFullWidth"]}),Y({section:I,className:$,style:j,children:["stickyBottomLeft","stickyBottomCenter","stickyBottomRight","stickyBottomFullWidth"]}),Y({section:A,className:J,style:K,children:["bottomLeft","bottomCenter","bottomRight","bottomFullWidth"]}))},xs=t.memo(ks),Es=(e,s)=>{const{children:r,eFocusableElement:o,onTabKeyDown:n,gridCtrl:u,forceFocusOutWhenTabGuardsAreEmpty:p,isEmpty:l}=e,{context:i}=t.useContext(Z),h=t.useRef(null),C=t.useRef(null),k=t.useRef(),R=d=>{const v=d==null?void 0:parseInt(d,10).toString();[h,C].forEach(E=>{var x,P;v===void 0?(x=E.current)==null||x.removeAttribute("tabindex"):(P=E.current)==null||P.setAttribute("tabindex",v)})};t.useImperativeHandle(s,()=>({forceFocusOutOfContainer(d){var v;(v=k.current)==null||v.forceFocusOutOfContainer(d)}}));const g=t.useCallback(()=>{const d=h.current,v=C.current;if(!d&&!v){k.current=i.destroyBean(k.current);return}if(d&&v){const E={setTabIndex:R};k.current=i.createBean(new dt({comp:E,eTopGuard:d,eBottomGuard:v,eFocusableElement:o,onTabKeyDown:n,forceFocusOutWhenTabGuardsAreEmpty:p,focusInnerElement:x=>u.focusInnerElement(x),isEmpty:l}))}},[]),a=t.useCallback(d=>{h.current=d,g()},[g]),f=t.useCallback(d=>{C.current=d,g()},[g]),m=d=>{const v=d==="top"?xe.TAB_GUARD_TOP:xe.TAB_GUARD_BOTTOM;return c.createElement("div",{className:`${xe.TAB_GUARD} ${v}`,role:"presentation",ref:d==="top"?a:f})};return c.createElement(c.Fragment,null,m("top"),r,m("bottom"))},Ps=t.forwardRef(Es),Ms=t.memo(Ps),Fs=({context:e})=>{const[s,r]=t.useState(""),[o,n]=t.useState(""),[u,p]=t.useState(null),[l,i]=t.useState(null),[h,C]=t.useState(!1),[k,R]=t.useState(),g=t.useRef(),a=t.useRef(null),f=t.useRef(),[m,d]=t.useState(null),v=t.useRef(()=>{}),E=t.useRef(),x=t.useRef([]),P=t.useCallback(()=>{},[]),M=t.useMemo(()=>e.isDestroyed()?null:e.getBeans(),[e]);ue(" AG Grid ",a);const G=t.useCallback(y=>{if(a.current=y,g.current=y?e.createBean(new ut):e.destroyBean(g.current),!y||e.isDestroyed())return;const L=g.current;v.current=L.focusInnerElement.bind(L);const F={destroyGridUi:()=>{},setRtlClass:r,forceFocusOutOfContainer:V=>{var _,w;if(!V&&((_=E.current)!=null&&_.isDisplayed())){E.current.forceFocusOutOfContainer(V);return}(w=f.current)==null||w.forceFocusOutOfContainer(V)},updateLayoutClasses:n,getFocusableContainers:()=>{var w;const V=[],_=(w=a.current)==null?void 0:w.querySelector(".ag-root");return _&&V.push({getGui:()=>_}),x.current.forEach(T=>{T.isDisplayed()&&V.push(T)}),V},setCursor:p,setUserSelect:i};L.setComp(F,y,y),C(!0)},[]);t.useEffect(()=>{const y=g.current,L=a.current;if(!k||!M||!y||!m||!L)return;const F=[],{watermarkSelector:V,paginationSelector:_,sideBarSelector:w,statusBarSelector:T,gridHeaderDropZonesSelector:B}=y.getOptionalSelectors(),I=[];if(B){const H=e.createBean(new B.component),A=H.getGui();L.insertAdjacentElement("afterbegin",A),I.push(A),F.push(H)}if(w){const H=e.createBean(new w.component),A=H.getGui(),Q=m.querySelector(".ag-tab-guard-bottom");Q&&(Q.insertAdjacentElement("beforebegin",A),I.push(A)),F.push(H),x.current.push(H)}const U=H=>{const A=e.createBean(new H),Q=A.getGui();return L.insertAdjacentElement("beforeend",Q),I.push(Q),F.push(A),A};if(T&&U(T.component),_){const H=U(_.component);E.current=H,x.current.push(H)}return V&&U(V.component),()=>{e.destroyBeans(F),I.forEach(H=>{var A;(A=H.parentElement)==null||A.removeChild(H)})}},[k,m,M]);const W=t.useMemo(()=>ne("ag-root-wrapper",s,o),[s,o]),O=t.useMemo(()=>ne("ag-root-wrapper-body","ag-focus-managed",o),[o]),N=t.useMemo(()=>({userSelect:l??"",WebkitUserSelect:l??"",cursor:u??""}),[l,u]),b=t.useCallback(y=>{f.current=y,R(y!==null)},[]),S=t.useCallback(()=>{var y;return!((y=g.current)!=null&&y.isFocusable())},[]);return c.createElement("div",{ref:G,className:W,style:N,role:"presentation"},c.createElement("div",{className:O,ref:d,role:"presentation"},h&&m&&M&&c.createElement(Z.Provider,{value:M},c.createElement(Ms,{ref:b,eFocusableElement:m,onTabKeyDown:P,gridCtrl:g.current,forceFocusOutWhenTabGuardsAreEmpty:!0,isEmpty:S},c.createElement(xs,null)))))},As=t.memo(Fs),Gs=class extends lt{wireBeans(e){this.ctrlsSvc=e.ctrlsSvc}areHeaderCellsRendered(){return this.ctrlsSvc.getHeaderRowContainerCtrls().every(e=>e.getAllCtrls().every(s=>s.areCellsRendered()))}},Je={setGridApi:void 0,maxComponentCreationTimeMs:void 0,children:void 0},Bs={gridOptions:void 0,modules:void 0,containerStyle:void 0,className:void 0,passGridApi:void 0,componentWrappingElement:void 0,...Je},qe=new Set(Object.keys(Bs)),Ns=new Set(Object.keys(Je)),Ke=e=>{var m;const s=t.useRef(),r=t.useRef(null),o=t.useRef(null),n=t.useRef([]),u=t.useRef([]),p=t.useRef(e),l=t.useRef(),i=t.useRef(),h=t.useRef(!1),[C,k]=t.useState(void 0),[,R]=t.useState(0),g=t.useCallback(d=>{if(r.current=d,!d){n.current.forEach(b=>b()),n.current.length=0;return}const v=e.modules||[];o.current||(o.current=new Xt(()=>R(b=>b+1),e.componentWrappingElement,e.maxComponentCreationTimeMs),n.current.push(()=>{var b;(b=o.current)==null||b.destroy(),o.current=null}));const E=Ze(e.gridOptions,e,Object.keys(e).filter(b=>!qe.has(b))),x=()=>{if(h.current){const b=()=>{var y;return(y=l.current)!=null&&y.shouldQueueUpdates()?void 0:u.current.shift()};let S=b();for(;S;)S(),S=b()}},P=new Os(x);l.current=P;const M=new Gs,G={providedBeanInstances:{frameworkCompWrapper:new Ds(o.current,E.reactiveCustomComponents??at("reactiveCustomComponents")??!0),renderStatus:M},modules:v,frameworkOverrides:P,setThemeOnGridDiv:!0},W=b=>{k(b),b.createBean(M),n.current.push(()=>{b.destroy()}),b.getBean("ctrlsSvc").whenReady({addDestroyFunc:S=>{n.current.push(S)}},()=>{var y;if(b.isDestroyed())return;const S=s.current;S&&((y=e.passGridApi)==null||y.call(e,S))})},O=b=>{b.getBean("ctrlsSvc").whenReady({addDestroyFunc:S=>{n.current.push(S)}},()=>{u.current.forEach(S=>S()),u.current.length=0,h.current=!0})},N=new ct;E.gridId??(E.gridId=i.current),s.current=N.create(d,E,W,O,G),n.current.push(()=>{s.current=void 0}),s.current&&(i.current=s.current.getGridId())},[]),a=t.useMemo(()=>({height:"100%",...e.containerStyle||{}}),[e.containerStyle]),f=t.useCallback(d=>{var v;h.current&&!((v=l.current)!=null&&v.shouldQueueUpdates())?d():u.current.push(d)},[]);return t.useEffect(()=>{const d=Is(p.current,e);p.current=e,f(()=>{s.current&&it(d,s.current)})},[e]),c.createElement("div",{style:a,className:e.className,ref:g},C&&!C.isDestroyed()?c.createElement(As,{context:C}):null,((m=o.current)==null?void 0:m.getPortals())??null)};function Is(e,s){const r={};return Object.keys(s).forEach(o=>{if(qe.has(o)){Ns.has(o)&&Me(274,{prop:o});return}const n=s[o];e[o]!==n&&(r[o]=n)}),r}var Ds=class extends ot{constructor(e,s){super(),this.parent=e,this.reactiveCustomComponents=s}createWrapper(e,s){if(this.reactiveCustomComponents){const n=(u=>{switch(u){case"filter":return _t;case"floatingFilterComponent":return Lt;case"dateComponent":return Ht;case"dragAndDropImageComponent":return jt;case"loadingOverlayComponent":return zt;case"noRowsOverlayComponent":return qt;case"statusPanel":return Kt;case"toolPanel":return Qt;case"menuItem":return Jt;case"cellRenderer":return Ut;case"innerHeaderComponent":return $t}})(s.name);if(n)return new n(e,this.parent,s)}else switch(s.name){case"filter":case"floatingFilterComponent":case"dateComponent":case"dragAndDropImageComponent":case"loadingOverlayComponent":case"noRowsOverlayComponent":case"statusPanel":case"toolPanel":case"menuItem":case"cellRenderer":Ge();break}const r=!s.cellRenderer&&s.name!=="toolPanel";return new $e(e,this.parent,s,r)}},Ws=t.forwardRef((e,s)=>{const r=t.useContext(Z),{registry:o,context:n,gos:u,rowModel:p}=r,[l,i]=t.useState(()=>new oe),[h,C]=t.useState(()=>new oe),[k,R]=t.useState(),[g,a]=t.useState(),f=t.useRef(),m=t.useRef(null),d=t.useRef(),v=t.useMemo(()=>tt(e.api.getGridId(),(k==null?void 0:k.rowModelType)??"clientSide"),[e]),E=t.useMemo(()=>l.toString()+" ag-details-row",[l]),x=t.useMemo(()=>h.toString()+" ag-details-grid",[h]);s&&t.useImperativeHandle(s,()=>({refresh(){var G;return((G=f.current)==null?void 0:G.refresh())??!1}})),e.template&&Me(230);const P=t.useCallback(G=>{var N;if(m.current=G,!G){f.current=n.destroyBean(f.current),(N=d.current)==null||N.call(d);return}const W={toggleCss:(b,S)=>i(y=>y.setClass(b,S)),toggleDetailGridCss:(b,S)=>C(y=>y.setClass(b,S)),setDetailGrid:b=>R(b),setRowData:b=>a(b),getGui:()=>m.current},O=o.createDynamicBean("detailCellRendererCtrl",!0);if(O&&(n.createBean(O),O.init(W,e),f.current=O,u.get("detailRowAutoHeight"))){const b=()=>{if(m.current==null)return;const S=m.current.clientHeight;S!=null&&S>0&&setTimeout(()=>{e.node.setRowHeight(S),(st(u)||rt(u))&&p.onRowHeightChanged()},0)};d.current=je(r,G,b),b()}},[]),M=t.useCallback(G=>{var W;(W=f.current)==null||W.registerDetailWithMaster(G)},[]);return c.createElement("div",{className:E,ref:P},k&&c.createElement(Ke,{className:x,...k,modules:v,rowData:g,passGridApi:M}))}),Os=class extends et{constructor(e){super("react"),this.processQueuedUpdates=e,this.queueUpdates=!1,this.renderingEngine="react",this.frameworkComponents={agGroupCellRenderer:De,agGroupRowRenderer:De,agDetailCellRenderer:Ws},this.wrapIncoming=(s,r)=>r==="ensureVisible"?Dt(s):s()}frameworkComponent(e){return this.frameworkComponents[e]}isFrameworkComponent(e){if(!e)return!1;const s=e.prototype;return!(s&&"getGui"in s)}getLockOnRefresh(){this.queueUpdates=!0}releaseLockOnRefresh(){this.queueUpdates=!1,this.processQueuedUpdates()}shouldQueueUpdates(){return this.queueUpdates}runWhenReadyAsync(){return It()}},Ts=class extends t.Component{constructor(){super(...arguments),this.apiListeners=[],this.setGridApi=e=>{this.api=e,this.apiListeners.forEach(s=>s(e))}}registerApiListener(e){this.apiListeners.push(e)}componentWillUnmount(){this.apiListeners.length=0}render(){return c.createElement(Ke,{...this.props,passGridApi:this.setGridApi})}};const _s=({products:e,selectId:s,setSelectId:r,filters:o,updateFilter:n,categories:u,brands:p,router:l,setIsDeleteModalOpen:i,show:h})=>{const C=t.useMemo(()=>[{headerName:"",field:"checkbox",width:60,headerCheckboxSelection:!0,checkboxSelection:!0,cellRenderer:({data:a})=>D.jsx("div",{className:"flex items-center ",children:D.jsx("input",{id:`checkbox-${a.id}`,type:"checkbox",className:"hidden peer",checked:s.includes(a.id),onChange:f=>{f.target.checked?r(m=>[...m,a.id]):r(m=>m.filter(d=>d!==a.id))}})})},{headerName:"Sno",field:"sno",width:80,valueGetter:a=>a.node.rowIndex+1},{headerName:"Product",field:"name",flex:1,cellRenderer:({data:a})=>D.jsxs("div",{className:"cursor-pointer hover:text-cyan-600 transition",onClick:()=>l.get(route("product.edit",a.id)),children:[D.jsx("p",{className:"font-medium text-gray-800",children:a.name}),a.model&&D.jsxs("p",{className:"text-sm text-gray-500",children:["Model: ",a.model]})]})},{headerName:"Quantity",field:"stock.quantity",width:120,valueGetter:a=>{var f,m;return((m=(f=a.data)==null?void 0:f.stock)==null?void 0:m.quantity)||0}},{headerName:"Purchase Price",field:"purchase_price",width:150,valueGetter:a=>a.data.purchase_price||"N/A"},{headerName:"Selling Price",field:"selling_price",width:150,valueGetter:a=>a.data.selling_price||"N/A"},{headerName:"Category",field:"categories",width:150,valueGetter:a=>{var f,m;return((m=(f=a.data)==null?void 0:f.categories)==null?void 0:m.map(d=>d.name).join(", "))||"N/A"},headerComponent:()=>D.jsxs("div",{className:"flex items-center gap-2",children:["Category",D.jsxs("select",{className:"appearance-none bg-cyan-600 text-white text-xs rounded-md px-2 py-1 focus:outline-none focus:ring-2 focus:ring-cyan-300",value:o.category,onChange:a=>n("category",a.target.value),children:[D.jsx("option",{value:"",children:"All"}),u.map(a=>D.jsx("option",{value:a.name,children:a.name},a.name))]})]})},{headerName:"Brand",field:"brands",width:150,valueGetter:a=>{var f,m;return((m=(f=a.data)==null?void 0:f.brands)==null?void 0:m.map(d=>d.name).join(", "))||"N/A"},headerComponent:()=>D.jsxs("div",{className:"flex items-center gap-2",children:["Brand",D.jsxs("select",{className:"appearance-none bg-cyan-600 text-white text-xs rounded-md px-2 py-1 focus:outline-none focus:ring-2 focus:ring-cyan-300",value:o.brand,onChange:a=>n("brand",a.target.value),children:[D.jsx("option",{value:"",children:"All"}),p.map(a=>D.jsx("option",{value:a.name,children:a.name},a.name))]})]})},{headerName:"Stock Status",field:"stock.status",width:150,cellRenderer:({data:a})=>{var f;return D.jsxs("label",{className:"relative cursor-pointer",children:[D.jsx("input",{type:"checkbox",onClick:()=>l.put(route("product.status",a.id),{},{preserveScroll:!0}),className:"sr-only peer",checked:((f=a==null?void 0:a.stock)==null?void 0:f.status)||!1}),D.jsx("div",{className:"w-11 h-6 flex items-center bg-gray-300 rounded-full peer peer-checked:after:translate-x-full after:absolute after:left-[2px] peer-checked:after:border-white after:bg-white after:border after:border-gray-300 after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-cyan-600"})]})},headerComponent:()=>D.jsxs("div",{className:"flex items-center gap-2",children:["Stock Status",D.jsxs("select",{className:"appearance-none bg-cyan-600 text-white text-xs rounded-md px-2 py-1 focus:outline-none focus:ring-2 focus:ring-cyan-300",value:o.status,onChange:a=>n("status",a.target.value),children:[D.jsx("option",{value:"",children:"All"}),D.jsx("option",{value:"1",children:"In Stock"}),D.jsx("option",{value:"0",children:"Out of Stock"})]})]})},{headerName:"Actions",field:"actions",width:150,cellRenderer:({data:a})=>D.jsxs("div",{className:"flex items-center space-x-4",children:[D.jsx("a",{href:route("product.show",a.code||a.id),className:"text-cyan-500 hover:text-cyan-700 transition text-sm flex items-center gap-1",title:"View",children:D.jsx(Ft,{className:"w-4 h-4"})}),D.jsx("a",{href:route("product.edit",a.id),className:"text-yellow-500 hover:text-yellow-700 transition text-sm flex items-center gap-1",title:"Edit",children:D.jsx(Bt,{className:"w-4 h-4"})}),D.jsx("button",{onClick:()=>i(a),className:"text-red-500 hover:text-red-700 transition text-sm flex items-center gap-1",title:"Delete",children:D.jsx(At,{className:"w-4 h-4"})}),a.identity_type!=="imei"&&D.jsx("a",{href:route("stock.index",{product_id:a.id}),className:"text-green-500 hover:text-green-700 transition text-sm flex items-center gap-1",title:"Stock",children:D.jsx(Gt,{className:"w-4 h-4"})})]})}],[s,r,o,n,u,p,l,i]),k=a=>{var f,m,d,v;return((m=(f=a.data)==null?void 0:f.stock)==null?void 0:m.quantity)===0||((v=(d=a.data)==null?void 0:d.stock)==null?void 0:v.quantity)===null?"bg-red-50 hover:bg-red-100":a.node.rowIndex%2===0?"bg-white":"bg-gray-50"},R=t.useCallback(a=>{a.event.preventDefault(),h({event:a.event,props:a.data})},[h]),g=t.useMemo(()=>({sortable:!0,filter:!0,resizable:!0,cellClass:"text-gray-700 p-4"}),[]);return D.jsx("div",{className:"rounded-lg shadow-md overflow-hidden",children:D.jsx("div",{className:"ag-theme-alpine h-[600px]",children:D.jsx(Ts,{rowData:e.data,columnDefs:C,defaultColDef:g,rowSelection:"multiple",suppressRowClickSelection:!0,getRowClass:k,onRowClicked:a=>{if(a.event.target.tagName!=="INPUT"&&a.event.target.tagName!=="A"){const f=s.includes(a.data.id);r(f?m=>m.filter(d=>d!==a.data.id):m=>[...m,a.data.id])}},onRowRightClicked:R,noRowsOverlayComponent:()=>D.jsx("div",{className:"p-6 text-center text-gray-500",children:"No products found."})})})})};export{_s as default};
